<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jordan Ouellette-Plante" />

<meta name="date" content="2021-09-30" />

<title>Préparation des intrants du programme</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Morue</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="01_preparation_programme.html">1. Préparation initiale</a>
</li>
<li>
  <a href="02_preparation_data.html">2. Préparation des intrants</a>
</li>
<li>
  <a href="03_calculs.html">3. Calculs</a>
</li>
<li>
  <a href="04_comparaisons_valeurs_historiques.html">4. Comparaisons avec valeurs historiques</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Préparation des intrants du programme</h1>
<h4 class="author">Jordan Ouellette-Plante</h4>
<h4 class="date">2021-09-30</h4>

</div>


<div id="objectif" class="section level1">
<h1><span class="header-section-number">1</span> Objectif</h1>
<p>Préparer ou du moins copier localement les intrants requis pour les analyses.</p>
</div>
<div id="initialisation" class="section level1">
<h1><span class="header-section-number">2</span> Initialisation</h1>
<div id="répertoires-et-infos-utiles" class="section level2">
<h2><span class="header-section-number">2.1</span> Répertoires et infos utiles</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">temp &lt;-<span class="st"> </span><span class="kw">tempfile</span>(<span class="dt">fileext =</span> <span class="st">&quot;.R&quot;</span>) <span class="co"># https://gist.github.com/noamross/a549ee50e8a4fd68b8b1</span></a>
<a class="sourceLine" id="cb1-2" title="2">knitr<span class="op">::</span><span class="kw">purl</span>(<span class="dt">input =</span> <span class="st">&quot;01_preparation_programme.Rmd&quot;</span>, <span class="dt">output =</span> temp, <span class="dt">quiet =</span> T)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">## [1] &quot;C:\\Users\\OUELLE~1\\AppData\\Local\\Temp\\1\\RtmpkLTUmj\\file426424ce3410.R&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">source</span>(temp)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">rm</span>(temp)</a></code></pre></div>
</div>
<div id="packages-requis" class="section level2">
<h2><span class="header-section-number">2.2</span> packages requis</h2>
<p>Des packages supplémentaires sont requis.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(cowplot)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">library</span>(grid)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">library</span>(gridExtra)</a></code></pre></div>
</div>
</div>
<div id="débarquements" class="section level1">
<h1><span class="header-section-number">3</span> Débarquements</h1>
<div id="données-ziff" class="section level2">
<h2><span class="header-section-number">3.1</span> Données ZIFF</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(dat_ziff)){ <span class="co"># si le fichier n&#39;existe pas, je le crée</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="kw">load</span>(intrant_ziff)</a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">dim</span>(ziff) <span class="co"># 3799554 obs et 66 var</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">unique</span>(ziff<span class="op">$</span>cod_esp) <span class="co"># juste des débarquements de morue</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw">unique</span>(ziff<span class="op">$</span>div) <span class="co"># plusieurs OPANO</span></a>
<a class="sourceLine" id="cb3-6" title="6">    ziff &lt;-<span class="st"> </span>ziff <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(div <span class="op">%in%</span><span class="st"> </span>opanos)</a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="kw">dim</span>(ziff) <span class="co"># 583305 obs et 66 var</span></a>
<a class="sourceLine" id="cb3-8" title="8">    <span class="kw">save</span>(ziff, <span class="dt">file =</span> dat_ziff)</a>
<a class="sourceLine" id="cb3-9" title="9">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb3-10" title="10">    <span class="kw">load</span>(dat_ziff)</a>
<a class="sourceLine" id="cb3-11" title="11">}</a>
<a class="sourceLine" id="cb3-12" title="12"></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="kw">dim</span>(ziff) <span class="co"># 583305 obs et 66 var</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">## [1] 583305     66</span></a></code></pre></div>
</div>
<div id="données-opano" class="section level2">
<h2><span class="header-section-number">3.2</span> Données OPANO</h2>
<div id="format-nafo-21a" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Format NAFO 21A</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(dat_nafoa)){</a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="kw">load</span>(intrant_nafoa)</a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">dim</span>(nafoA) <span class="co"># 616 obs et 5 var</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="kw">save</span>(nafoA, <span class="dt">file =</span> dat_nafoa)</a>
<a class="sourceLine" id="cb4-5" title="5">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="kw">load</span>(dat_nafoa)</a>
<a class="sourceLine" id="cb4-7" title="7">}</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="kw">dim</span>(nafoA) <span class="co"># 616 obs et 5 var</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">## [1] 616   5</span></a></code></pre></div>
</div>
<div id="format-nafo-21b" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Format NAFO 21B</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">file.exists</span>(dat_nafob)){</a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="kw">load</span>(intrant_nafob)</a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">dim</span>(nafoB) <span class="co"># 164393 obs et 25 var</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="kw">unique</span>(nafoB<span class="op">$</span>nafo) <span class="co"># plusieurs OPANO</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="kw">unique</span>(nafoB<span class="op">$</span>code) <span class="co"># 101 = code OPANO pour la morue franche</span></a>
<a class="sourceLine" id="cb5-6" title="6">    nafoB &lt;-<span class="st"> </span>nafoB <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">             </span><span class="kw">filter</span>(nafo <span class="op">%in%</span><span class="st"> </span><span class="kw">toupper</span>(opanos)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">             </span><span class="kw">select</span>(year, month, country, nafo, gear, gear, gear.code, gear.cat, prov, catch)</a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="kw">names</span>(nafoB) &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">names</span>(nafoB), <span class="st">&quot;year&quot;</span> =<span class="st"> &quot;annee&quot;</span>, <span class="st">&quot;month&quot;</span> =<span class="st"> &quot;mois&quot;</span>, <span class="st">&quot;country&quot;</span> =<span class="st"> &quot;pays&quot;</span>, <span class="st">&quot;nafo&quot;</span> =<span class="st"> &quot;opano&quot;</span>, </a>
<a class="sourceLine" id="cb5-10" title="10">                           <span class="st">&quot;gear&quot;</span> =<span class="st"> &quot;engin_en&quot;</span>, <span class="st">&quot;gear.code&quot;</span> =<span class="st"> &quot;engin&quot;</span>, <span class="st">&quot;gear.cat&quot;</span> =<span class="st"> &quot;engin_cat&quot;</span>)</a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">unique</span>(nafoB<span class="op">$</span>opano) <span class="co"># je vais standardiser 3Pn</span></a>
<a class="sourceLine" id="cb5-12" title="12">    nafoB[nafoB<span class="op">$</span>opano <span class="op">==</span><span class="st"> &quot;3PN&quot;</span>, <span class="st">&quot;opano&quot;</span>] &lt;-<span class="st"> &quot;3Pn&quot;</span></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="kw">dim</span>(nafoB) <span class="co"># 19059 obs et 9 var</span></a>
<a class="sourceLine" id="cb5-14" title="14">    <span class="kw">save</span>(nafoB, <span class="dt">file =</span> dat_nafob)</a>
<a class="sourceLine" id="cb5-15" title="15">}<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb5-16" title="16">    <span class="kw">load</span>(dat_nafob)</a>
<a class="sourceLine" id="cb5-17" title="17">}</a>
<a class="sourceLine" id="cb5-18" title="18"></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="kw">dim</span>(nafoB) <span class="co"># 19059 obs et 9 var</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">## [1] 19059     9</span></a></code></pre></div>
</div>
</div>
<div id="comparaison-des-débarquements" class="section level2">
<h2><span class="header-section-number">3.3</span> Comparaison des débarquements</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">dat_a &lt;-<span class="st"> </span>nafoA <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">         </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">         </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">         </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;NAFO 21A&quot;</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">dat_b &lt;-<span class="st"> </span>nafoB <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">         </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="st">         </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="st">         </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;NAFO 21B&quot;</span>)</a>
<a class="sourceLine" id="cb6-11" title="11">dat_c &lt;-<span class="st"> </span>ziff <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="st">         </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="st">         </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="st">         </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;ZIFF&quot;</span>)</a>
<a class="sourceLine" id="cb6-16" title="16"></a>
<a class="sourceLine" id="cb6-17" title="17">dat &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(dat_a, dat_b, dat_c) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1985</span>)</a>
<a class="sourceLine" id="cb6-18" title="18"></a>
<a class="sourceLine" id="cb6-19" title="19">brks_x &lt;-<span class="st"> </span><span class="dv">1985</span><span class="op">:</span><span class="dv">2020</span></a>
<a class="sourceLine" id="cb6-20" title="20">labs_x &lt;-<span class="st"> </span>brks_x</a>
<a class="sourceLine" id="cb6-21" title="21">labs_x[labs_x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat, <span class="kw">aes</span>(<span class="dt">x =</span> annee, <span class="dt">y =</span> catch <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>, <span class="dt">fill =</span> source)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="st">    </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">breaks =</span> brks_x, <span class="dt">labels =</span> labs_x) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Année&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Débarquements (milliers de tonnes)&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;Source des données&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb6-28" title="28">          <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-7-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">rm</span>(dat_a, dat_b, dat_c, dat)</a></code></pre></div>
<p>Les données de l’OPANO donnent des résultats équivalents jusqu’à ~ 2009. Les données NAFO 21B sont disponibles jusqu’à 2016, mais on voit qu’elles ne sont pas à jour avec les données ZIFF.</p>
<p>Les données ZIFF ne comportent pas les débarquements des flottilles étrangères et c’est pour cette raison qu’ils sont plus bas au cours des années 1985–1992.</p>
</div>
<div id="catch-nafob-ziff" class="section level2">
<h2><span class="header-section-number">3.4</span> <code>catch</code> = <code>nafoB</code> + <code>ziff</code></h2>
<p>Je me crée un jeu <code>catch</code> où je combine les données NAFO 21B et ZIFF selon ce format:</p>
<ul>
<li>1960–1984: données NAFO 21B</li>
<li>1985–2020:
<ul>
<li>Données ZIFF</li>
<li>Données NAFO 21B seulement pour la composante internationale des débarquements</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">ziff &lt;-<span class="st"> </span>ziff <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;ZIFF&quot;</span>, </a>
<a class="sourceLine" id="cb8-3" title="3">               <span class="dt">pays =</span> <span class="st">&quot;Canada&quot;</span>, <span class="co"># pour être constant avec les variables de nafoB</span></a>
<a class="sourceLine" id="cb8-4" title="4">               <span class="dt">prov =</span> <span class="kw">ifelse</span>(prov_deb <span class="op">==</span><span class="st"> &quot;Inconnu&quot;</span>, <span class="kw">as.character</span>(prov_att), <span class="kw">as.character</span>(prov_deb)),</a>
<a class="sourceLine" id="cb8-5" title="5">               <span class="dt">engin =</span> <span class="kw">as.character</span>(engin),</a>
<a class="sourceLine" id="cb8-6" title="6">               <span class="dt">catch =</span> pds_vif) <span class="co"># débarquements en kg</span></a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8">nafoB &lt;-<span class="st"> </span>nafoB <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;NAFO 21B&quot;</span>,</a>
<a class="sourceLine" id="cb8-10" title="10">                <span class="dt">engin =</span> <span class="kw">as.character</span>(engin),</a>
<a class="sourceLine" id="cb8-11" title="11">                <span class="dt">an_gestion =</span> <span class="kw">as.character</span>(annee),</a>
<a class="sourceLine" id="cb8-12" title="12">                <span class="dt">catch =</span> catch <span class="op">*</span><span class="st"> </span><span class="dv">1000</span>) <span class="co"># débarquements en kg</span></a>
<a class="sourceLine" id="cb8-13" title="13"></a>
<a class="sourceLine" id="cb8-14" title="14">nafoB <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(pays <span class="op">!=</span><span class="st"> &quot;Canada&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span>unique <span class="op">%&gt;%</span><span class="st"> </span>sort</a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">##  [1] 1960 1961 1962 1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">## [16] 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1989 1990</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">## [31] 1991 1992</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co"># j&#39;ai des débarquements de flotilles étrangères passé 1985. ZIFF ne contiendra pas ces débarquements</span></a>
<a class="sourceLine" id="cb8-19" title="19"></a>
<a class="sourceLine" id="cb8-20" title="20">catch &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(nafoB <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">&lt;</span><span class="st"> </span><span class="dv">1985</span>),</a>
<a class="sourceLine" id="cb8-21" title="21">                   nafoB <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1985</span>, pays <span class="op">!=</span><span class="st"> &quot;Canada&quot;</span>),</a>
<a class="sourceLine" id="cb8-22" title="22">                   ziff) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="st">         </span><span class="kw">select</span>(annee, mois, div, opano, prov, engin, engin_cat, engin_fr, engin_en, source, </a>
<a class="sourceLine" id="cb8-24" title="24">                catch, pays, date_deb, an_gestion)</a>
<a class="sourceLine" id="cb8-25" title="25"></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="co"># catch %&gt;%</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="co">#   group_by(annee) %&gt;%</span></a>
<a class="sourceLine" id="cb8-28" title="28"><span class="co">#   summarise(catch = sum(catch / 1000, na.rm = T)) %&gt;% # débarquements en tonnes</span></a>
<a class="sourceLine" id="cb8-29" title="29"><span class="co">#   ggplot(data = ., aes(x = annee, y = catch)) +</span></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="co">#   geom_line() +</span></a>
<a class="sourceLine" id="cb8-31" title="31"><span class="co">#   geom_point()</span></a>
<a class="sourceLine" id="cb8-32" title="32"></a>
<a class="sourceLine" id="cb8-33" title="33"><span class="kw">unique</span>(catch<span class="op">$</span>div) <span class="co"># valeurs NA...</span></a>
<a class="sourceLine" id="cb8-34" title="34"><span class="co">## [1] NA    &quot;4R&quot;  &quot;4S&quot;  &quot;3Pn&quot;</span></a>
<a class="sourceLine" id="cb8-35" title="35">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(catch, <span class="kw">is.na</span>(div))); <span class="kw">length</span>(cor) <span class="co"># 10156 lignes</span></a>
<a class="sourceLine" id="cb8-36" title="36"><span class="co">## [1] 10156</span></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="kw">unique</span>(catch<span class="op">$</span>opano[cor]) <span class="co"># la division n&#39;a pas été inscrite.</span></a>
<a class="sourceLine" id="cb8-38" title="38"><span class="co">## [1] &quot;4R&quot;  &quot;3Pn&quot; &quot;4S&quot;</span></a>
<a class="sourceLine" id="cb8-39" title="39">catch<span class="op">$</span>div[cor] &lt;-<span class="st"> </span>catch<span class="op">$</span>opano[cor]</a>
<a class="sourceLine" id="cb8-40" title="40"></a>
<a class="sourceLine" id="cb8-41" title="41">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(catch, opano <span class="op">==</span><span class="st"> &quot;3P&quot;</span>)); <span class="kw">length</span>(cor) <span class="co"># 17445 lignes</span></a>
<a class="sourceLine" id="cb8-42" title="42"><span class="co">## [1] 17445</span></a>
<a class="sourceLine" id="cb8-43" title="43"><span class="kw">unique</span>(catch<span class="op">$</span>div[cor]) <span class="co"># la zone unitaire devrait être 3Pn</span></a>
<a class="sourceLine" id="cb8-44" title="44"><span class="co">## [1] &quot;3Pn&quot;</span></a>
<a class="sourceLine" id="cb8-45" title="45">catch<span class="op">$</span>opano[cor] &lt;-<span class="st"> &quot;3Pn&quot;</span></a>
<a class="sourceLine" id="cb8-46" title="46"></a>
<a class="sourceLine" id="cb8-47" title="47">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(catch, <span class="kw">nchar</span>(opano) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)); <span class="kw">length</span>(cor) <span class="co"># 7872 lignes</span></a>
<a class="sourceLine" id="cb8-48" title="48"><span class="co">## [1] 7872</span></a>
<a class="sourceLine" id="cb8-49" title="49"><span class="kw">unique</span>(catch<span class="op">$</span>div[cor]) <span class="co"># on ne sait pas quelle est la zone unitaire exacte...</span></a>
<a class="sourceLine" id="cb8-50" title="50"><span class="co">## [1] &quot;4R&quot; &quot;4S&quot;</span></a>
<a class="sourceLine" id="cb8-51" title="51"><span class="kw">rm</span>(cor)</a>
<a class="sourceLine" id="cb8-52" title="52"></a>
<a class="sourceLine" id="cb8-53" title="53"><span class="kw">dim</span>(catch) <span class="co"># 593461 obs et 14 var</span></a>
<a class="sourceLine" id="cb8-54" title="54"><span class="co">## [1] 593461     14</span></a>
<a class="sourceLine" id="cb8-55" title="55"><span class="kw">save</span>(catch, <span class="dt">file =</span> dat_catch)</a></code></pre></div>
</div>
</div>
<div id="échantillonneurs-à-quai" class="section level1">
<h1><span class="header-section-number">4</span> Échantillonneurs à quai</h1>
<div id="lectures" class="section level2">
<h2><span class="header-section-number">4.1</span> Lectures</h2>
<div id="fl" class="section level3">
<h3><span class="header-section-number">4.1.1</span> FL</h3>
<p><code>lf</code> = length frequency = données de fréquences de longueur</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">lf &lt;-<span class="st"> </span><span class="kw">read.lf</span>(<span class="dt">file =</span> intrant_lf, <span class="dt">year =</span> <span class="ot">NULL</span>, <span class="dt">language =</span> <span class="st">&quot;fr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">      </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;3PN|4R|4S&quot;</span>, opano)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">      </span>as_tibble</a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw">names</span>(lf) &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">names</span>(lf), <span class="st">&quot;nafo&quot;</span> =<span class="st"> &quot;div&quot;</span>)</a>
<a class="sourceLine" id="cb9-5" title="5"></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co"># Travail sur opano et div</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="kw">unique</span>(lf<span class="op">$</span>div) <span class="co"># problème avec 3P</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">## [1] &quot;3P&quot; &quot;4R&quot; &quot;4S&quot; NA</span></a>
<a class="sourceLine" id="cb9-9" title="9">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(lf, <span class="op">!</span><span class="kw">is.na</span>(div) <span class="op">&amp;</span><span class="st"> </span>div <span class="op">==</span><span class="st"> &quot;3P&quot;</span>)); <span class="kw">length</span>(cor) <span class="co"># 14667 lignes</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">## [1] 14667</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="kw">unique</span>(lf<span class="op">$</span>opano[cor]) <span class="co"># 3Pn</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">## [1] &quot;3PN&quot;</span></a>
<a class="sourceLine" id="cb9-13" title="13">lf<span class="op">$</span>div[cor] &lt;-<span class="st"> &quot;3Pn&quot;</span></a>
<a class="sourceLine" id="cb9-14" title="14"></a>
<a class="sourceLine" id="cb9-15" title="15">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(lf, <span class="kw">is.na</span>(div))); <span class="kw">length</span>(cor) <span class="co"># 13737 lignes</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">## [1] 13737</span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="kw">unique</span>(lf<span class="op">$</span>opano[cor]) <span class="co"># div devrait être 4S</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="co">## [1] &quot;4SI&quot; &quot;4SX&quot; &quot;4SY&quot;</span></a>
<a class="sourceLine" id="cb9-19" title="19">lf<span class="op">$</span>div[cor] &lt;-<span class="st"> &quot;4S&quot;</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="kw">rm</span>(cor)</a>
<a class="sourceLine" id="cb9-21" title="21"></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="kw">unique</span>(lf<span class="op">$</span>opano) <span class="co"># la 3e lettre devrait être en minuscule</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">##  [1] &quot;3PN&quot; &quot;4R&quot;  &quot;4RA&quot; &quot;4RB&quot; &quot;4RC&quot; &quot;4RD&quot; &quot;4S&quot;  &quot;4SI&quot; &quot;4SS&quot; &quot;4SV&quot; &quot;4SW&quot; &quot;4SX&quot;</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">## [13] &quot;4SY&quot; &quot;4SZ&quot;</span></a>
<a class="sourceLine" id="cb9-25" title="25">lf<span class="op">$</span>opano &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">substr</span>(lf<span class="op">$</span>opano,<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">tolower</span>(<span class="kw">substr</span>(lf<span class="op">$</span>opano,<span class="dv">3</span>,<span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb9-26" title="26"></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="kw">dim</span>(lf) <span class="co"># 109138 obs et 34 var</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">## [1] 109138     34</span></a></code></pre></div>
</div>
<div id="caractéristiques-biologiques" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Caractéristiques biologiques</h3>
<p>Ces données incluent les âges.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">bio &lt;-<span class="st"> </span><span class="kw">read.bio</span>(<span class="dt">file =</span> intrant_bio, <span class="dt">year =</span> <span class="ot">NULL</span>, <span class="dt">species =</span> my_sp, <span class="dt">language =</span> <span class="st">&quot;fr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">       </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;3PN|4R|4S&quot;</span>, opano)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">       </span><span class="kw">mutate_at</span>(<span class="dt">.vars =</span> <span class="kw">c</span>(<span class="st">&quot;engin&quot;</span>, <span class="st">&quot;engin_fr&quot;</span>, <span class="st">&quot;engin_en&quot;</span>), <span class="dt">.funs =</span> as.character) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">       </span>as_tibble</a>
<a class="sourceLine" id="cb10-5" title="5"></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co"># Travail sur opano et div</span></a>
<a class="sourceLine" id="cb10-7" title="7">bio<span class="op">$</span>opano &lt;-<span class="st"> </span><span class="kw">as.character</span>(bio<span class="op">$</span>opano) <span class="co"># pour enlever les niveaux inutilisés</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="kw">unique</span>(bio<span class="op">$</span>opano) <span class="co"># la 3e lettre devrait être en minuscule</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">##  [1] &quot;4RB&quot; &quot;3PN&quot; &quot;4RC&quot; &quot;4SI&quot; &quot;4SV&quot; &quot;4SS&quot; &quot;4SY&quot; &quot;4S&quot;  &quot;4SX&quot; &quot;4RA&quot; &quot;4RD&quot; &quot;4R&quot; </span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">## [13] &quot;4SW&quot; &quot;4SZ&quot;</span></a>
<a class="sourceLine" id="cb10-11" title="11">bio<span class="op">$</span>opano &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">substr</span>(bio<span class="op">$</span>opano,<span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">tolower</span>(<span class="kw">substr</span>(bio<span class="op">$</span>opano,<span class="dv">3</span>,<span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb10-12" title="12"></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="kw">dim</span>(bio) <span class="co"># 117002 obs et 24 var</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">## [1] 117002     24</span></a>
<a class="sourceLine" id="cb10-15" title="15">temp &lt;-<span class="st"> </span>bio <span class="co"># pour la partie sur les échantillons manquants</span></a>
<a class="sourceLine" id="cb10-16" title="16">bio &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(age), <span class="op">!</span><span class="kw">is.na</span>(longueur))</a>
<a class="sourceLine" id="cb10-17" title="17"><span class="kw">dim</span>(bio) <span class="co"># 85185 obs et 24 var</span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="co">## [1] 85185    24</span></a></code></pre></div>
</div>
</div>
<div id="échantillons-manquants" class="section level2">
<h2><span class="header-section-number">4.2</span> Échantillons manquants</h2>
<p>Pour certaines années (1994–1997), on voit que j’ai plus d’échantillons d’âge que d’échantillons de FL, ce qui est bizarre puisque normalement, l’échantillon d’âge est un sous-échantillon de celui de FL.</p>
<p>Une théorie est que des échantillons auraient été envoyés complets à l’IML ou ailleurs. Là-bas, les spécimens auraient tous servis autant pour les lectures d’âge que pour les FL. Il aurait donc dû copier ces données dans les données LF et Âge, et pas seulement dans les données d’âge.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">a &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n_lf =</span> <span class="kw">n_distinct</span>(ech_id)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb11-2" title="2">b &lt;-<span class="st"> </span>temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n_age =</span> <span class="kw">n_distinct</span>(ech_id)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="kw">full_join</span>(a, b, <span class="dt">by =</span> <span class="st">&quot;annee&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(n_age <span class="op">&gt;</span><span class="st"> </span>n_lf)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">## # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">##   annee  n_lf n_age</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">##   &lt;dbl&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">## 1  1994     6    78</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">## 2  1995     6   778</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">## 3  1996    11   418</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">## 4  1997   156   321</span></a>
<a class="sourceLine" id="cb11-11" title="11"></a>
<a class="sourceLine" id="cb11-12" title="12">manque &lt;-<span class="st"> </span><span class="kw">setdiff</span>(temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(ech_id) <span class="op">%&gt;%</span><span class="st"> </span>unique,</a>
<a class="sourceLine" id="cb11-13" title="13">                  lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(ech_id) <span class="op">%&gt;%</span><span class="st"> </span>unique)</a>
<a class="sourceLine" id="cb11-14" title="14"><span class="kw">length</span>(manque) <span class="co"># manque 1478 échantillons pour les années 1993:2020</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co">## [1] 1478</span></a>
<a class="sourceLine" id="cb11-16" title="16"></a>
<a class="sourceLine" id="cb11-17" title="17">temp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="st">    </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, ech_id <span class="op">%in%</span><span class="st"> </span>manque) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="st">    </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">n_tot =</span> <span class="kw">NROW</span>(annee), </a>
<a class="sourceLine" id="cb11-21" title="21">              <span class="dt">n_lu =</span> <span class="kw">NROW</span>(annee[<span class="op">!</span><span class="kw">is.na</span>(age)]),</a>
<a class="sourceLine" id="cb11-22" title="22">              <span class="dt">n_non_lu =</span> n_tot <span class="op">-</span><span class="st"> </span>n_lu) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="st">    </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n_non_lu))</a>
<a class="sourceLine" id="cb11-25" title="25"><span class="co">## # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb11-26" title="26"><span class="co">##   annee n_tot  n_lu n_non_lu</span></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="co">##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-28" title="28"><span class="co">## 1  1995  9667  2738     6929</span></a>
<a class="sourceLine" id="cb11-29" title="29"><span class="co">## 2  1996  6359  1425     4934</span></a>
<a class="sourceLine" id="cb11-30" title="30"><span class="co">## 3  1997  3568  1114     2454</span></a>
<a class="sourceLine" id="cb11-31" title="31"><span class="co">## 4  1994   764   733       31</span></a>
<a class="sourceLine" id="cb11-32" title="32"><span class="co"># Pour ces échantillons, des milliers de spécimens n&#39;ont pas eu leur otolithe lue</span></a>
<a class="sourceLine" id="cb11-33" title="33"></a>
<a class="sourceLine" id="cb11-34" title="34"></a>
<a class="sourceLine" id="cb11-35" title="35">temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ech_id <span class="op">%in%</span><span class="st"> </span>manque) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n_distinct</span>(ech_id)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb11-36" title="36"><span class="co">## # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb11-37" title="37"><span class="co">##   annee     n</span></a>
<a class="sourceLine" id="cb11-38" title="38"><span class="co">##   &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-39" title="39"><span class="co">## 1  1994    72</span></a>
<a class="sourceLine" id="cb11-40" title="40"><span class="co">## 2  1995   772</span></a>
<a class="sourceLine" id="cb11-41" title="41"><span class="co">## 3  1996   407</span></a>
<a class="sourceLine" id="cb11-42" title="42"><span class="co">## 4  1997   227</span></a>
<a class="sourceLine" id="cb11-43" title="43"><span class="co"># Les années 1994 à 1997 sont problématiques.</span></a>
<a class="sourceLine" id="cb11-44" title="44">temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ech_id <span class="op">%in%</span><span class="st"> </span>manque) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n_distinct</span>(ech_id)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb11-45" title="45"><span class="co">## # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb11-46" title="46"><span class="co">##   engin     n</span></a>
<a class="sourceLine" id="cb11-47" title="47"><span class="co">##   &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-48" title="48"><span class="co">## 1 FPN      76</span></a>
<a class="sourceLine" id="cb11-49" title="49"><span class="co">## 2 GN      754</span></a>
<a class="sourceLine" id="cb11-50" title="50"><span class="co">## 3 LHP       5</span></a>
<a class="sourceLine" id="cb11-51" title="51"><span class="co">## 4 LL      643</span></a>
<a class="sourceLine" id="cb11-52" title="52"><span class="co"># Surtout du filet maillant et de la palangre. J&#39;ai l&#39;impression que ce sont des échantillons provenant de PSfixe, puisque les autres engins étaient également utilisés au début de ce programme.</span></a>
<a class="sourceLine" id="cb11-53" title="53"></a>
<a class="sourceLine" id="cb11-54" title="54">vars &lt;-<span class="st"> </span><span class="kw">intersect</span>(<span class="kw">names</span>(lf), <span class="kw">names</span>(temp))</a>
<a class="sourceLine" id="cb11-55" title="55">max_id &lt;-<span class="st"> </span><span class="kw">max</span>(lf<span class="op">$</span>id)</a>
<a class="sourceLine" id="cb11-56" title="56"></a>
<a class="sourceLine" id="cb11-57" title="57">ajout_lf &lt;-<span class="st"> </span>temp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-58" title="58"><span class="st">            </span><span class="kw">filter</span>(ech_id <span class="op">%in%</span><span class="st"> </span>manque) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-59" title="59"><span class="st">            </span><span class="kw">select_at</span>(<span class="kw">all_of</span>(vars)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-60" title="60"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">div =</span> <span class="kw">ifelse</span>(opano <span class="op">==</span><span class="st"> &quot;3Pn&quot;</span>, <span class="st">&quot;3Pn&quot;</span>, <span class="kw">substr</span>(opano, <span class="dv">1</span>,<span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb11-61" title="61">                   <span class="dt">n_mes =</span> <span class="dv">1</span>, <span class="co"># dans bio, une ligne par poisson</span></a>
<a class="sourceLine" id="cb11-62" title="62">                   <span class="dt">etat_deb =</span> <span class="st">&quot;Inconnu&quot;</span>, <span class="co"># information non-fournie dans bio</span></a>
<a class="sourceLine" id="cb11-63" title="63">                   <span class="dt">esp_ech =</span> <span class="dv">10</span>, <span class="co"># dans bio, une ligne par poisson</span></a>
<a class="sourceLine" id="cb11-64" title="64">                   <span class="dt">pds_deb =</span> <span class="ot">NA</span>, <span class="co"># dans bio, une ligne par poisson</span></a>
<a class="sourceLine" id="cb11-65" title="65">                   <span class="dt">pds_ech =</span> <span class="ot">NA</span>, <span class="co"># dans bio, une ligne par poisson</span></a>
<a class="sourceLine" id="cb11-66" title="66">                   <span class="dt">no_voy =</span> <span class="kw">as.character</span>(no_voy), <span class="co"># pour que le merge fonctionne</span></a>
<a class="sourceLine" id="cb11-67" title="67">                   <span class="dt">no_prov =</span> <span class="kw">as.character</span>(no_prov), <span class="co"># pour que le merge fonctionne</span></a>
<a class="sourceLine" id="cb11-68" title="68">                   <span class="dt">nbpc =</span> <span class="kw">as.character</span>(nbpc))  <span class="co"># pour que le merge fonctionne</span></a>
<a class="sourceLine" id="cb11-69" title="69">ids &lt;-<span class="st"> </span>ajout_lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(annee, ech_id) <span class="op">%&gt;%</span><span class="st"> </span>summarise <span class="op">%&gt;%</span><span class="st"> </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.) <span class="op">+</span><span class="st"> </span>max_id)</a>
<a class="sourceLine" id="cb11-70" title="70">ajout_lf &lt;-<span class="st"> </span><span class="kw">left_join</span>(ajout_lf, ids, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;ech_id&quot;</span>))</a>
<a class="sourceLine" id="cb11-71" title="71"></a>
<a class="sourceLine" id="cb11-72" title="72"><span class="kw">dim</span>(ajout_lf) <span class="co"># 20358 obs et 24 var</span></a>
<a class="sourceLine" id="cb11-73" title="73"><span class="co">## [1] 20358    24</span></a>
<a class="sourceLine" id="cb11-74" title="74"><span class="kw">dim</span>(lf) <span class="co"># 109138 obs et 34 var</span></a>
<a class="sourceLine" id="cb11-75" title="75"><span class="co">## [1] 109138     34</span></a>
<a class="sourceLine" id="cb11-76" title="76">lf &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(lf, ajout_lf)</a>
<a class="sourceLine" id="cb11-77" title="77"><span class="kw">dim</span>(lf) <span class="co"># 129496 obs et 34 var</span></a>
<a class="sourceLine" id="cb11-78" title="78"><span class="co">## [1] 129496     34</span></a>
<a class="sourceLine" id="cb11-79" title="79"></a>
<a class="sourceLine" id="cb11-80" title="80"><span class="kw">rm</span>(a,b,manque, ajout_lf, vars, temp, ids)</a></code></pre></div>
</div>
<div id="validation-des-longueurs" class="section level2">
<h2><span class="header-section-number">4.3</span> Validation des longueurs</h2>
<p>Je m’assure que les longueurs font du sens. Je ne regarde que les petites valeurs.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(longueur) <span class="op">%&gt;%</span><span class="st"> </span>count <span class="op">%&gt;%</span><span class="st"> </span>ungroup <span class="co"># le 7 cm est à part du reste...</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">## # A tibble: 138 x 2</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">##    longueur     n</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">##       &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">##  1        7     1</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">##  2       11     1</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">##  3       12     1</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">##  4       13     1</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">##  5       14     2</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">##  6       16     2</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">##  7       17     2</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">##  8       18     3</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">##  9       19    12</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">## 10       20     4</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">## # ... with 128 more rows</span></a>
<a class="sourceLine" id="cb12-16" title="16">lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(longueur <span class="op">&lt;</span><span class="st"> </span><span class="dv">19</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(annee, engin, longueur, ech_id) <span class="co"># Une morue de 7 cm pêchée à la palangre? Invraisemblable.</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">## # A tibble: 13 x 4</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">##    annee engin longueur ech_id</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">##    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">##  1  1983 LLS         14  41518</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">##  2  1995 PS          18   1238</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co">##  3  2014 LLS          7  56209</span></a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co">##  4  1983 ST          16  41393</span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="co">##  5  1995 FPN         16   3568</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="co">##  6  1995 FPN         13   3568</span></a>
<a class="sourceLine" id="cb12-26" title="26"><span class="co">##  7  1995 FPN         12   3568</span></a>
<a class="sourceLine" id="cb12-27" title="27"><span class="co">##  8  1995 FPN         18   3568</span></a>
<a class="sourceLine" id="cb12-28" title="28"><span class="co">##  9  1995 FPN         11   3567</span></a>
<a class="sourceLine" id="cb12-29" title="29"><span class="co">## 10  1995 FPN         17   3568</span></a>
<a class="sourceLine" id="cb12-30" title="30"><span class="co">## 11  1995 FPN         18   3567</span></a>
<a class="sourceLine" id="cb12-31" title="31"><span class="co">## 12  1995 FPN         14   3567</span></a>
<a class="sourceLine" id="cb12-32" title="32"><span class="co">## 13  1995 FPN         17   3567</span></a>
<a class="sourceLine" id="cb12-33" title="33">lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(ech_id <span class="op">==</span><span class="st"> </span><span class="dv">56209</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ., <span class="kw">aes</span>(<span class="dt">x =</span> longueur)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-12-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Doit être une erreur de frappe. </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="co"># Comme je ne peux savoir si c&#39;est 37 cm ou xx cm, je flag cette ligne comme outlier</span></a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4">lf<span class="op">$</span>outlier &lt;-<span class="st"> </span>F <span class="co"># par défaut</span></a>
<a class="sourceLine" id="cb13-5" title="5">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(lf, longueur <span class="op">==</span><span class="st"> </span><span class="dv">7</span>)); <span class="kw">length</span>(cor) <span class="co"># 1 ligne</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb13-7" title="7">lf<span class="op">$</span>outlier[cor] &lt;-<span class="st"> </span>T</a></code></pre></div>
</div>
<div id="validation-des-âges" class="section level2">
<h2><span class="header-section-number">4.4</span> Validation des âges</h2>
<p>Je m’assure que les âges font du sens.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span>count <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span>() <span class="co"># pas de valeurs absurdes à 1ère vue. 1 seule valeur 1 an</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co">##    age     n</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co">## 1    1     1</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">## 2    2    55</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">## 3    3   798</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">## 4    4  5428</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">## 5    5 10340</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">## 6    6 13425</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">## 7    7 14278</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">## 8    8 13580</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">## 9    9 11042</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">## 10  10  6767</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">## 11  11  4482</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">## 12  12  2296</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">## 13  13  1281</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">## 14  14   592</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">## 15  15   348</span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">## 16  16   205</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">## 17  17   112</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">## 18  18    61</span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">## 19  19    25</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="co">## 20  20    28</span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="co">## 21  21    19</span></a>
<a class="sourceLine" id="cb14-24" title="24"><span class="co">## 22  22     7</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="co">## 23  23    10</span></a>
<a class="sourceLine" id="cb14-26" title="26"><span class="co">## 24  24     4</span></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="co">## 25  26     1</span></a>
<a class="sourceLine" id="cb14-28" title="28"></a>
<a class="sourceLine" id="cb14-29" title="29"><span class="co"># Relation âge-longueur</span></a>
<a class="sourceLine" id="cb14-30" title="30">bio &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">outlier =</span> <span class="kw">outlier</span>(longueur, <span class="dt">coef =</span> <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb14-31" title="31"><span class="co"># Les valeurs étant au-dessus du 75e percentile ou en-dessous du 25e percentile par un facteur de 3 fois l&#39;étendue interquartile </span></a>
<a class="sourceLine" id="cb14-32" title="32"><span class="co"># sont jugées êtres des outliers.</span></a>
<a class="sourceLine" id="cb14-33" title="33"></a>
<a class="sourceLine" id="cb14-34" title="34">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> </span>T) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(annee, longueur, age, outlier) <span class="co"># 24 outliers initialement</span></a>
<a class="sourceLine" id="cb14-35" title="35"><span class="co">## # A tibble: 24 x 4</span></a>
<a class="sourceLine" id="cb14-36" title="36"><span class="co">##    annee longueur   age outlier</span></a>
<a class="sourceLine" id="cb14-37" title="37"><span class="co">##    &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;lgl&gt;  </span></a>
<a class="sourceLine" id="cb14-38" title="38"><span class="co">##  1  1984       62     4 TRUE   </span></a>
<a class="sourceLine" id="cb14-39" title="39"><span class="co">##  2  1983       66     4 TRUE   </span></a>
<a class="sourceLine" id="cb14-40" title="40"><span class="co">##  3  1983       89     6 TRUE   </span></a>
<a class="sourceLine" id="cb14-41" title="41"><span class="co">##  4  1983       64     4 TRUE   </span></a>
<a class="sourceLine" id="cb14-42" title="42"><span class="co">##  5  1984       76     4 TRUE   </span></a>
<a class="sourceLine" id="cb14-43" title="43"><span class="co">##  6  2016       74     5 TRUE   </span></a>
<a class="sourceLine" id="cb14-44" title="44"><span class="co">##  7  1984       60     4 TRUE   </span></a>
<a class="sourceLine" id="cb14-45" title="45"><span class="co">##  8  1990       92     6 TRUE   </span></a>
<a class="sourceLine" id="cb14-46" title="46"><span class="co">##  9  1990       99     7 TRUE   </span></a>
<a class="sourceLine" id="cb14-47" title="47"><span class="co">## 10  1984      112     8 TRUE   </span></a>
<a class="sourceLine" id="cb14-48" title="48"><span class="co">## # ... with 14 more rows</span></a>
<a class="sourceLine" id="cb14-49" title="49"></a>
<a class="sourceLine" id="cb14-50" title="50"><span class="kw">ggplot</span>(<span class="dt">data =</span> bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year), <span class="kw">aes</span>(<span class="dt">x =</span> longueur, <span class="dt">fill =</span> outlier)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-51" title="51"><span class="st">    </span><span class="kw">geom_histogram</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb14-52" title="52"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>age, <span class="dt">scale =</span> <span class="st">&quot;free&quot;</span>)</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-13-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># bizarre pour l&#39;âge 1</span></a>
<a class="sourceLine" id="cb15-2" title="2"></a>
<a class="sourceLine" id="cb15-3" title="3">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(age <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(annee, longueur, age) <span class="co"># Lui aussi est un outlier. Impossible d&#39;avoir 1 an/60 cm de long</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">## # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">##   annee longueur   age</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">##   &lt;int&gt;    &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">## 1  1997       60     1</span></a>
<a class="sourceLine" id="cb15-8" title="8">bio[bio<span class="op">$</span>age <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;outlier&quot;</span>] &lt;-<span class="st"> </span>T</a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co"># Pour les vieilles morues, beaucoup de variabilité. Je pense que c&#39;est possible</span></a>
<a class="sourceLine" id="cb15-10" title="10"></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb15-12" title="12">  lab1 &lt;-<span class="st"> &quot;Âge&quot;</span></a>
<a class="sourceLine" id="cb15-13" title="13">  lab2 &lt;-<span class="st"> &quot;Longueur (cm)&quot;</span></a>
<a class="sourceLine" id="cb15-14" title="14">  lab3 &lt;-<span class="st"> &quot;Valeur aberrante&quot;</span></a>
<a class="sourceLine" id="cb15-15" title="15">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb15-16" title="16">  lab1 &lt;-<span class="st"> &quot;Age&quot;</span></a>
<a class="sourceLine" id="cb15-17" title="17">  lab2 &lt;-<span class="st"> &quot;Length (cm)&quot;</span></a>
<a class="sourceLine" id="cb15-18" title="18">  lab3 &lt;-<span class="st"> &quot;Outlier&quot;</span></a>
<a class="sourceLine" id="cb15-19" title="19">}</a>
<a class="sourceLine" id="cb15-20" title="20"></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="co"># Pour la figure, je n&#39;utilise que les données de 1993--2020.</span></a>
<a class="sourceLine" id="cb15-22" title="22"></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="kw">dim</span>(bio) <span class="co"># 85185 obs et 25 var</span></a>
<a class="sourceLine" id="cb15-24" title="24"><span class="co">## [1] 85185    25</span></a>
<a class="sourceLine" id="cb15-25" title="25">temp &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year)</a>
<a class="sourceLine" id="cb15-26" title="26"><span class="kw">dim</span>(temp) <span class="co"># 27386 obs et 25 var</span></a>
<a class="sourceLine" id="cb15-27" title="27"><span class="co">## [1] 27386    25</span></a>
<a class="sourceLine" id="cb15-28" title="28"></a>
<a class="sourceLine" id="cb15-29" title="29">temp<span class="op">$</span>outlier &lt;-<span class="st"> </span><span class="kw">as.character</span>(temp<span class="op">$</span>outlier)</a>
<a class="sourceLine" id="cb15-30" title="30">temp[temp<span class="op">$</span>outlier <span class="op">==</span><span class="st"> &quot;TRUE&quot;</span>, <span class="st">&quot;outlier&quot;</span>] &lt;-<span class="st"> </span>lab3</a>
<a class="sourceLine" id="cb15-31" title="31"></a>
<a class="sourceLine" id="cb15-32" title="32"><span class="kw">range</span>(temp<span class="op">$</span>longueur)</a>
<a class="sourceLine" id="cb15-33" title="33"><span class="co">## [1]  18 148</span></a>
<a class="sourceLine" id="cb15-34" title="34">brks_y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">10</span>, <span class="dt">to =</span> <span class="dv">150</span>, <span class="dt">by =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb15-35" title="35">labs_y &lt;-<span class="st"> </span>brks_y</a>
<a class="sourceLine" id="cb15-36" title="36">labs_y[labs_y <span class="op">%%</span><span class="st"> </span><span class="dv">25</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb15-37" title="37"></a>
<a class="sourceLine" id="cb15-38" title="38">brks_x &lt;-<span class="st"> </span><span class="kw">min</span>(temp<span class="op">$</span>age)<span class="op">:</span><span class="kw">max</span>(temp<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb15-39" title="39">labs_x &lt;-<span class="st"> </span>brks_x</a>
<a class="sourceLine" id="cb15-40" title="40"></a>
<a class="sourceLine" id="cb15-41" title="41"><span class="co"># Nbre de morues âgées</span></a>
<a class="sourceLine" id="cb15-42" title="42">nb &lt;-<span class="st"> </span>temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span>count <span class="op">%&gt;%</span><span class="st"> </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">lab =</span> <span class="kw">format</span>(n, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T))</a>
<a class="sourceLine" id="cb15-43" title="43"></a>
<a class="sourceLine" id="cb15-44" title="44">graph1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> temp, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> longueur, <span class="dt">group =</span> age)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-45" title="45"><span class="st">          </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-46" title="46"><span class="st">          </span><span class="kw">geom_point</span>(<span class="dt">data =</span> temp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> </span>lab3), <span class="kw">aes</span>(<span class="dt">color =</span> outlier)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-47" title="47"><span class="st">          </span><span class="kw">labs</span>(<span class="dt">x =</span> lab1, <span class="dt">y =</span> lab2, <span class="dt">color =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-48" title="48"><span class="st">          </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-49" title="49"><span class="st">          </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb15-50" title="50">                <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-51" title="51"><span class="st">          </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> brks_y, <span class="dt">labels =</span> labs_y) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-52" title="52"><span class="st">          </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> brks_x, <span class="dt">labels =</span> labs_x, <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-53" title="53"><span class="st">          </span><span class="kw">geom_text</span>(<span class="dt">data =</span> nb, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> <span class="op">-</span><span class="ot">Inf</span>, <span class="dt">label =</span> lab, <span class="dt">vjust =</span> <span class="fl">-0.9</span>))</a>
<a class="sourceLine" id="cb15-54" title="54">graph1</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-13-2.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"></a>
<a class="sourceLine" id="cb16-2" title="2">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>T) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 5 outliers pour la période d&#39;intérêt</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">## [1] 5</span></a>
<a class="sourceLine" id="cb16-4" title="4">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> </span>T) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 25 outliers au total</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">## [1] 25</span></a>
<a class="sourceLine" id="cb16-6" title="6"></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="kw">rm</span>(temp)</a></code></pre></div>
</div>
</div>
<div id="observateurs-en-mer" class="section level1">
<h1><span class="header-section-number">5</span> Observateurs en mer</h1>
<p>J’ai des débarquements de morues occasionnés par des crevettiers, mais je n’ai pas de données d’échantillonneurs à quai où des morues ont été mesurées pour cet engin. Je dois donc faire appel aux données d’observateurs en mer.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, engin_fr <span class="op">==</span><span class="st"> &quot;Chalut à crevettes&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">deb =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="st">  </span>ungroup</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">## # A tibble: 28 x 2</span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">##    annee   deb</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">##    &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">##  1  1993 83350</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="co">##  2  1994  4968</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">##  3  1995   169</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">##  4  1996    38</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">##  5  1997  1142</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">##  6  1998    30</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">##  7  1999    88</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">##  8  2000    55</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="co">##  9  2001    10</span></a>
<a class="sourceLine" id="cb17-17" title="17"><span class="co">## 10  2002    10</span></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co">## # ... with 18 more rows</span></a></code></pre></div>
<p>J’ai des débarquements à partir de 1993. Selon <span class="citation">Savard et al. (<a href="#ref-Savard2013_fr" role="doc-biblioref">2013</a>)</span>, la grille séparatrice aurait été obligatoire à l’hiver 1993. Je ne peux donc pas regrouper le chalut à crevette avec les autres chaluts de fond, puisqu’on assume que les morues débarquées seront beaucoup plus petites.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">setdiff</span>(lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique, </a>
<a class="sourceLine" id="cb18-2" title="2">        bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique) </a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">## character(0)</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co"># tous les engins de lf sont dans bio</span></a>
<a class="sourceLine" id="cb18-5" title="5">bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin_fr) <span class="op">%&gt;%</span><span class="st"> </span>unique</a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">##  [1] &quot;Filets maillants calés (ancrés)&quot;                         </span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">##  [2] &quot;Palangres calées&quot;                                        </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">##  [3] &quot;Filets maillants (non spécifiés)&quot;                        </span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">##  [4] &quot;Palangres (non spécifiées)&quot;                              </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">##  [5] &quot;Palangrotte&quot;                                             </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">##  [6] &quot;Filets-pièges fixes non couverts&quot;                        </span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">##  [7] &quot;Hameçons et lignes (non spécifiés)&quot;                      </span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">##  [8] &quot;Chalut de fond à panneaux (arrière)&quot;                     </span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">##  [9] &quot;Pièges (non spécifiés)&quot;                                  </span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">## [10] &quot;Danois/Ecossais/seine Pairée (2 navires)&quot;                </span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co">## [11] &quot;Lignes à main et lignes à cannes (manoeuvrées à la main)&quot;</span></a>
<a class="sourceLine" id="cb18-17" title="17"><span class="co">## [12] &quot;Seine bourse&quot;                                            </span></a>
<a class="sourceLine" id="cb18-18" title="18"><span class="co">## [13] &quot;Chalut pélagique&quot;</span></a></code></pre></div>
<p>Je n’ai aucun débarquement de morues par des chaluttiers à crevette dans les données d’échantillonneurs à quai. Je vais devoir avoir recours aux données des observateurs en mer.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">load</span>(dat_obs_<span class="dv">1990</span>_<span class="dv">1998</span>); <span class="kw">dim</span>(JOP1) <span class="co"># 22550 obs et 44 var. Données fournies par Hugues Benoît via courriel le 9 sept. 2021</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="co">## [1] 22550    44</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="co"># représente les FL des morues capturées par des chaluts à crevette. La période 1990-1998 n&#39;est actuellement pas disponible via la base de données et c&#39;est pourquoi Hugues me fournit une copie qu&#39;il avait sur son ordi personnel.</span></a>
<a class="sourceLine" id="cb19-4" title="4"></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="kw">unique</span>(JOP1<span class="op">$</span>spec) <span class="co"># juste de la morue</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">## [1] 10</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="kw">unique</span>(JOP1<span class="op">$</span>mspec) <span class="co"># visait la crevette nordique</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">## [1] 2210</span></a>
<a class="sourceLine" id="cb19-9" title="9"></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="kw">names</span>(JOP1) &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">names</span>(JOP1), <span class="st">&quot;act_no&quot;</span> =<span class="st"> &quot;no_voy&quot;</span>, <span class="st">&quot;sub_acti&quot;</span> =<span class="st"> &quot;id&quot;</span>, <span class="st">&quot;uarea&quot;</span> =<span class="st"> &quot;opano&quot;</span>,</a>
<a class="sourceLine" id="cb19-11" title="11">                      <span class="st">&quot;fish_len&quot;</span> =<span class="st"> &quot;longueur&quot;</span>, <span class="st">&quot;no_fish&quot;</span> =<span class="st"> &quot;n_mes&quot;</span>, <span class="st">&quot;wt_samp&quot;</span> =<span class="st"> &quot;pds_ech&quot;</span>, <span class="st">&quot;act_date&quot;</span> =<span class="st"> &quot;date&quot;</span>)</a>
<a class="sourceLine" id="cb19-12" title="12"></a>
<a class="sourceLine" id="cb19-13" title="13">JOP1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(no_voy, id, cfvn) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 854 activités de pêche unique</span></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co">## [1] 854</span></a>
<a class="sourceLine" id="cb19-15" title="15">JOP1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 854 activités de pêche unique. capt_no identifie chaque activité de pêche</span></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co">## [1] 854</span></a>
<a class="sourceLine" id="cb19-17" title="17"></a>
<a class="sourceLine" id="cb19-18" title="18">JOP1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-19" title="19"><span class="st">  </span><span class="kw">group_by</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="dt">.vars =</span> <span class="kw">c</span>(<span class="st">&quot;pds_ech&quot;</span>, <span class="st">&quot;wt_kept&quot;</span>, <span class="st">&quot;wt_dscrd&quot;</span>), <span class="dt">.funs =</span> n_distinct) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-21" title="21"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-22" title="22"><span class="st">  </span>summary <span class="co"># problème avec les pds_ech...</span></a>
<a class="sourceLine" id="cb19-23" title="23"><span class="co">##     capt_no           pds_ech         wt_kept     wt_dscrd</span></a>
<a class="sourceLine" id="cb19-24" title="24"><span class="co">##  Min.   :    152   Min.   :1.000   Min.   :1   Min.   :1  </span></a>
<a class="sourceLine" id="cb19-25" title="25"><span class="co">##  1st Qu.:  31151   1st Qu.:1.000   1st Qu.:1   1st Qu.:1  </span></a>
<a class="sourceLine" id="cb19-26" title="26"><span class="co">##  Median :  43600   Median :1.000   Median :1   Median :1  </span></a>
<a class="sourceLine" id="cb19-27" title="27"><span class="co">##  Mean   : 433040   Mean   :1.107   Mean   :1   Mean   :1  </span></a>
<a class="sourceLine" id="cb19-28" title="28"><span class="co">##  3rd Qu.: 367653   3rd Qu.:1.000   3rd Qu.:1   3rd Qu.:1  </span></a>
<a class="sourceLine" id="cb19-29" title="29"><span class="co">##  Max.   :2047813   Max.   :3.000   Max.   :1   Max.   :1</span></a>
<a class="sourceLine" id="cb19-30" title="30"><span class="co"># Pour une même activité, il semble que parfois, des échantillons aient été pris peut-être à différents moments durant la remontée </span></a>
<a class="sourceLine" id="cb19-31" title="31"><span class="co"># de la capture à bord (ex: début, fin)</span></a>
<a class="sourceLine" id="cb19-32" title="32"><span class="co"># Je vais combiner les lignes</span></a>
<a class="sourceLine" id="cb19-33" title="33"></a>
<a class="sourceLine" id="cb19-34" title="34">JOP1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-35" title="35"><span class="st">  </span><span class="kw">group_by</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-36" title="36"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n_distinct</span>(pds_ech)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-37" title="37"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-38" title="38"><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-39" title="39"><span class="st">  </span><span class="kw">pull</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-40" title="40"><span class="st">  </span>unique <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-41" title="41"><span class="st">  </span>length</a>
<a class="sourceLine" id="cb19-42" title="42"><span class="co">## [1] 69</span></a>
<a class="sourceLine" id="cb19-43" title="43"><span class="co"># 69 activités de la sorte</span></a>
<a class="sourceLine" id="cb19-44" title="44"></a>
<a class="sourceLine" id="cb19-45" title="45"><span class="co"># Je vais régler cette problématique. J&#39;en profite pour ne conserver que les variables qui m&#39;intéressent.</span></a>
<a class="sourceLine" id="cb19-46" title="46"><span class="kw">library</span>(lubridate)</a>
<a class="sourceLine" id="cb19-47" title="47"></a>
<a class="sourceLine" id="cb19-48" title="48">a &lt;-<span class="st"> </span>JOP1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-49" title="49"><span class="st">     </span><span class="kw">group_by</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-50" title="50"><span class="st">     </span><span class="kw">summarise</span>(<span class="dt">pds_ech =</span> <span class="kw">sum</span>(<span class="kw">unique</span>(pds_ech), <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb19-51" title="51">               <span class="dt">opano =</span> <span class="kw">unique</span>(opano),</a>
<a class="sourceLine" id="cb19-52" title="52">               <span class="dt">wt_kept =</span> <span class="kw">unique</span>(wt_kept),</a>
<a class="sourceLine" id="cb19-53" title="53">               <span class="dt">wt_dscrd =</span> <span class="kw">unique</span>(wt_dscrd),</a>
<a class="sourceLine" id="cb19-54" title="54">               <span class="dt">pds_capt =</span> wt_kept <span class="op">+</span><span class="st"> </span>wt_dscrd,</a>
<a class="sourceLine" id="cb19-55" title="55">               <span class="dt">date =</span> <span class="kw">ymd</span>(<span class="kw">unique</span>(date)),</a>
<a class="sourceLine" id="cb19-56" title="56">               <span class="dt">annee =</span> <span class="kw">year</span>(date)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-57" title="57"><span class="st">     </span>ungroup</a>
<a class="sourceLine" id="cb19-58" title="58"><span class="kw">dim</span>(a) <span class="co"># 854 obs et 8 var</span></a>
<a class="sourceLine" id="cb19-59" title="59"><span class="co">## [1] 854   8</span></a>
<a class="sourceLine" id="cb19-60" title="60"></a>
<a class="sourceLine" id="cb19-61" title="61">b &lt;-<span class="st"> </span>JOP1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-62" title="62"><span class="st">     </span><span class="kw">group_by</span>(capt_no, longueur) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-63" title="63"><span class="st">     </span><span class="kw">summarise</span>(<span class="dt">n_mes =</span> <span class="kw">sum</span>(n_mes)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-64" title="64"><span class="st">     </span>ungroup</a>
<a class="sourceLine" id="cb19-65" title="65"><span class="kw">dim</span>(b) <span class="co"># 18744 obs et 3 var = moins de lignes que JOP1, car multiples échantillons par capt_no combinés.</span></a>
<a class="sourceLine" id="cb19-66" title="66"><span class="co">## [1] 18744     3</span></a>
<a class="sourceLine" id="cb19-67" title="67"></a>
<a class="sourceLine" id="cb19-68" title="68">ajout_lf &lt;-<span class="st"> </span><span class="kw">full_join</span>(a, b, <span class="dt">by =</span> <span class="st">&quot;capt_no&quot;</span>); <span class="kw">dim</span>(ajout_lf) <span class="co"># 18744 obs et 10 var</span></a>
<a class="sourceLine" id="cb19-69" title="69"><span class="co">## [1] 18744    10</span></a>
<a class="sourceLine" id="cb19-70" title="70">ajout_lf</a>
<a class="sourceLine" id="cb19-71" title="71"><span class="co">## # A tibble: 18,744 x 10</span></a>
<a class="sourceLine" id="cb19-72" title="72"><span class="co">##    capt_no pds_ech opano wt_kept wt_dscrd pds_capt date       annee longueur</span></a>
<a class="sourceLine" id="cb19-73" title="73"><span class="co">##      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-74" title="74"><span class="co">##  1     152     1.5 4Si        35       75      110 1991-04-19  1991       18</span></a>
<a class="sourceLine" id="cb19-75" title="75"><span class="co">##  2     152     1.5 4Si        35       75      110 1991-04-19  1991       19</span></a>
<a class="sourceLine" id="cb19-76" title="76"><span class="co">##  3     152     1.5 4Si        35       75      110 1991-04-19  1991       20</span></a>
<a class="sourceLine" id="cb19-77" title="77"><span class="co">##  4     152     1.5 4Si        35       75      110 1991-04-19  1991       21</span></a>
<a class="sourceLine" id="cb19-78" title="78"><span class="co">##  5     152     1.5 4Si        35       75      110 1991-04-19  1991       22</span></a>
<a class="sourceLine" id="cb19-79" title="79"><span class="co">##  6     152     1.5 4Si        35       75      110 1991-04-19  1991       23</span></a>
<a class="sourceLine" id="cb19-80" title="80"><span class="co">##  7     152     1.5 4Si        35       75      110 1991-04-19  1991       24</span></a>
<a class="sourceLine" id="cb19-81" title="81"><span class="co">##  8     152     1.5 4Si        35       75      110 1991-04-19  1991       25</span></a>
<a class="sourceLine" id="cb19-82" title="82"><span class="co">##  9     152     1.5 4Si        35       75      110 1991-04-19  1991       26</span></a>
<a class="sourceLine" id="cb19-83" title="83"><span class="co">## 10     152     1.5 4Si        35       75      110 1991-04-19  1991       27</span></a>
<a class="sourceLine" id="cb19-84" title="84"><span class="co">## # ... with 18,734 more rows, and 1 more variable: n_mes &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-85" title="85"><span class="kw">rm</span>(a,b)</a>
<a class="sourceLine" id="cb19-86" title="86"></a>
<a class="sourceLine" id="cb19-87" title="87">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(ajout_lf, pds_ech <span class="op">&gt;</span><span class="st"> </span>pds_capt)); <span class="kw">length</span>(cor) <span class="co"># 1466 lignes</span></a>
<a class="sourceLine" id="cb19-88" title="88"><span class="co">## [1] 1466</span></a>
<a class="sourceLine" id="cb19-89" title="89">ids &lt;-<span class="st"> </span>ajout_lf[cor, ] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span>unique</a>
<a class="sourceLine" id="cb19-90" title="90"><span class="kw">length</span>(ids)</a>
<a class="sourceLine" id="cb19-91" title="91"><span class="co">## [1] 41</span></a>
<a class="sourceLine" id="cb19-92" title="92"><span class="co"># Je n&#39;utiliserai pas ces activités (41), puisque le poids de l&#39;échantillon ne peut être &gt; que celui de capture</span></a>
<a class="sourceLine" id="cb19-93" title="93"></a>
<a class="sourceLine" id="cb19-94" title="94"><span class="kw">table</span>(ajout_lf<span class="op">$</span>annee, <span class="dt">useNA =</span> <span class="st">&quot;always&quot;</span>)</a>
<a class="sourceLine" id="cb19-95" title="95"><span class="co">## </span></a>
<a class="sourceLine" id="cb19-96" title="96"><span class="co">##  1990  1991  1992  1993  1994  1996  1997  1998  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb19-97" title="97"><span class="co">##   935  2695 13413   843   196    13   366   283     0</span></a>
<a class="sourceLine" id="cb19-98" title="98"></a>
<a class="sourceLine" id="cb19-99" title="99"><span class="kw">dim</span>(ajout_lf) <span class="co"># 18744 obs et 10 var</span></a>
<a class="sourceLine" id="cb19-100" title="100"><span class="co">## [1] 18744    10</span></a>
<a class="sourceLine" id="cb19-101" title="101">ajout_lf &lt;-<span class="st"> </span>ajout_lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-102" title="102"><span class="st">            </span><span class="kw">filter</span>(<span class="op">!</span>(capt_no <span class="op">%in%</span><span class="st"> </span>ids)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-103" title="103"><span class="st">            </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="co"># je ne garde que les donneées dans les années d&#39;intérêt</span></a>
<a class="sourceLine" id="cb19-104" title="104"><span class="kw">dim</span>(ajout_lf) <span class="co"># 1701 obs et 10 var. On perd bcp de lignes (le gros des données était de 1990:1992)</span></a>
<a class="sourceLine" id="cb19-105" title="105"><span class="co">## [1] 1701   10</span></a>
<a class="sourceLine" id="cb19-106" title="106"></a>
<a class="sourceLine" id="cb19-107" title="107">ajout_lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-108" title="108"><span class="st">  </span><span class="kw">group_by</span>(capt_no) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-109" title="109"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="dt">.vars =</span> <span class="kw">c</span>(<span class="st">&quot;pds_ech&quot;</span>, <span class="st">&quot;pds_capt&quot;</span>), <span class="dt">.funs =</span> unique) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-110" title="110"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-111" title="111"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ., <span class="kw">aes</span>(<span class="dt">x =</span> pds_capt, <span class="dt">y =</span> pds_ech)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-112" title="112"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-113" title="113"><span class="st">  </span><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="dv">0</span>, <span class="dt">slope =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-16-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># La majeure partie du temps, toute la capture est échantillonnée</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="kw">range</span>(ajout_lf<span class="op">$</span>date) <span class="co"># du 18 avril 1993 au 3 sept 1998</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">## [1] &quot;1993-04-18&quot; &quot;1998-09-03&quot;</span></a>
<a class="sourceLine" id="cb20-5" title="5"></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="kw">unique</span>(ajout_lf<span class="op">$</span>longueur) <span class="co"># au cm près = parfait</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">##  [1] 13 15 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">## [26] 41 42 43 46 47 50 40 45 48 49 16 44 55 61 62 52 51 54 56 59 60 82 53 58 57</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">## [51] 63 65 14 10 11 12 64 84 85 86 87 88 89 90 91 92 93 94 95 66</span></a></code></pre></div>
<p>Maintenant avec les données post-1998.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">load</span>(dat_obs_<span class="dv">1999</span>); <span class="kw">str</span>(obs) <span class="co"># liste avec 2 jeux de données</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co">## List of 2</span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co">##  $ catch: tibble [440,207 x 26] (S3: tbl_df/tbl/data.frame)</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="co">##   ..$ no_voy  : chr [1:440207] &quot;J16-0563&quot; &quot;A17-0081&quot; &quot;A17-0082&quot; &quot;J01-0081B&quot; ...</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="co">##   ..$ no_affec: chr [1:440207] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">##   ..$ no_sorti: chr [1:440207] &quot;01&quot; &quot;01&quot; &quot;01&quot; &quot;01&quot; ...</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">##   ..$ trait   : int [1:440207] 1 5 3 63 46 64 63 65 67 68 ...</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="co">##   ..$ nbpc    : int [1:440207] 3 4 4 7 7 7 9 9 9 9 ...</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="co">##   ..$ engin   : chr [1:440207] &quot;OTB2&quot; &quot;OTB2&quot; &quot;OTB2&quot; &quot;OTB2&quot; ...</span></a>
<a class="sourceLine" id="cb21-10" title="10"><span class="co">##   ..$ larg_eng: num [1:440207] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="co">##   ..$ div_nafo: chr [1:440207] &quot;5Zj&quot; &quot;5Zj&quot; &quot;5Zj&quot; &quot;4Wl&quot; ...</span></a>
<a class="sourceLine" id="cb21-12" title="12"><span class="co">##   ..$ zone    : chr [1:440207] NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="co">##   ..$ lat_deb : num [1:440207] 42.1 42.1 42.1 42.9 43.2 ...</span></a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co">##   ..$ long_deb: num [1:440207] -67 -67 -67.1 -62.4 -61.4 ...</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="co">##   ..$ quadril : chr [1:440207] NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-16" title="16"><span class="co">##   ..$ lat_fin : num [1:440207] NA 42 42.1 43 43.1 ...</span></a>
<a class="sourceLine" id="cb21-17" title="17"><span class="co">##   ..$ long_fin: num [1:440207] NA -66.9 -66.9 -62.2 -61.5 ...</span></a>
<a class="sourceLine" id="cb21-18" title="18"><span class="co">##   ..$ prof    : num [1:440207] 84 84 65 250 160 230 140 144 142 140 ...</span></a>
<a class="sourceLine" id="cb21-19" title="19"><span class="co">##   ..$ hr_deb  : num [1:440207] 14.5 10.7 11 7 13.3 ...</span></a>
<a class="sourceLine" id="cb21-20" title="20"><span class="co">##   ..$ duree   : num [1:440207] 3.25 4.18 4.38 1.5 4.67 ...</span></a>
<a class="sourceLine" id="cb21-21" title="21"><span class="co">##   ..$ vitesse : num [1:440207] 3.3 3.5 3.8 3.2 3.5 3.5 3 3 3 3 ...</span></a>
<a class="sourceLine" id="cb21-22" title="22"><span class="co">##   ..$ esp_vis : int [1:440207] 11 11 11 14 14 14 14 14 14 14 ...</span></a>
<a class="sourceLine" id="cb21-23" title="23"><span class="co">##   ..$ esp_capt: int [1:440207] 70 70 70 70 70 70 70 70 70 70 ...</span></a>
<a class="sourceLine" id="cb21-24" title="24"><span class="co">##   ..$ pdv_cons: num [1:440207] 0 0 0 1 3 2 5 6 5 10 ...</span></a>
<a class="sourceLine" id="cb21-25" title="25"><span class="co">##   ..$ pdv_rej : num [1:440207] 4 3 1 0 0 0 0 0 0 0 ...</span></a>
<a class="sourceLine" id="cb21-26" title="26"><span class="co">##   ..$ cod_bris: int [1:440207] 1 1 1 1 6 1 6 1 1 1 ...</span></a>
<a class="sourceLine" id="cb21-27" title="27"><span class="co">##   ..$ l_trait : logi [1:440207] NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-28" title="28"><span class="co">##   ..$ date    : Date[1:440207], format: &quot;2016-09-22&quot; &quot;2017-10-23&quot; ...</span></a>
<a class="sourceLine" id="cb21-29" title="29"><span class="co">##   ..$ annee   : num [1:440207] 2016 2017 2017 2001 2001 ...</span></a>
<a class="sourceLine" id="cb21-30" title="30"><span class="co">##  $ fl   : tibble [674,668 x 16] (S3: tbl_df/tbl/data.frame)</span></a>
<a class="sourceLine" id="cb21-31" title="31"><span class="co">##   ..$ no_voy  : chr [1:674668] &quot;EC06Z1-62&quot; &quot;EC06Z1-62&quot; &quot;EC06Z1-66&quot; &quot;EC06Z1-66&quot; ...</span></a>
<a class="sourceLine" id="cb21-32" title="32"><span class="co">##   ..$ no_affec: chr [1:674668] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ...</span></a>
<a class="sourceLine" id="cb21-33" title="33"><span class="co">##   ..$ no_sorti: chr [1:674668] &quot;01&quot; &quot;01&quot; &quot;01&quot; &quot;01&quot; ...</span></a>
<a class="sourceLine" id="cb21-34" title="34"><span class="co">##   ..$ trait   : int [1:674668] 40 45 8 20 20 20 20 13 64 64 ...</span></a>
<a class="sourceLine" id="cb21-35" title="35"><span class="co">##   ..$ espece  : int [1:674668] 70 70 70 70 70 70 70 70 70 70 ...</span></a>
<a class="sourceLine" id="cb21-36" title="36"><span class="co">##   ..$ pds_capt: num [1:674668] 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb21-37" title="37"><span class="co">##   ..$ pds_ech : num [1:674668] 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb21-38" title="38"><span class="co">##   ..$ grp_mes : int [1:674668] 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb21-39" title="39"><span class="co">##   ..$ typ_mes : int [1:674668] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-40" title="40"><span class="co">##   ..$ sexe    : chr [1:674668] &quot;M&quot; &quot;I&quot; &quot;M&quot; &quot;I&quot; ...</span></a>
<a class="sourceLine" id="cb21-41" title="41"><span class="co">##   ..$ longueur: num [1:674668] 34 79 34 24 29 30 34 20 33 37 ...</span></a>
<a class="sourceLine" id="cb21-42" title="42"><span class="co">##   ..$ nb_pois : int [1:674668] 1 1 1 1 1 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb21-43" title="43"><span class="co">##   ..$ taille  : num [1:674668] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-44" title="44"><span class="co">##   ..$ nb_vif  : int [1:674668] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-45" title="45"><span class="co">##   ..$ nb_mort : int [1:674668] NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb21-46" title="46"><span class="co">##   ..$ test    : chr [1:674668] &quot;test&quot; &quot;test&quot; &quot;test&quot; &quot;test&quot; ...</span></a>
<a class="sourceLine" id="cb21-47" title="47"></a>
<a class="sourceLine" id="cb21-48" title="48"><span class="co"># Données de captures</span></a>
<a class="sourceLine" id="cb21-49" title="49">a &lt;-<span class="st"> </span>obs<span class="op">$</span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-50" title="50"><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">opano =</span> div_nafo,</a>
<a class="sourceLine" id="cb21-51" title="51">            <span class="dt">pds_capt =</span> pdv_cons <span class="op">+</span><span class="st"> </span>pdv_rej) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-52" title="52"><span class="st">     </span><span class="kw">filter</span>(esp_vis <span class="op">==</span><span class="st"> </span><span class="dv">2211</span>, esp_capt <span class="op">==</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># visant la crevette nordique et ayant débarqué de la morue franche</span></a>
<a class="sourceLine" id="cb21-53" title="53"><span class="st">     </span><span class="kw">select</span>(no_voy, no_affec, no_sorti, trait, opano, date, annee, pds_capt)</a>
<a class="sourceLine" id="cb21-54" title="54"><span class="kw">dim</span>(a) <span class="co"># 5522 obs et 8 var</span></a>
<a class="sourceLine" id="cb21-55" title="55"><span class="co">## [1] 5522    8</span></a>
<a class="sourceLine" id="cb21-56" title="56">a <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(no_voy, no_affec, no_sorti, trait) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># ok. 1 ligne par trait de pêche</span></a>
<a class="sourceLine" id="cb21-57" title="57"><span class="co">## [1] 5522</span></a>
<a class="sourceLine" id="cb21-58" title="58"><span class="co"># no_voy, no_affec, no_sorti, trait sont les variables à utiliser pour la clé pour identifier une activité de pêche.</span></a>
<a class="sourceLine" id="cb21-59" title="59"><span class="kw">range</span>(a<span class="op">$</span>date) <span class="co"># du 2 avril 1999 au 19 sept 2020</span></a>
<a class="sourceLine" id="cb21-60" title="60"><span class="co">## [1] &quot;1999-04-02&quot; &quot;2020-09-19&quot;</span></a>
<a class="sourceLine" id="cb21-61" title="61"></a>
<a class="sourceLine" id="cb21-62" title="62"><span class="co"># Données de LF</span></a>
<a class="sourceLine" id="cb21-63" title="63">b &lt;-<span class="st"> </span>obs<span class="op">$</span>fl <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-64" title="64"><span class="st">     </span><span class="kw">filter</span>(espece <span class="op">==</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># juste la morue</span></a>
<a class="sourceLine" id="cb21-65" title="65"><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">longueur =</span> <span class="kw">round</span>(longueur, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># pour avoir des valeurs au cm près </span></a>
<a class="sourceLine" id="cb21-66" title="66"><span class="st">     </span><span class="kw">group_by</span>(no_voy, no_affec, no_sorti, trait, longueur) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-67" title="67"><span class="st">     </span><span class="kw">summarise</span>(<span class="dt">n_mes =</span> <span class="kw">sum</span>(nb_pois)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-68" title="68"><span class="st">     </span>ungroup</a>
<a class="sourceLine" id="cb21-69" title="69"><span class="kw">dim</span>(b) <span class="co"># 142199 obs et 6 var</span></a>
<a class="sourceLine" id="cb21-70" title="70"><span class="co">## [1] 142199      6</span></a>
<a class="sourceLine" id="cb21-71" title="71"></a>
<a class="sourceLine" id="cb21-72" title="72">d &lt;-<span class="st"> </span>obs<span class="op">$</span>fl <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-73" title="73"><span class="st">     </span><span class="kw">filter</span>(espece <span class="op">==</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-74" title="74"><span class="st">     </span><span class="kw">group_by</span>(no_voy, no_affec, no_sorti, trait) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-75" title="75"><span class="st">     </span><span class="kw">summarise</span>(<span class="dt">pds_ech =</span> <span class="kw">sum</span>(<span class="kw">unique</span>(pds_ech))) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># peut y avoir plus d&#39;un échantillon par activité de pêche (ex: début/fin)</span></a>
<a class="sourceLine" id="cb21-76" title="76"><span class="st">     </span>ungroup</a>
<a class="sourceLine" id="cb21-77" title="77"><span class="kw">dim</span>(d) <span class="co"># 8738 obs et 6 var</span></a>
<a class="sourceLine" id="cb21-78" title="78"><span class="co">## [1] 8738    5</span></a>
<a class="sourceLine" id="cb21-79" title="79">obs<span class="op">$</span>fl <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(espece <span class="op">==</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(no_voy, no_affec, no_sorti, trait) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 8738</span></a>
<a class="sourceLine" id="cb21-80" title="80"><span class="co">## [1] 8738</span></a>
<a class="sourceLine" id="cb21-81" title="81"></a>
<a class="sourceLine" id="cb21-82" title="82">b &lt;-<span class="st"> </span><span class="kw">full_join</span>(b, d, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;no_voy&quot;</span>, <span class="st">&quot;no_affec&quot;</span>, <span class="st">&quot;no_sorti&quot;</span>, <span class="st">&quot;trait&quot;</span>))</a>
<a class="sourceLine" id="cb21-83" title="83"><span class="kw">dim</span>(b) <span class="co"># 142199 obs et 7 var</span></a>
<a class="sourceLine" id="cb21-84" title="84"><span class="co">## [1] 142199      7</span></a>
<a class="sourceLine" id="cb21-85" title="85"></a>
<a class="sourceLine" id="cb21-86" title="86"><span class="co"># Combinaison</span></a>
<a class="sourceLine" id="cb21-87" title="87"><span class="kw">dim</span>(b) <span class="co"># 142199 obs et 7 var</span></a>
<a class="sourceLine" id="cb21-88" title="88"><span class="co">## [1] 142199      7</span></a>
<a class="sourceLine" id="cb21-89" title="89">ajout_lf2 &lt;-<span class="st"> </span><span class="kw">left_join</span>(b, a, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;no_voy&quot;</span>, <span class="st">&quot;no_affec&quot;</span>, <span class="st">&quot;no_sorti&quot;</span>, <span class="st">&quot;trait&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-90" title="90"><span class="st">             </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(date)) <span class="co"># les lignes où date est NA sont des lignes où l&#39;appariement n&#39;a pas fonctionné</span></a>
<a class="sourceLine" id="cb21-91" title="91"><span class="kw">dim</span>(ajout_lf2) <span class="co"># 8110 obs et 11 var</span></a>
<a class="sourceLine" id="cb21-92" title="92"><span class="co">## [1] 8110   11</span></a>
<a class="sourceLine" id="cb21-93" title="93"><span class="kw">rm</span>(a,b,d)</a>
<a class="sourceLine" id="cb21-94" title="94"><span class="kw">range</span>(ajout_lf2<span class="op">$</span>date) <span class="co"># du 2 avril 1999 au 19 sept 2020</span></a>
<a class="sourceLine" id="cb21-95" title="95"><span class="co">## [1] &quot;1999-04-02&quot; &quot;2020-09-19&quot;</span></a>
<a class="sourceLine" id="cb21-96" title="96"></a>
<a class="sourceLine" id="cb21-97" title="97">ajout_lf2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-98" title="98"><span class="st">  </span><span class="kw">group_by</span>(no_voy, no_affec, no_sorti, trait) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-99" title="99"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="dt">.vars =</span> <span class="kw">c</span>(<span class="st">&quot;pds_ech&quot;</span>, <span class="st">&quot;pds_capt&quot;</span>), <span class="dt">.funs =</span> unique) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-100" title="100"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb21-101" title="101"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ., <span class="kw">aes</span>(<span class="dt">x =</span> pds_capt, <span class="dt">y =</span> pds_ech)) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-102" title="102"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">alpha =</span> <span class="fl">0.7</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-103" title="103"><span class="st">  </span><span class="kw">geom_abline</span>(<span class="dt">intercept =</span> <span class="dv">0</span>, <span class="dt">slope =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">linetype =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-17-1.png" width="864" style="display: block; margin: auto;" /> Pour chaque activité de pêche, je vais leur assigner un id unique (<em>ech_id</em>).</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">val_max &lt;-<span class="st"> </span><span class="kw">max</span>(lf<span class="op">$</span>ech_id); val_max <span class="co"># 65965</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="co">## [1] 65965</span></a>
<a class="sourceLine" id="cb22-3" title="3"></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co"># Données 1990-1998</span></a>
<a class="sourceLine" id="cb22-5" title="5">cle &lt;-<span class="st"> &quot;capt_no&quot;</span></a>
<a class="sourceLine" id="cb22-6" title="6">echs &lt;-<span class="st"> </span>ajout_lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct_at</span>(cle) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ech_id =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ech_id =</span> ech_id <span class="op">+</span><span class="st"> </span>val_max)</a>
<a class="sourceLine" id="cb22-7" title="7"><span class="kw">dim</span>(ajout_lf) <span class="co"># 1701 obs et 10 var</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co">## [1] 1701   10</span></a>
<a class="sourceLine" id="cb22-9" title="9">ajout_lf &lt;-<span class="st"> </span><span class="kw">left_join</span>(ajout_lf, echs, <span class="dt">by =</span> cle)</a>
<a class="sourceLine" id="cb22-10" title="10"><span class="kw">dim</span>(ajout_lf) <span class="co"># 1701 obs et 11 var</span></a>
<a class="sourceLine" id="cb22-11" title="11"><span class="co">## [1] 1701   11</span></a>
<a class="sourceLine" id="cb22-12" title="12"></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="co"># Données 1999-maintenant</span></a>
<a class="sourceLine" id="cb22-14" title="14">val_max &lt;-<span class="st"> </span><span class="kw">max</span>(ajout_lf<span class="op">$</span>ech_id); val_max <span class="co"># 66116</span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="co">## [1] 66116</span></a>
<a class="sourceLine" id="cb22-16" title="16">cle &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;no_voy&quot;</span>, <span class="st">&quot;no_affec&quot;</span>, <span class="st">&quot;no_sorti&quot;</span>, <span class="st">&quot;trait&quot;</span>)</a>
<a class="sourceLine" id="cb22-17" title="17">echs &lt;-<span class="st"> </span>ajout_lf2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct_at</span>(cle) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ech_id =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ech_id =</span> ech_id <span class="op">+</span><span class="st"> </span>val_max)</a>
<a class="sourceLine" id="cb22-18" title="18"><span class="kw">dim</span>(ajout_lf2) <span class="co"># 8110 obs et 11 var</span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="co">## [1] 8110   11</span></a>
<a class="sourceLine" id="cb22-20" title="20">ajout_lf2 &lt;-<span class="st"> </span><span class="kw">left_join</span>(ajout_lf2, echs, <span class="dt">by =</span> cle)</a>
<a class="sourceLine" id="cb22-21" title="21"><span class="kw">dim</span>(ajout_lf2) <span class="co"># 8110 obs et 12 var</span></a>
<a class="sourceLine" id="cb22-22" title="22"><span class="co">## [1] 8110   12</span></a>
<a class="sourceLine" id="cb22-23" title="23"><span class="kw">rm</span>(echs, cle, val_max)</a></code></pre></div>
<p>Combinaison</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">ajout_lf &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout_lf, ajout_lf2) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">            </span><span class="kw">mutate</span>(<span class="dt">engin =</span> <span class="st">&quot;ST&quot;</span>,</a>
<a class="sourceLine" id="cb23-3" title="3">                   <span class="dt">engin_fr =</span> <span class="st">&quot;Chalut à crevette&quot;</span>,</a>
<a class="sourceLine" id="cb23-4" title="4">                   <span class="dt">engin_en =</span> <span class="st">&quot;Shrimp trawl&quot;</span>,</a>
<a class="sourceLine" id="cb23-5" title="5">                   <span class="dt">source =</span> <span class="st">&quot;observateur&quot;</span>, <span class="co"># pour laisser une trace de la provenance de ces données</span></a>
<a class="sourceLine" id="cb23-6" title="6">                   <span class="dt">mois =</span> <span class="kw">month</span>(date)) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="st">            </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;3Pn|4R|4S&quot;</span>, opano)) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># juste les données de 3Pn4RS désirées</span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="st">            </span><span class="kw">select</span>(ech_id, annee, opano, mois, date, engin, engin_fr, engin_en, source, longueur, n_mes, pds_ech)</a>
<a class="sourceLine" id="cb23-9" title="9"><span class="kw">dim</span>(ajout_lf) <span class="co"># 7640 obs et 12 var</span></a>
<a class="sourceLine" id="cb23-10" title="10"><span class="co">## [1] 7640   12</span></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="kw">n_distinct</span>(ajout_lf<span class="op">$</span>ech_id) <span class="co"># 1546 échantillons</span></a>
<a class="sourceLine" id="cb23-12" title="12"><span class="co">## [1] 1546</span></a></code></pre></div>
<p>Vérification des outliers de longueur.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">ajout_lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(longueur) <span class="op">%&gt;%</span><span class="st"> </span>count <span class="op">%&gt;%</span><span class="st"> </span>ungroup <span class="co"># ok</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co">## # A tibble: 78 x 2</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co">##    longueur     n</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">##       &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co">##  1        4     2</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">##  2        5     1</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">##  3        6     6</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">##  4        7     6</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">##  5        8    27</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">##  6        9    57</span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">##  7       10   118</span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">##  8       11   160</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="co">##  9       12   186</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="co">## 10       13   224</span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="co">## # ... with 68 more rows</span></a>
<a class="sourceLine" id="cb24-16" title="16"></a>
<a class="sourceLine" id="cb24-17" title="17">test &lt;-<span class="st"> </span>ajout_lf</a>
<a class="sourceLine" id="cb24-18" title="18"><span class="kw">range</span>(ajout_lf<span class="op">$</span>longueur)</a>
<a class="sourceLine" id="cb24-19" title="19"><span class="co">## [1]   4 121</span></a>
<a class="sourceLine" id="cb24-20" title="20"></a>
<a class="sourceLine" id="cb24-21" title="21">bin &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb24-22" title="22">brks &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">125</span>, <span class="dt">by =</span> bin); brks</a>
<a class="sourceLine" id="cb24-23" title="23"><span class="co">##  [1]   0   5  10  15  20  25  30  35  40  45  50  55  60  65  70  75  80  85  90</span></a>
<a class="sourceLine" id="cb24-24" title="24"><span class="co">## [20]  95 100 105 110 115 120 125</span></a>
<a class="sourceLine" id="cb24-25" title="25"></a>
<a class="sourceLine" id="cb24-26" title="26">test<span class="op">$</span>cl &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co"># vide initialement</span></a>
<a class="sourceLine" id="cb24-27" title="27"><span class="cf">for</span> (i <span class="cf">in</span> brks){</a>
<a class="sourceLine" id="cb24-28" title="28">  cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(test, longueur <span class="op">&gt;=</span><span class="st"> </span>i <span class="op">&amp;</span><span class="st"> </span>longueur <span class="op">&lt;</span><span class="st"> </span>(i <span class="op">+</span><span class="st"> </span>bin)))</a>
<a class="sourceLine" id="cb24-29" title="29">  test<span class="op">$</span>cl[cor] &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span>(bin <span class="op">/</span><span class="st"> </span><span class="dv">2</span>) <span class="co"># pour être au milieu de la bin</span></a>
<a class="sourceLine" id="cb24-30" title="30">  <span class="kw">rm</span>(cor)</a>
<a class="sourceLine" id="cb24-31" title="31">}</a>
<a class="sourceLine" id="cb24-32" title="32"></a>
<a class="sourceLine" id="cb24-33" title="33">test <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-34" title="34"><span class="st">  </span><span class="kw">group_by</span>(cl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-35" title="35"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n_mes =</span> <span class="kw">sum</span>(n_mes)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-36" title="36"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-37" title="37"><span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ., <span class="kw">aes</span>(<span class="dt">x =</span> cl, <span class="dt">y =</span> n_mes)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-38" title="38"><span class="st">  </span><span class="kw">geom_line</span>()</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-20-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># parfait</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">rm</span>(test)</a>
<a class="sourceLine" id="cb25-3" title="3"></a>
<a class="sourceLine" id="cb25-4" title="4">ajout_lf<span class="op">$</span>outlier &lt;-<span class="st"> </span>F <span class="co"># par défaut</span></a></code></pre></div>
<p>Je peux maintenant ajouter à <code>lf</code> ces 2 jeux de données.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">lf &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;quai&quot;</span>), ajout_lf)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">dim</span>(lf) <span class="co"># 137136 obs et 38 var</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co">## [1] 137136     38</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="kw">rm</span>(ajout_lf, ajout_lf2, JOP1)</a></code></pre></div>
</div>
<div id="relevé-multispécifique-du-ngsl" class="section level1">
<h1><span class="header-section-number">6</span> Relevé multispécifique du nGSL</h1>
<p>Bien que les observateurs en mer récoltent des otolithes, je n’ai pas de données d’âge associées à ce programme pour utiliser dans les analyses. Après discussion avec Hugues, on en est venu à la conclusion qu’il était approprié d’utiliser les données d’âge du relevé multispécifique du nGSL.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">load</span>(intrant_ngsl) <span class="co"># ouvre ngsl</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="co"># Je vais prendre toutes les morues disponibles, en autant que des valeurs d&#39;âge/longueur sont présentes</span></a>
<a class="sourceLine" id="cb27-3" title="3"></a>
<a class="sourceLine" id="cb27-4" title="4">dat &lt;-<span class="st"> </span>ngsl<span class="op">$</span>carbio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="st">       </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(age), <span class="op">!</span><span class="kw">is.na</span>(longueur)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">longueur =</span> <span class="kw">round</span>(longueur<span class="op">/</span><span class="dv">10</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en cm, arrondi à l&#39;entier</span></a>
<a class="sourceLine" id="cb27-7" title="7"><span class="st">       </span><span class="kw">select</span>(nav, rel, trait, longueur, age) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-8" title="8"><span class="st">       </span><span class="kw">left_join</span>(., ngsl<span class="op">$</span>set <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(nav, rel, trait, annee, opano), <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;nav&quot;</span>, <span class="st">&quot;rel&quot;</span>, <span class="st">&quot;trait&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb27-9" title="9"><span class="st">       </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, opano <span class="op">%in%</span><span class="st"> </span>opanos) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># juste 3Pn4RS</span></a>
<a class="sourceLine" id="cb27-10" title="10"><span class="st">       </span><span class="kw">select</span>(annee, longueur, age)</a>
<a class="sourceLine" id="cb27-11" title="11"><span class="kw">dim</span>(dat) <span class="co"># 19915 obs et 3 var</span></a>
<a class="sourceLine" id="cb27-12" title="12"><span class="co">## [1] 19915     3</span></a></code></pre></div>
<p>Pour chaque cellule de catch où l’engin est le chalut à crevettes, je vais me créer un échantillon bidon où j’utiliserai les données annuelles du relevé nGSL.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">ajout_bio &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="st">             </span><span class="kw">mutate</span>(<span class="dt">mois =</span> <span class="dv">8</span>, <span class="co"># le relevé nGSL est essentiellement au août</span></a>
<a class="sourceLine" id="cb28-3" title="3">                    <span class="dt">engin =</span> <span class="st">&quot;ST&quot;</span>,</a>
<a class="sourceLine" id="cb28-4" title="4">                    <span class="dt">engin_fr =</span> <span class="st">&quot;Chalut à crevette&quot;</span>,</a>
<a class="sourceLine" id="cb28-5" title="5">                    <span class="dt">engin_en =</span> <span class="st">&quot;Shrimp trawl&quot;</span>,</a>
<a class="sourceLine" id="cb28-6" title="6">                    <span class="dt">source =</span> <span class="st">&quot;nGSL&quot;</span>)</a>
<a class="sourceLine" id="cb28-7" title="7"><span class="kw">dim</span>(ajout_bio) <span class="co"># 19915 obs et 8 var</span></a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">## [1] 19915     8</span></a>
<a class="sourceLine" id="cb28-9" title="9"></a>
<a class="sourceLine" id="cb28-10" title="10">val_max &lt;-<span class="st"> </span><span class="kw">max</span>(bio<span class="op">$</span>ech_id); val_max <span class="co"># 65965</span></a>
<a class="sourceLine" id="cb28-11" title="11"><span class="co">## [1] 65965</span></a>
<a class="sourceLine" id="cb28-12" title="12">ids &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">annee =</span> my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ech_id =</span> id <span class="op">+</span><span class="st"> </span>val_max)</a>
<a class="sourceLine" id="cb28-13" title="13"></a>
<a class="sourceLine" id="cb28-14" title="14"><span class="kw">dim</span>(ajout_bio) <span class="co"># 19915 obs et 8 var</span></a>
<a class="sourceLine" id="cb28-15" title="15"><span class="co">## [1] 19915     8</span></a>
<a class="sourceLine" id="cb28-16" title="16">ajout_bio &lt;-<span class="st"> </span><span class="kw">left_join</span>(ajout_bio, ids <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(annee, ech_id), <span class="dt">by =</span> <span class="st">&quot;annee&quot;</span>)</a>
<a class="sourceLine" id="cb28-17" title="17"><span class="kw">dim</span>(ajout_bio) <span class="co"># 19915 obs et 9 var</span></a>
<a class="sourceLine" id="cb28-18" title="18"><span class="co">## [1] 19915     9</span></a>
<a class="sourceLine" id="cb28-19" title="19"><span class="kw">rm</span>(val_max, ids, ngsl, dat)</a></code></pre></div>
<p>Je valide ensuite les âges.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">ajout_bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span>count <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span>() <span class="co"># pas de valeurs absurdes à 1ère vue. 1 seule valeur 1 an</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co">##    age    n</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co">## 1    0   72</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="co">## 2    1 1516</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co">## 3    2 3239</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co">## 4    3 3616</span></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="co">## 5    4 3436</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">## 6    5 2497</span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="co">## 7    6 2192</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co">## 8    7 1527</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="co">## 9    8  887</span></a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co">## 10   9  500</span></a>
<a class="sourceLine" id="cb29-13" title="13"><span class="co">## 11  10  253</span></a>
<a class="sourceLine" id="cb29-14" title="14"><span class="co">## 12  11  103</span></a>
<a class="sourceLine" id="cb29-15" title="15"><span class="co">## 13  12   51</span></a>
<a class="sourceLine" id="cb29-16" title="16"><span class="co">## 14  13   18</span></a>
<a class="sourceLine" id="cb29-17" title="17"><span class="co">## 15  14    5</span></a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co">## 16  15    1</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="co">## 17  16    2</span></a>
<a class="sourceLine" id="cb29-20" title="20"></a>
<a class="sourceLine" id="cb29-21" title="21"><span class="co"># Relation âge-longueur</span></a>
<a class="sourceLine" id="cb29-22" title="22">ajout_bio &lt;-<span class="st"> </span>ajout_bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(age) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">outlier =</span> <span class="kw">outlier</span>(longueur, <span class="dt">coef =</span> <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span>ungroup</a>
<a class="sourceLine" id="cb29-23" title="23"><span class="co"># Les valeurs étant au-dessus du 75e percentile ou en-dessous du 25e percentile par un facteur de 3 fois l&#39;étendue interquartile </span></a>
<a class="sourceLine" id="cb29-24" title="24"><span class="co"># sont jugées êtres des outliers.</span></a>
<a class="sourceLine" id="cb29-25" title="25"></a>
<a class="sourceLine" id="cb29-26" title="26">ajout_bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> </span>T) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(annee, longueur, age, outlier) <span class="co"># 2 outliers initialement</span></a>
<a class="sourceLine" id="cb29-27" title="27"><span class="co">## # A tibble: 2 x 4</span></a>
<a class="sourceLine" id="cb29-28" title="28"><span class="co">##   annee longueur   age outlier</span></a>
<a class="sourceLine" id="cb29-29" title="29"><span class="co">##   &lt;int&gt;    &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;  </span></a>
<a class="sourceLine" id="cb29-30" title="30"><span class="co">## 1  1995      104    10 TRUE   </span></a>
<a class="sourceLine" id="cb29-31" title="31"><span class="co">## 2  2016       94     8 TRUE</span></a>
<a class="sourceLine" id="cb29-32" title="32"></a>
<a class="sourceLine" id="cb29-33" title="33"><span class="kw">ggplot</span>(<span class="dt">data =</span> ajout_bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year), <span class="kw">aes</span>(<span class="dt">x =</span> longueur, <span class="dt">fill =</span> outlier)) <span class="op">+</span></a>
<a class="sourceLine" id="cb29-34" title="34"><span class="st">    </span><span class="kw">geom_histogram</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb29-35" title="35"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>age, <span class="dt">scale =</span> <span class="st">&quot;free&quot;</span>)</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-24-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># Je vais supprimer ces 2 outliers</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">dim</span>(ajout_bio) <span class="co"># 19915 obs et 10 var</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">## [1] 19915    10</span></a>
<a class="sourceLine" id="cb30-4" title="4">ajout_bio &lt;-<span class="st"> </span>ajout_bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> </span>F)</a>
<a class="sourceLine" id="cb30-5" title="5"><span class="kw">dim</span>(ajout_bio) <span class="co"># 19913 obs et 10 var</span></a>
<a class="sourceLine" id="cb30-6" title="6"><span class="co">## [1] 19913    10</span></a></code></pre></div>
<p>Je peux maintenant ajouter à <code>bio</code> ces données.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">dim</span>(bio) <span class="co"># 85185 obs et 25 var</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="co">## [1] 85185    25</span></a>
<a class="sourceLine" id="cb31-3" title="3">bio &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">source =</span> <span class="st">&quot;quai&quot;</span>), ajout_bio)</a>
<a class="sourceLine" id="cb31-4" title="4"><span class="kw">dim</span>(bio) <span class="co"># 105098 obs et 26 var</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="co">## [1] 105098     26</span></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="kw">rm</span>(ajout_bio)</a></code></pre></div>
</div>
<div id="classes-dengins" class="section level1">
<h1><span class="header-section-number">7</span> Classes d’engins</h1>
<p>Je me base en partie sur les regroupements présentés par <span class="citation">Fréchet et Gascon (<a href="#ref-Frechet1986a" role="doc-biblioref">1986</a>)</span>.</p>
<div id="des-débarquements" class="section level2">
<h2><span class="header-section-number">7.1</span> des débarquements</h2>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">setdiff</span>(catch <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(source <span class="op">==</span><span class="st"> &quot;NAFO 21B&quot;</span>, annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique,</a>
<a class="sourceLine" id="cb32-2" title="2">        catch <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(source <span class="op">==</span><span class="st"> &quot;ZIFF&quot;</span>, annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique)</a>
<a class="sourceLine" id="cb32-3" title="3"><span class="co">## character(0)</span></a>
<a class="sourceLine" id="cb32-4" title="4"><span class="co"># NAFO 21B ne fournit aucun engin qui n&#39;est pas mentionné dans les données ZIFF</span></a>
<a class="sourceLine" id="cb32-5" title="5"></a>
<a class="sourceLine" id="cb32-6" title="6">engins_deb &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-7" title="7"><span class="st">              </span><span class="kw">filter</span>(source <span class="op">==</span><span class="st"> &quot;ZIFF&quot;</span>, <span class="op">!</span><span class="kw">is.na</span>(engin), annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="st">              </span><span class="kw">distinct</span>(engin, engin_fr, engin_en, engin_cat) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-9" title="9"><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">engin_groupe =</span> <span class="kw">as.character</span>(<span class="ot">NA</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># vide initialement</span></a>
<a class="sourceLine" id="cb32-10" title="10"><span class="st">              </span><span class="kw">arrange</span>(engin)</a>
<a class="sourceLine" id="cb32-11" title="11"><span class="kw">dim</span>(engins_deb) <span class="co"># 21 obs et 5 var</span></a>
<a class="sourceLine" id="cb32-12" title="12"><span class="co">## [1] 21  5</span></a>
<a class="sourceLine" id="cb32-13" title="13"></a>
<a class="sourceLine" id="cb32-14" title="14"></a>
<a class="sourceLine" id="cb32-15" title="15"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb32-16" title="16">  grp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Chalut à crevette&quot;</span>, <span class="st">&quot;Autres chaluts&quot;</span>, <span class="st">&quot;Seines&quot;</span>, <span class="st">&quot;Filets maillants&quot;</span>, <span class="st">&quot;Palangres&quot;</span>, <span class="st">&quot;Engins manuels&quot;</span>, <span class="st">&quot;Trappes&quot;</span>, </a>
<a class="sourceLine" id="cb32-17" title="17">           <span class="st">&quot;Autres / inconnus&quot;</span>)</a>
<a class="sourceLine" id="cb32-18" title="18">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb32-19" title="19">  grp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Shrimp trawl&quot;</span>, <span class="st">&quot;Other trawls&quot;</span>, <span class="st">&quot;Seines&quot;</span>, <span class="st">&quot;Gillnets&quot;</span>, <span class="st">&quot;Longlines&quot;</span>, <span class="st">&quot;Hand gear&quot;</span>, <span class="st">&quot;Traps&quot;</span>, <span class="st">&quot;Others / unknown&quot;</span>)</a>
<a class="sourceLine" id="cb32-20" title="20">}</a>
<a class="sourceLine" id="cb32-21" title="21"></a>
<a class="sourceLine" id="cb32-22" title="22">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">19</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb32-23" title="23">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">13</span>, <span class="dv">15</span><span class="op">:</span><span class="dv">16</span>, <span class="dv">18</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb32-24" title="24">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">21</span><span class="op">:</span><span class="dv">22</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb32-25" title="25">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">41</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb32-26" title="26">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">50</span><span class="op">:</span><span class="dv">51</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb32-27" title="27">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">53</span>,<span class="dv">55</span>,<span class="dv">59</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb32-28" title="28">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">61</span>,<span class="dv">62</span>,<span class="dv">67</span>,<span class="dv">68</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb32-29" title="29">engins_deb[engins_deb<span class="op">$</span>engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">71</span>,<span class="dv">99</span>), <span class="st">&quot;engin_groupe&quot;</span>] &lt;-<span class="st"> </span>grp[<span class="dv">8</span>]</a>
<a class="sourceLine" id="cb32-30" title="30"></a>
<a class="sourceLine" id="cb32-31" title="31"><span class="kw">table</span>(engins_deb<span class="op">$</span>engin_groupe, <span class="dt">useNA =</span> <span class="st">&quot;always&quot;</span>) <span class="co"># 0 valeur NA = parfait</span></a>
<a class="sourceLine" id="cb32-32" title="32"><span class="co">## </span></a>
<a class="sourceLine" id="cb32-33" title="33"><span class="co">##         Gillnets        Hand gear        Longlines     Other trawls </span></a>
<a class="sourceLine" id="cb32-34" title="34"><span class="co">##                1                3                2                6 </span></a>
<a class="sourceLine" id="cb32-35" title="35"><span class="co">## Others / unknown           Seines     Shrimp trawl            Traps </span></a>
<a class="sourceLine" id="cb32-36" title="36"><span class="co">##                2                2                1                4 </span></a>
<a class="sourceLine" id="cb32-37" title="37"><span class="co">##             &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb32-38" title="38"><span class="co">##                0</span></a>
<a class="sourceLine" id="cb32-39" title="39">engins_deb<span class="op">$</span>engin_groupe &lt;-<span class="st"> </span><span class="kw">factor</span>(engins_deb<span class="op">$</span>engin_groupe, <span class="dt">levels =</span> grp, <span class="dt">ordered =</span> T)</a></code></pre></div>
<p><code>catch</code> contient des valeurs <em>NA</em> pour certaines colonnes associées aux engins. Je vais corriger ça.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">catch[, <span class="kw">c</span>(<span class="st">&quot;engin_cat&quot;</span>, <span class="st">&quot;engin_fr&quot;</span>, <span class="st">&quot;engin_en&quot;</span>)] &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb33-2" title="2">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(catch, <span class="kw">is.na</span>(engin))); <span class="kw">length</span>(cor) <span class="co"># 1681</span></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="co">## [1] 1681</span></a>
<a class="sourceLine" id="cb33-4" title="4">catch<span class="op">$</span>engin[cor] &lt;-<span class="st"> </span><span class="dv">99</span> <span class="co"># sera dans le groupe Autres / inconnus</span></a>
<a class="sourceLine" id="cb33-5" title="5"></a>
<a class="sourceLine" id="cb33-6" title="6"><span class="kw">dim</span>(catch) <span class="co"># 593461 obs et 11 var</span></a>
<a class="sourceLine" id="cb33-7" title="7"><span class="co">## [1] 593461     11</span></a>
<a class="sourceLine" id="cb33-8" title="8">catch &lt;-<span class="st"> </span><span class="kw">left_join</span>(catch, engins_deb <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(engin, engin_fr, engin_en), <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>)</a>
<a class="sourceLine" id="cb33-9" title="9"><span class="kw">dim</span>(catch) <span class="co"># 593461 obs et 13 var</span></a>
<a class="sourceLine" id="cb33-10" title="10"><span class="co">## [1] 593461     13</span></a>
<a class="sourceLine" id="cb33-11" title="11"></a>
<a class="sourceLine" id="cb33-12" title="12"><span class="kw">save</span>(catch, <span class="dt">file =</span> dat_catch)</a></code></pre></div>
<p>Je vais également rajouter de l’information sur l’importance de ces engins dans la pêche.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">ajout_tot &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-2" title="2"><span class="st">             </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, <span class="op">!</span><span class="kw">is.na</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="st">             </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="st">             </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-5" title="5"><span class="st">             </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="st">             </span><span class="kw">mutate</span>(<span class="dt">perc_tot =</span> catch <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(catch) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="st">             </span><span class="kw">select</span>(<span class="op">-</span>catch) <span class="co"># inutile</span></a>
<a class="sourceLine" id="cb34-8" title="8">         </a>
<a class="sourceLine" id="cb34-9" title="9">ajout_min_max &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="st">                 </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, <span class="op">!</span><span class="kw">is.na</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-11" title="11"><span class="st">                 </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">factor</span>(annee), </a>
<a class="sourceLine" id="cb34-12" title="12">                        <span class="dt">engin =</span> <span class="kw">factor</span>(engin)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="st">                 </span><span class="kw">group_by</span>(annee, engin, <span class="dt">.drop =</span> F) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-14" title="14"><span class="st">                 </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-15" title="15"><span class="st">                 </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-16" title="16"><span class="st">                 </span><span class="kw">mutate</span>(<span class="dt">perc =</span> catch <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(catch) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-17" title="17"><span class="st">                 </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-18" title="18"><span class="st">                 </span><span class="kw">summarise</span>(<span class="dt">min =</span> <span class="kw">min</span>(perc),</a>
<a class="sourceLine" id="cb34-19" title="19">                           <span class="dt">max =</span> <span class="kw">max</span>(perc),</a>
<a class="sourceLine" id="cb34-20" title="20">                           <span class="dt">ans =</span> <span class="kw">NROW</span>(engin[perc <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>])) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-21" title="21"><span class="st">                 </span>ungroup</a>
<a class="sourceLine" id="cb34-22" title="22"></a>
<a class="sourceLine" id="cb34-23" title="23"><span class="kw">dim</span>(engins_deb) <span class="co"># 21 obs et 5 var</span></a>
<a class="sourceLine" id="cb34-24" title="24"><span class="co">## [1] 21  5</span></a>
<a class="sourceLine" id="cb34-25" title="25">engins_deb &lt;-<span class="st"> </span><span class="kw">left_join</span>(engins_deb, ajout_tot, <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-26" title="26"><span class="st">              </span><span class="kw">left_join</span>(., ajout_min_max, <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>)</a>
<a class="sourceLine" id="cb34-27" title="27"><span class="kw">dim</span>(engins_deb) <span class="co"># 21 obs et 9 var</span></a>
<a class="sourceLine" id="cb34-28" title="28"><span class="co">## [1] 21  9</span></a>
<a class="sourceLine" id="cb34-29" title="29"></a>
<a class="sourceLine" id="cb34-30" title="30"><span class="kw">save</span>(engins_deb, <span class="dt">file =</span> dat_engin_deb)</a>
<a class="sourceLine" id="cb34-31" title="31"><span class="kw">rm</span>(ajout_tot, ajout_min_max)</a></code></pre></div>
</div>
<div id="des-observateurs-à-quai" class="section level2">
<h2><span class="header-section-number">7.2</span> des observateurs à quai</h2>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">setdiff</span>(lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique, </a>
<a class="sourceLine" id="cb35-2" title="2">        bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique) </a>
<a class="sourceLine" id="cb35-3" title="3"><span class="co">## character(0)</span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="co"># tous les engins de lf sont dans bio, même ST qui provient des données du relevé nGSL</span></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="kw">setdiff</span>(bio <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique, </a>
<a class="sourceLine" id="cb35-6" title="6">        lf <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span>unique) </a>
<a class="sourceLine" id="cb35-7" title="7"><span class="co">## character(0)</span></a>
<a class="sourceLine" id="cb35-8" title="8"><span class="co"># tous les engins de bio sont dans lf</span></a>
<a class="sourceLine" id="cb35-9" title="9"></a>
<a class="sourceLine" id="cb35-10" title="10">engins_obs &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-11" title="11"><span class="st">              </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># pour n&#39;avoir que ceux observés de 1993 à 2020</span></a>
<a class="sourceLine" id="cb35-12" title="12"><span class="st">              </span><span class="kw">distinct</span>(engin, engin_fr, engin_en) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-13" title="13"><span class="st">              </span><span class="kw">mutate</span>(<span class="dt">engin_groupe =</span> <span class="kw">as.character</span>(<span class="ot">NA</span>)) <span class="co"># vide initialement)</span></a>
<a class="sourceLine" id="cb35-14" title="14"><span class="kw">dim</span>(engins_obs) <span class="co"># 14 obs et 4 var</span></a>
<a class="sourceLine" id="cb35-15" title="15"><span class="co">## [1] 14  4</span></a>
<a class="sourceLine" id="cb35-16" title="16">engins_obs <span class="co"># correction requise pour SDN</span></a>
<a class="sourceLine" id="cb35-17" title="17"><span class="co">## # A tibble: 14 x 4</span></a>
<a class="sourceLine" id="cb35-18" title="18"><span class="co">##    engin engin_fr                          engin_en                 engin_groupe</span></a>
<a class="sourceLine" id="cb35-19" title="19"><span class="co">##    &lt;chr&gt; &lt;chr&gt;                             &lt;chr&gt;                    &lt;chr&gt;       </span></a>
<a class="sourceLine" id="cb35-20" title="20"><span class="co">##  1 GNS   Filets maillants calés (ancrés)   Set gillnets (anchored)  &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-21" title="21"><span class="co">##  2 LLS   Palangres calées                  Set longlines            &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-22" title="22"><span class="co">##  3 GN    Filets maillants (non spécifiés)  Gillnets (not specified) &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-23" title="23"><span class="co">##  4 LL    Palangres (non spécifiées)        Longlines (not specifie~ &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-24" title="24"><span class="co">##  5 LLG   Palangrotte                       Handline                 &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-25" title="25"><span class="co">##  6 FPN   Filets-pièges fixes non couverts  Stationary uncovered po~ &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-26" title="26"><span class="co">##  7 LX    Hameçons et lignes (non spécifié~ Hooks and lines (not sp~ &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-27" title="27"><span class="co">##  8 OTB2  Chalut de fond à panneaux (arriè~ Stern otter trawls       &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-28" title="28"><span class="co">##  9 FIX   Pièges (non spécifiés)            Traps (not specified)    &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-29" title="29"><span class="co">## 10 SDN   Danois/Ecossais/seine Pairée (2 ~ Danish/Scottish/Pair se~ &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-30" title="30"><span class="co">## 11 LHP   Lignes à main et lignes à cannes~ Handlines and pole-line~ &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-31" title="31"><span class="co">## 12 PS    Seine bourse                      Purse seine              &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-32" title="32"><span class="co">## 13 OTM   Chalut pélagique                  Midwater trawl           &lt;NA&gt;        </span></a>
<a class="sourceLine" id="cb35-33" title="33"><span class="co">## 14 ST    Chalut à crevette                 Shrimp trawl             &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb35-34" title="34">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">==</span><span class="st"> &quot;SDN&quot;</span>)); <span class="kw">length</span>(cor) <span class="co"># 1 ligne</span></a>
<a class="sourceLine" id="cb35-35" title="35"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb35-36" title="36">engins_obs<span class="op">$</span>engin_fr[cor] &lt;-<span class="st"> &quot;Seine danoise, écossaise, ou pairée (2 navires)&quot;</span></a>
<a class="sourceLine" id="cb35-37" title="37">engins_obs<span class="op">$</span>engin_en[cor] &lt;-<span class="st"> &quot;Danish, Scotish or paired (2 boats) seine&quot;</span></a>
<a class="sourceLine" id="cb35-38" title="38"></a>
<a class="sourceLine" id="cb35-39" title="39">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ST&quot;</span>)))</a>
<a class="sourceLine" id="cb35-40" title="40"><span class="kw">length</span>(cor) <span class="co"># 1 ligne</span></a>
<a class="sourceLine" id="cb35-41" title="41"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb35-42" title="42">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb35-43" title="43"></a>
<a class="sourceLine" id="cb35-44" title="44">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;OTB2&quot;</span>, <span class="st">&quot;OTM&quot;</span>)))</a>
<a class="sourceLine" id="cb35-45" title="45"><span class="kw">length</span>(cor) <span class="co"># 2 lignes</span></a>
<a class="sourceLine" id="cb35-46" title="46"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb35-47" title="47">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb35-48" title="48"></a>
<a class="sourceLine" id="cb35-49" title="49">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;SDN&quot;</span>, <span class="st">&quot;PS&quot;</span>)))</a>
<a class="sourceLine" id="cb35-50" title="50"><span class="kw">length</span>(cor) <span class="co"># 2 lignes</span></a>
<a class="sourceLine" id="cb35-51" title="51"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb35-52" title="52">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb35-53" title="53"></a>
<a class="sourceLine" id="cb35-54" title="54">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;GN&quot;</span>, <span class="st">&quot;GNS&quot;</span>)))</a>
<a class="sourceLine" id="cb35-55" title="55"><span class="kw">length</span>(cor) <span class="co"># 2 lignes</span></a>
<a class="sourceLine" id="cb35-56" title="56"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb35-57" title="57">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">4</span>]</a>
<a class="sourceLine" id="cb35-58" title="58"></a>
<a class="sourceLine" id="cb35-59" title="59">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;LL&quot;</span>, <span class="st">&quot;LLS&quot;</span>)))</a>
<a class="sourceLine" id="cb35-60" title="60"><span class="kw">length</span>(cor) <span class="co"># 2 lignes</span></a>
<a class="sourceLine" id="cb35-61" title="61"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb35-62" title="62">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb35-63" title="63"></a>
<a class="sourceLine" id="cb35-64" title="64">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;LHP&quot;</span>, <span class="st">&quot;LLG&quot;</span>, <span class="st">&quot;LX&quot;</span>)))</a>
<a class="sourceLine" id="cb35-65" title="65"><span class="kw">length</span>(cor) <span class="co"># 3 lignes</span></a>
<a class="sourceLine" id="cb35-66" title="66"><span class="co">## [1] 3</span></a>
<a class="sourceLine" id="cb35-67" title="67">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">6</span>]</a>
<a class="sourceLine" id="cb35-68" title="68"></a>
<a class="sourceLine" id="cb35-69" title="69">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, engin <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FPN&quot;</span>, <span class="st">&quot;FIX&quot;</span>)))</a>
<a class="sourceLine" id="cb35-70" title="70"><span class="kw">length</span>(cor) <span class="co"># 2 lignes</span></a>
<a class="sourceLine" id="cb35-71" title="71"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb35-72" title="72">engins_obs<span class="op">$</span>engin_groupe[cor] &lt;-<span class="st"> </span>grp[<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb35-73" title="73"></a>
<a class="sourceLine" id="cb35-74" title="74">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(engins_obs, <span class="kw">is.na</span>(engin_groupe)))</a>
<a class="sourceLine" id="cb35-75" title="75"><span class="kw">length</span>(cor) <span class="co"># 0 ligne</span></a>
<a class="sourceLine" id="cb35-76" title="76"><span class="co">## [1] 0</span></a>
<a class="sourceLine" id="cb35-77" title="77"><span class="co">#engins_obs$engin_groupe[cor] &lt;- grp[8] # autres engins ou inconnus. Non-utilisé ici.</span></a>
<a class="sourceLine" id="cb35-78" title="78"></a>
<a class="sourceLine" id="cb35-79" title="79"><span class="kw">table</span>(engins_obs<span class="op">$</span>engin_groupe, <span class="dt">useNA =</span> <span class="st">&quot;always&quot;</span>) <span class="co"># 0 valeur NA = parfait</span></a>
<a class="sourceLine" id="cb35-80" title="80"><span class="co">## </span></a>
<a class="sourceLine" id="cb35-81" title="81"><span class="co">##     Gillnets    Hand gear    Longlines Other trawls       Seines Shrimp trawl </span></a>
<a class="sourceLine" id="cb35-82" title="82"><span class="co">##            2            3            2            2            2            1 </span></a>
<a class="sourceLine" id="cb35-83" title="83"><span class="co">##        Traps         &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb35-84" title="84"><span class="co">##            2            0</span></a>
<a class="sourceLine" id="cb35-85" title="85">engins_obs<span class="op">$</span>engin_groupe &lt;-<span class="st"> </span><span class="kw">factor</span>(engins_obs<span class="op">$</span>engin_groupe, <span class="dt">levels =</span> grp[<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>], <span class="dt">ordered =</span> T)</a>
<a class="sourceLine" id="cb35-86" title="86"></a>
<a class="sourceLine" id="cb35-87" title="87"><span class="kw">save</span>(engins_obs, <span class="dt">file =</span> dat_engin_obs)</a></code></pre></div>
</div>
</div>
<div id="tableaux-résumés" class="section level1">
<h1><span class="header-section-number">8</span> Tableaux résumés</h1>
<div id="fl-1" class="section level2 tabset">
<h2><span class="header-section-number">8.1</span> FL</h2>
<div id="table1-état-au-débarquement" class="section level3">
<h3><span class="header-section-number">8.1.1</span> <code>table1</code>: état au débarquement</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">etat &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-2" title="2"><span class="st">        </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># seulement les données à quai</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="st">        </span><span class="kw">distinct</span>(id, <span class="dt">.keep_all =</span> T) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 1 ligne par échantillon de FL</span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="st">        </span><span class="kw">group_by</span>(annee, etat_deb) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="st">        </span><span class="kw">count</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="st">        </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">etat_deb =</span> <span class="kw">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;_&quot;</span>, etat_deb)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="st">        </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;etat_deb&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;n&quot;</span>, <span class="dt">values_fill =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb36-9" title="9"></a>
<a class="sourceLine" id="cb36-10" title="10">pese &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="st">        </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># seulement les données à quai </span></a>
<a class="sourceLine" id="cb36-12" title="12"><span class="st">        </span><span class="kw">distinct</span>(id, <span class="dt">.keep_all =</span> T) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 1 ligne par échantillon de FL</span></a>
<a class="sourceLine" id="cb36-13" title="13"><span class="st">        </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-14" title="14"><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">n_total =</span> <span class="kw">n</span>(),</a>
<a class="sourceLine" id="cb36-15" title="15">                  <span class="dt">nb_pds_ech =</span> <span class="kw">NROW</span>(pds_ech[<span class="kw">is.na</span>(pds_ech)]),</a>
<a class="sourceLine" id="cb36-16" title="16">                  <span class="dt">perc_ech =</span> (nb_pds_ech <span class="op">/</span><span class="st"> </span>n_total) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,</a>
<a class="sourceLine" id="cb36-17" title="17">                  <span class="dt">nb_pds_deb =</span> <span class="kw">NROW</span>(pds_deb[<span class="kw">is.na</span>(pds_deb)]),</a>
<a class="sourceLine" id="cb36-18" title="18">                  <span class="dt">perc_deb =</span> (nb_pds_deb <span class="op">/</span><span class="st"> </span>n_total) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-19" title="19"><span class="st">        </span>ungroup</a>
<a class="sourceLine" id="cb36-20" title="20"></a>
<a class="sourceLine" id="cb36-21" title="21">table1 &lt;-<span class="st"> </span><span class="kw">left_join</span>(etat, pese, <span class="dt">by =</span> <span class="st">&quot;annee&quot;</span>)</a>
<a class="sourceLine" id="cb36-22" title="22">tot &lt;-<span class="st"> </span>table1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-23" title="23"><span class="st">       </span><span class="kw">summarise</span>(<span class="kw">across</span>(<span class="dt">.cols =</span> <span class="kw">c</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">8</span>), <span class="dt">.fns =</span> sum)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-24" title="24"><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb36-25" title="25">tot &lt;-<span class="st"> </span><span class="kw">left_join</span>(tot, tot <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-26" title="26"><span class="st">                      </span><span class="kw">mutate</span>(<span class="dt">perc_ech =</span> <span class="kw">round</span>(nb_pds_ech <span class="op">/</span><span class="st"> </span>n_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb36-27" title="27">                             <span class="dt">perc_deb =</span> <span class="kw">round</span>(nb_pds_deb <span class="op">/</span><span class="st"> </span>n_total <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-28" title="28"><span class="st">                      </span><span class="kw">select</span>(annee, perc_ech, perc_deb),</a>
<a class="sourceLine" id="cb36-29" title="29">                 <span class="dt">by =</span> <span class="st">&quot;annee&quot;</span>)</a>
<a class="sourceLine" id="cb36-30" title="30">        </a>
<a class="sourceLine" id="cb36-31" title="31">table1 &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(table1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee)), tot)</a>
<a class="sourceLine" id="cb36-32" title="32"><span class="kw">dim</span>(table1) <span class="co"># 29 obs et 9 var</span></a>
<a class="sourceLine" id="cb36-33" title="33"><span class="co">## [1] 29  9</span></a>
<a class="sourceLine" id="cb36-34" title="34"><span class="kw">rm</span>(etat, pese, tot)</a>
<a class="sourceLine" id="cb36-35" title="35"></a>
<a class="sourceLine" id="cb36-36" title="36"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb36-37" title="37">  cap &lt;-<span class="st"> &quot;Inventaire des échantillons de fréquence de longueur selon l’état au débarquement et l’année de prélèvement.  Le nombre annuel d’échantillons dont soit le poids d’échantillon ou le poids du débarquement n’est pas fourni est également montré. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb36-38" title="38">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, <span class="st">&quot;Entier&quot;</span>, <span class="st">&quot;Éviscéré non-étêté&quot;, &quot;</span>Inconnu<span class="st">&quot;, &quot;</span>Total<span class="st">&quot;, rep(c(&quot;</span>Nb<span class="st">&quot;, &quot;</span>\\% du total<span class="st">&quot;), 2))</span></a>
<a class="sourceLine" id="cb36-39" title="39"><span class="st">  headers &lt;- c(&quot;&quot;, &quot;</span>État au débarquement<span class="st">&quot; = 4, &quot;</span>Échantillons non<span class="op">-</span>pesés<span class="st">&quot; = 2, &quot;</span>Débarquements non<span class="op">-</span>pesés<span class="st">&quot; = 2)</span></a>
<a class="sourceLine" id="cb36-40" title="40"><span class="st">} else {</span></a>
<a class="sourceLine" id="cb36-41" title="41"><span class="st">  cap &lt;- &quot;</span>Inventory of length frequency samples according to the state at landing and the year of collection. The annual number of samples where either the sample weight or the landing weight is not reported are provided. Source<span class="op">:</span><span class="st"> </span>DFO port sampling program data.<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb36-42" title="42"><span class="st">  col_names &lt;- c(&quot;</span>Year<span class="st">&quot;, &quot;</span>Whole<span class="st">&quot;, &quot;</span>Gutted head on<span class="st">&quot;, &quot;</span>Unknown<span class="st">&quot;, &quot;</span>Total<span class="st">&quot;, rep(c(&quot;</span>Nb<span class="st">&quot;, &quot;</span>\\% of total<span class="st">&quot;), 2))</span></a>
<a class="sourceLine" id="cb36-43" title="43"><span class="st">  headers &lt;- c(&quot;&quot;, &quot;</span>State at landing<span class="st">&quot; = 4, &quot;</span>Unweighted samples<span class="st">&quot; = 2, &quot;</span>Unweighted landings<span class="st">&quot; = 2)</span></a>
<a class="sourceLine" id="cb36-44" title="44"><span class="st">}</span></a>
<a class="sourceLine" id="cb36-45" title="45"></a>
<a class="sourceLine" id="cb36-46" title="46"><span class="st">cor &lt;- which(with(table1, annee == &quot;</span>Total<span class="st">&quot;))</span></a>
<a class="sourceLine" id="cb36-47" title="47"></a>
<a class="sourceLine" id="cb36-48" title="48"><span class="st">table1 %&gt;% </span></a>
<a class="sourceLine" id="cb36-49" title="49"><span class="st">  mutate_at(.vars = c(&quot;</span>perc_ech<span class="st">&quot;, &quot;</span>perc_deb<span class="st">&quot;), .funs = function(x) round(x, 1)) %&gt;% </span></a>
<a class="sourceLine" id="cb36-50" title="50"><span class="st">  mutate_at(.vars = 2:ncol(table1), .funs = function(x) ifelse(x == 0, &quot;&quot;, format(x, big.mark = bm, decimal.mark = dm))) %&gt;% </span></a>
<a class="sourceLine" id="cb36-51" title="51"><span class="st">  kable(caption = cap, col.names = col_names, longtable = F, align = c(&quot;</span>l<span class="st">&quot;, rep(&quot;</span>r<span class="st">&quot;, ncol(.)-1))) %&gt;% </span></a>
<a class="sourceLine" id="cb36-52" title="52"><span class="st">  kable_styling(bootstrap_options = c(&quot;</span>hover<span class="st">&quot;, &quot;</span>striped<span class="st">&quot;, &quot;</span>condensed<span class="st">&quot;), full_width = F, fixed_thead = T) %&gt;% </span></a>
<a class="sourceLine" id="cb36-53" title="53"><span class="st">  add_header_above(header = headers, bold = T) %&gt;% </span></a>
<a class="sourceLine" id="cb36-54" title="54"><span class="st">  row_spec(row = cor, bold = T) # ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Inventory of length frequency samples according to the state at landing and the year of collection. The annual number of samples where either the sample weight or the landing weight is not reported are provided. Source: DFO port sampling program data.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
State at landing
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Unweighted samples
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-weight: bold; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Unweighted landings
</div>
</th>
</tr>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Whole
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Gutted head on
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Unknown
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Nb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
% of total
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Nb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
% of total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
145
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
169
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
8.9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.6
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
78
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
92.3
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
92.3
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
772
</td>
<td style="text-align:right;">
778
</td>
<td style="text-align:right;">
772
</td>
<td style="text-align:right;">
99.2
</td>
<td style="text-align:right;">
774
</td>
<td style="text-align:right;">
99.5
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
407
</td>
<td style="text-align:right;">
418
</td>
<td style="text-align:right;">
407
</td>
<td style="text-align:right;">
97.4
</td>
<td style="text-align:right;">
407
</td>
<td style="text-align:right;">
97.4
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
227
</td>
<td style="text-align:right;">
383
</td>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
78.1
</td>
<td style="text-align:right;">
298
</td>
<td style="text-align:right;">
77.8
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
38.1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8.3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
10.7
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
12.5
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11.8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.9
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
11.9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
9.3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
15.6
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
19.4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
14.3
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
23.1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
20.0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
42.1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5.3
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
36.4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9.1
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
16.0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
17.2
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
20.0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
229
</td>
<td style="text-align:right;font-weight: bold;">
716
</td>
<td style="text-align:right;font-weight: bold;">
1,478
</td>
<td style="text-align:right;font-weight: bold;">
2,423
</td>
<td style="text-align:right;font-weight: bold;">
1,652
</td>
<td style="text-align:right;font-weight: bold;">
68.2
</td>
<td style="text-align:right;font-weight: bold;">
1,564
</td>
<td style="text-align:right;font-weight: bold;">
64.5
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">rm</span>(cor)</a></code></pre></div>
</div>
<div id="table2-annéemois" class="section level3">
<h3><span class="header-section-number">8.1.2</span> <code>table2</code>: ~ année–mois</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1">table2 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">mois =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-mois à remplir</span></a>
<a class="sourceLine" id="cb38-2" title="2">ajout1 &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-4" title="4"><span class="st">          </span><span class="kw">group_by</span>(annee, mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb38-6" title="6">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(n_mes, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-7" title="7"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-8" title="8"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">mois =</span> <span class="kw">as.character</span>(mois),</a>
<a class="sourceLine" id="cb38-9" title="9">                 <span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb38-10" title="10">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-13" title="13">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-14" title="14">                    <span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-15" title="15"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb38-16" title="16">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-17" title="17"><span class="st">          </span><span class="kw">group_by</span>(mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-18" title="18"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-19" title="19">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-20" title="20">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-21" title="21"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb38-22" title="22">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-23" title="23"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-24" title="24">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb38-25" title="25">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb38-26" title="26">                    <span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-27" title="27"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb38-28" title="28">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-29" title="29"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb38-30" title="30">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb38-31" title="31">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb38-32" title="32"><span class="kw">dim</span>(table2) <span class="co"># 377 obs et 2 var</span></a>
<a class="sourceLine" id="cb38-33" title="33"><span class="co">## [1] 377   2</span></a>
<a class="sourceLine" id="cb38-34" title="34">table2 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table2, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;mois&quot;</span>))</a>
<a class="sourceLine" id="cb38-35" title="35"><span class="kw">dim</span>(table2) <span class="co"># 377 obs et 5 var</span></a>
<a class="sourceLine" id="cb38-36" title="36"><span class="co">## [1] 377   5</span></a>
<a class="sourceLine" id="cb38-37" title="37">table2 &lt;-<span class="st"> </span>table2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;mois&quot;</span>, <span class="dt">names_prefix =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb38-38" title="38"><span class="kw">dim</span>(table2) <span class="co"># 29 obs et 14 var</span></a>
<a class="sourceLine" id="cb38-39" title="39"><span class="co">## [1] 29 14</span></a>
<a class="sourceLine" id="cb38-40" title="40"></a>
<a class="sourceLine" id="cb38-41" title="41"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb38-42" title="42">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Fév.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Avr.&quot;</span>, <span class="st">&quot;Mai&quot;</span>, <span class="st">&quot;Juin&quot;</span>, <span class="st">&quot;Juil.&quot;</span>, <span class="st">&quot;Août&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Déc.&quot;</span>)</a>
<a class="sourceLine" id="cb38-43" title="43">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les fréquences de longueur dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et mois. Les valeurs entre parenthèses sont les effectifs en morues. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb38-44" title="44">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb38-45" title="45">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb38-46" title="46">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Feb.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Apr.&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;June&quot;</span>, <span class="st">&quot;July&quot;</span>, <span class="st">&quot;Aug.&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Dec.&quot;</span>)</a>
<a class="sourceLine" id="cb38-47" title="47">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and month. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb38-48" title="48">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb38-49" title="49">}</a>
<a class="sourceLine" id="cb38-50" title="50"></a>
<a class="sourceLine" id="cb38-51" title="51">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table2, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb38-52" title="52"></a>
<a class="sourceLine" id="cb38-53" title="53">table2 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-54" title="54"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb38-55" title="55"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-56" title="56"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-57" title="57"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-58" title="58"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and month. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Jan. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Feb. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Mar. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Apr. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
May
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
June
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
July
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Aug. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sept. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Oct. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Nov. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Dec. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (1,512)
</td>
<td style="text-align:right;">
6 (1,535)
</td>
<td style="text-align:right;">
22 (5,300)
</td>
<td style="text-align:right;">
27 (7,317)
</td>
<td style="text-align:right;">
44 (10,922)
</td>
<td style="text-align:right;">
15 (3,301)
</td>
<td style="text-align:right;">
17 (3,796)
</td>
<td style="text-align:right;">
18 (4,255)
</td>
<td style="text-align:right;">
13 (3,259)
</td>
<td style="text-align:right;">
1 (254)
</td>
<td style="text-align:right;">
169 (41,451)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (250)
</td>
<td style="text-align:right;">
2 (486)
</td>
<td style="text-align:right;">
1 (257)
</td>
<td style="text-align:right;">
1 (204)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (28)
</td>
<td style="text-align:right;">
64 (926)
</td>
<td style="text-align:right;">
78 (2,151)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
33 (324)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
48 (396)
</td>
<td style="text-align:right;">
21 (487)
</td>
<td style="text-align:right;">
1 (251)
</td>
<td style="text-align:right;">
101 (1,051)
</td>
<td style="text-align:right;">
249 (2,859)
</td>
<td style="text-align:right;">
187 (2,887)
</td>
<td style="text-align:right;">
112 (1,485)
</td>
<td style="text-align:right;">
21 (693)
</td>
<td style="text-align:right;">
5 (117)
</td>
<td style="text-align:right;">
778 (10,550)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (250)
</td>
<td style="text-align:right;">
14 (664)
</td>
<td style="text-align:right;">
138 (2,292)
</td>
<td style="text-align:right;">
136 (3,169)
</td>
<td style="text-align:right;">
96 (1,280)
</td>
<td style="text-align:right;">
19 (425)
</td>
<td style="text-align:right;">
12 (569)
</td>
<td style="text-align:right;">
2 (39)
</td>
<td style="text-align:right;">
418 (8,688)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
1 (9)
</td>
<td style="text-align:right;">
3 (59)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (1,094)
</td>
<td style="text-align:right;">
21 (1,131)
</td>
<td style="text-align:right;">
119 (11,114)
</td>
<td style="text-align:right;">
92 (4,366)
</td>
<td style="text-align:right;">
102 (5,857)
</td>
<td style="text-align:right;">
27 (2,030)
</td>
<td style="text-align:right;">
8 (710)
</td>
<td style="text-align:right;">
4 (98)
</td>
<td style="text-align:right;">
383 (26,468)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (249)
</td>
<td style="text-align:right;">
4 (531)
</td>
<td style="text-align:right;">
7 (1,559)
</td>
<td style="text-align:right;">
6 (1,266)
</td>
<td style="text-align:right;">
2 (486)
</td>
<td style="text-align:right;">
1 (256)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (4,347)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (270)
</td>
<td style="text-align:right;">
4 (733)
</td>
<td style="text-align:right;">
15 (2,929)
</td>
<td style="text-align:right;">
12 (2,250)
</td>
<td style="text-align:right;">
5 (1,143)
</td>
<td style="text-align:right;">
5 (700)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42 (8,025)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (1,237)
</td>
<td style="text-align:right;">
3 (631)
</td>
<td style="text-align:right;">
8 (1,782)
</td>
<td style="text-align:right;">
12 (2,313)
</td>
<td style="text-align:right;">
6 (1,472)
</td>
<td style="text-align:right;">
2 (442)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,877)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (935)
</td>
<td style="text-align:right;">
5 (1,097)
</td>
<td style="text-align:right;">
9 (1,974)
</td>
<td style="text-align:right;">
7 (1,320)
</td>
<td style="text-align:right;">
6 (1,088)
</td>
<td style="text-align:right;">
4 (1,020)
</td>
<td style="text-align:right;">
1 (252)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,686)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (1,012)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (1,761)
</td>
<td style="text-align:right;">
9 (1,627)
</td>
<td style="text-align:right;">
5 (1,262)
</td>
<td style="text-align:right;">
2 (470)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (6,132)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (605)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (605)
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (252)
</td>
<td style="text-align:right;">
2 (473)
</td>
<td style="text-align:right;">
13 (2,781)
</td>
<td style="text-align:right;">
2 (352)
</td>
<td style="text-align:right;">
5 (889)
</td>
<td style="text-align:right;">
1 (122)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (4,869)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (507)
</td>
<td style="text-align:right;">
19 (2,954)
</td>
<td style="text-align:right;">
7 (1,167)
</td>
<td style="text-align:right;">
3 (464)
</td>
<td style="text-align:right;">
2 (259)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (5,351)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (161)
</td>
<td style="text-align:right;">
25 (3,868)
</td>
<td style="text-align:right;">
7 (1,041)
</td>
<td style="text-align:right;">
7 (1,028)
</td>
<td style="text-align:right;">
2 (320)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42 (6,418)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (163)
</td>
<td style="text-align:right;">
2 (312)
</td>
<td style="text-align:right;">
23 (3,584)
</td>
<td style="text-align:right;">
2 (314)
</td>
<td style="text-align:right;">
8 (1,023)
</td>
<td style="text-align:right;">
7 (1,131)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
43 (6,527)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (1,973)
</td>
<td style="text-align:right;">
6 (930)
</td>
<td style="text-align:right;">
9 (1,368)
</td>
<td style="text-align:right;">
3 (435)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32 (4,858)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
14 (3,217)
</td>
<td style="text-align:right;">
3 (535)
</td>
<td style="text-align:right;">
10 (1,358)
</td>
<td style="text-align:right;">
4 (701)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
31 (5,811)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (165)
</td>
<td style="text-align:right;">
10 (1,470)
</td>
<td style="text-align:right;">
8 (1,123)
</td>
<td style="text-align:right;">
7 (949)
</td>
<td style="text-align:right;">
2 (269)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (3,976)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (117)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (1,795)
</td>
<td style="text-align:right;">
5 (780)
</td>
<td style="text-align:right;">
7 (1,168)
</td>
<td style="text-align:right;">
1 (151)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (4,011)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (17)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (158)
</td>
<td style="text-align:right;">
9 (1,505)
</td>
<td style="text-align:right;">
3 (453)
</td>
<td style="text-align:right;">
3 (601)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
2 (451)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20 (3,335)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (154)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (1,866)
</td>
<td style="text-align:right;">
2 (309)
</td>
<td style="text-align:right;">
4 (681)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (3,010)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (1,415)
</td>
<td style="text-align:right;">
2 (303)
</td>
<td style="text-align:right;">
5 (767)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (2,637)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
10 (1,535)
</td>
<td style="text-align:right;">
2 (300)
</td>
<td style="text-align:right;">
2 (300)
</td>
<td style="text-align:right;">
1 (154)
</td>
<td style="text-align:right;">
6 (950)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (3,389)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (2,017)
</td>
<td style="text-align:right;">
5 (646)
</td>
<td style="text-align:right;">
2 (367)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
4 (1,066)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (4,248)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (185)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (481)
</td>
<td style="text-align:right;">
11 (1,859)
</td>
<td style="text-align:right;">
6 (890)
</td>
<td style="text-align:right;">
6 (856)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (349)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29 (4,620)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (1,887)
</td>
<td style="text-align:right;">
4 (528)
</td>
<td style="text-align:right;">
2 (306)
</td>
<td style="text-align:right;">
6 (1,001)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (3,872)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (156)
</td>
<td style="text-align:right;">
1 (148)
</td>
<td style="text-align:right;">
4 (460)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
2 (302)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (168)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (1,386)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (151)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
2 (309)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (610)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
34 (333)
</td>
<td style="text-align:right;font-weight: bold;">
3 (59)
</td>
<td style="text-align:right;font-weight: bold;">
6 (1,512)
</td>
<td style="text-align:right;font-weight: bold;">
57 (2,283)
</td>
<td style="text-align:right;font-weight: bold;">
72 (12,078)
</td>
<td style="text-align:right;font-weight: bold;">
97 (15,547)
</td>
<td style="text-align:right;font-weight: bold;">
662 (70,432)
</td>
<td style="text-align:right;font-weight: bold;">
605 (32,648)
</td>
<td style="text-align:right;font-weight: bold;">
510 (32,007)
</td>
<td style="text-align:right;font-weight: bold;">
222 (16,080)
</td>
<td style="text-align:right;font-weight: bold;">
79 (8,495)
</td>
<td style="text-align:right;font-weight: bold;">
76 (1,434)
</td>
<td style="text-align:right;font-weight: bold;">
2,423 (192,908)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">rm</span>(cor)</a></code></pre></div>
</div>
<div id="table3-annéeopano" class="section level3">
<h3><span class="header-section-number">8.1.3</span> <code>table3</code>: ~ année–OPANO</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">op &lt;-<span class="st"> </span><span class="kw">unique</span>(lf<span class="op">$</span>opano); op</a>
<a class="sourceLine" id="cb40-2" title="2"><span class="co">##  [1] &quot;3Pn&quot; &quot;4R&quot;  &quot;4Ra&quot; &quot;4Rb&quot; &quot;4Rc&quot; &quot;4Rd&quot; &quot;4S&quot;  &quot;4Si&quot; &quot;4Ss&quot; &quot;4Sv&quot; &quot;4Sw&quot; &quot;4Sx&quot;</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="co">## [13] &quot;4Sy&quot; &quot;4Sz&quot;</span></a>
<a class="sourceLine" id="cb40-4" title="4">table3 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">opano =</span> <span class="kw">c</span>(op, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-opano à remplir</span></a>
<a class="sourceLine" id="cb40-5" title="5">ajout1 &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-6" title="6"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-7" title="7"><span class="st">          </span><span class="kw">group_by</span>(annee, opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-8" title="8"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb40-9" title="9">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(n_mes, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-10" title="10"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-11" title="11"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb40-12" title="12">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-13" title="13"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-14" title="14"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-15" title="15">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-16" title="16">                    <span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-17" title="17"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb40-18" title="18">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-19" title="19"><span class="st">          </span><span class="kw">group_by</span>(opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-20" title="20"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-21" title="21">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-22" title="22">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-23" title="23"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb40-24" title="24">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-25" title="25"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-26" title="26">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb40-27" title="27">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb40-28" title="28">                    <span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-29" title="29"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb40-30" title="30">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-31" title="31"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb40-32" title="32">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb40-33" title="33">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb40-34" title="34"><span class="kw">dim</span>(table3) <span class="co"># 435 obs et 2 var</span></a>
<a class="sourceLine" id="cb40-35" title="35"><span class="co">## [1] 435   2</span></a>
<a class="sourceLine" id="cb40-36" title="36">table3 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table3, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;opano&quot;</span>))</a>
<a class="sourceLine" id="cb40-37" title="37"><span class="kw">dim</span>(table3) <span class="co"># 435 obs et 5 var</span></a>
<a class="sourceLine" id="cb40-38" title="38"><span class="co">## [1] 435   5</span></a>
<a class="sourceLine" id="cb40-39" title="39">table3 &lt;-<span class="st"> </span>table3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;opano&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb40-40" title="40"><span class="kw">dim</span>(table3) <span class="co"># 29 obs et 16 var</span></a>
<a class="sourceLine" id="cb40-41" title="41"><span class="co">## [1] 29 16</span></a>
<a class="sourceLine" id="cb40-42" title="42"><span class="kw">names</span>(table3) &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">names</span>(table3), <span class="st">&quot;4R&quot;</span> =<span class="st"> &quot;4Ru&quot;</span>, <span class="st">&quot;4S&quot;</span> =<span class="st"> &quot;4Su&quot;</span>)</a>
<a class="sourceLine" id="cb40-43" title="43">op &lt;-<span class="st"> </span><span class="kw">names</span>(table3)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table3) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb40-44" title="44"></a>
<a class="sourceLine" id="cb40-45" title="45"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb40-46" title="46">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les fréquences de longueur dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et zone unitaire de l&#39;OPANO. Les valeurs entre parenthèses sont les effectifs en morues. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb40-47" title="47">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb40-48" title="48">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb40-49" title="49">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and NAFO sub-division. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb40-50" title="50">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb40-51" title="51">}</a>
<a class="sourceLine" id="cb40-52" title="52"></a>
<a class="sourceLine" id="cb40-53" title="53">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table3, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb40-54" title="54"></a>
<a class="sourceLine" id="cb40-55" title="55">table3 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-56" title="56"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-57" title="57"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-58" title="58"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-59" title="59"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-60" title="60"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and NAFO sub-division. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3Pn
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ru
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ra
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rc
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Su
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Si
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ss
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sv
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sw
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sx
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sy
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sz
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
24 (5,652)
</td>
<td style="text-align:right;">
1 (242)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
81 (20,611)
</td>
<td style="text-align:right;">
18 (3,837)
</td>
<td style="text-align:right;">
17 (4,222)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (502)
</td>
<td style="text-align:right;">
1 (250)
</td>
<td style="text-align:right;">
4 (1,001)
</td>
<td style="text-align:right;">
11 (2,532)
</td>
<td style="text-align:right;">
5 (1,264)
</td>
<td style="text-align:right;">
1 (255)
</td>
<td style="text-align:right;">
4 (1,083)
</td>
<td style="text-align:right;">
169 (41,451)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
36 (751)
</td>
<td style="text-align:right;">
22 (160)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (5)
</td>
<td style="text-align:right;">
1 (250)
</td>
<td style="text-align:right;">
6 (973)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (3)
</td>
<td style="text-align:right;">
8 (9)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
78 (2,151)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
168 (3,412)
</td>
<td style="text-align:right;">
2 (7)
</td>
<td style="text-align:right;">
196 (2,066)
</td>
<td style="text-align:right;">
62 (583)
</td>
<td style="text-align:right;">
54 (1,042)
</td>
<td style="text-align:right;">
84 (1,311)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (251)
</td>
<td style="text-align:right;">
58 (638)
</td>
<td style="text-align:right;">
153 (1,240)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
778 (10,550)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
29 (941)
</td>
<td style="text-align:right;">
99 (1,517)
</td>
<td style="text-align:right;">
16 (184)
</td>
<td style="text-align:right;">
27 (231)
</td>
<td style="text-align:right;">
2 (26)
</td>
<td style="text-align:right;">
37 (2,424)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (121)
</td>
<td style="text-align:right;">
53 (826)
</td>
<td style="text-align:right;">
154 (2,418)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
418 (8,688)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
51 (5,276)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
56 (1,524)
</td>
<td style="text-align:right;">
104 (11,554)
</td>
<td style="text-align:right;">
34 (2,184)
</td>
<td style="text-align:right;">
32 (1,909)
</td>
<td style="text-align:right;">
1 (4)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (260)
</td>
<td style="text-align:right;">
30 (670)
</td>
<td style="text-align:right;">
70 (2,832)
</td>
<td style="text-align:right;">
1 (251)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (4)
</td>
<td style="text-align:right;">
383 (26,468)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
2 (503)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7 (985)
</td>
<td style="text-align:right;">
2 (506)
</td>
<td style="text-align:right;">
1 (256)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (251)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (1,846)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (4,347)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (3,004)
</td>
<td style="text-align:right;">
4 (1,024)
</td>
<td style="text-align:right;">
2 (520)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (782)
</td>
<td style="text-align:right;">
12 (2,695)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42 (8,025)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
4 (1,001)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (3,226)
</td>
<td style="text-align:right;">
3 (785)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (484)
</td>
<td style="text-align:right;">
1 (255)
</td>
<td style="text-align:right;">
6 (1,572)
</td>
<td style="text-align:right;">
2 (554)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,877)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
3 (562)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (2,190)
</td>
<td style="text-align:right;">
12 (3,065)
</td>
<td style="text-align:right;">
2 (286)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (463)
</td>
<td style="text-align:right;">
4 (872)
</td>
<td style="text-align:right;">
1 (248)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,686)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
6 (1,279)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (2,324)
</td>
<td style="text-align:right;">
3 (798)
</td>
<td style="text-align:right;">
1 (165)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (752)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (814)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (6,132)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (248)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (357)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (605)
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
2 (505)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (2,314)
</td>
<td style="text-align:right;">
1 (207)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (252)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (572)
</td>
<td style="text-align:right;">
2 (482)
</td>
<td style="text-align:right;">
2 (537)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (4,869)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
1 (199)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (157)
</td>
<td style="text-align:right;">
22 (3,386)
</td>
<td style="text-align:right;">
2 (310)
</td>
<td style="text-align:right;">
4 (643)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (656)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (5,351)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (3,197)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (1,272)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (907)
</td>
<td style="text-align:right;">
5 (794)
</td>
<td style="text-align:right;">
1 (161)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (87)
</td>
<td style="text-align:right;">
42 (6,418)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (172)
</td>
<td style="text-align:right;">
20 (2,941)
</td>
<td style="text-align:right;">
7 (1,100)
</td>
<td style="text-align:right;">
3 (476)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (312)
</td>
<td style="text-align:right;">
6 (906)
</td>
<td style="text-align:right;">
4 (620)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
43 (6,527)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (251)
</td>
<td style="text-align:right;">
15 (2,266)
</td>
<td style="text-align:right;">
3 (461)
</td>
<td style="text-align:right;">
4 (608)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (151)
</td>
<td style="text-align:right;">
7 (1,121)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32 (4,858)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (219)
</td>
<td style="text-align:right;">
19 (3,291)
</td>
<td style="text-align:right;">
1 (227)
</td>
<td style="text-align:right;">
1 (199)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (347)
</td>
<td style="text-align:right;">
6 (1,528)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
31 (5,811)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (356)
</td>
<td style="text-align:right;">
1 (155)
</td>
<td style="text-align:right;">
12 (1,505)
</td>
<td style="text-align:right;">
1 (156)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (764)
</td>
<td style="text-align:right;">
4 (741)
</td>
<td style="text-align:right;">
2 (299)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (3,976)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
2 (339)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (89)
</td>
<td style="text-align:right;">
9 (1,310)
</td>
<td style="text-align:right;">
1 (161)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (466)
</td>
<td style="text-align:right;">
6 (1,077)
</td>
<td style="text-align:right;">
4 (569)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (4,011)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
3 (468)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (983)
</td>
<td style="text-align:right;">
1 (158)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (668)
</td>
<td style="text-align:right;">
6 (908)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20 (3,335)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (966)
</td>
<td style="text-align:right;">
2 (312)
</td>
<td style="text-align:right;">
1 (159)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (462)
</td>
<td style="text-align:right;">
6 (956)
</td>
<td style="text-align:right;">
1 (155)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (3,010)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (769)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (121)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
1 (163)
</td>
<td style="text-align:right;">
6 (982)
</td>
<td style="text-align:right;">
3 (450)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (2,637)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
1 (148)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (478)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (802)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
3 (454)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (1,006)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (201)
</td>
<td style="text-align:right;">
22 (3,389)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7 (1,079)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (1,066)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (45)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
4 (700)
</td>
<td style="text-align:right;">
7 (1,053)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (153)
</td>
<td style="text-align:right;">
25 (4,248)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
4 (694)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (767)
</td>
<td style="text-align:right;">
4 (625)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
2 (321)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
1 (153)
</td>
<td style="text-align:right;">
5 (713)
</td>
<td style="text-align:right;">
4 (596)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
2 (301)
</td>
<td style="text-align:right;">
29 (4,620)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (112)
</td>
<td style="text-align:right;">
10 (1,586)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
1 (155)
</td>
<td style="text-align:right;">
2 (305)
</td>
<td style="text-align:right;">
5 (802)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (612)
</td>
<td style="text-align:right;">
25 (3,872)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (45)
</td>
<td style="text-align:right;">
1 (115)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (168)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (458)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (151)
</td>
<td style="text-align:right;">
2 (299)
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
10 (1,386)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (151)
</td>
<td style="text-align:right;">
1 (152)
</td>
<td style="text-align:right;">
1 (157)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (610)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
336 (21,730)
</td>
<td style="text-align:right;font-weight: bold;">
127 (2,282)
</td>
<td style="text-align:right;font-weight: bold;">
282 (5,741)
</td>
<td style="text-align:right;font-weight: bold;">
520 (71,524)
</td>
<td style="text-align:right;font-weight: bold;">
153 (16,857)
</td>
<td style="text-align:right;font-weight: bold;">
213 (17,459)
</td>
<td style="text-align:right;font-weight: bold;">
3 (406)
</td>
<td style="text-align:right;font-weight: bold;">
11 (1,853)
</td>
<td style="text-align:right;font-weight: bold;">
26 (4,868)
</td>
<td style="text-align:right;font-weight: bold;">
186 (10,053)
</td>
<td style="text-align:right;font-weight: bold;">
503 (29,731)
</td>
<td style="text-align:right;font-weight: bold;">
40 (6,959)
</td>
<td style="text-align:right;font-weight: bold;">
5 (854)
</td>
<td style="text-align:right;font-weight: bold;">
18 (2,591)
</td>
<td style="text-align:right;font-weight: bold;">
2,423 (192,908)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"></a>
<a class="sourceLine" id="cb41-2" title="2"><span class="kw">rm</span>(op)</a></code></pre></div>
</div>
<div id="table4-annéeengin_cat" class="section level3">
<h3><span class="header-section-number">8.1.4</span> <code>table4</code>: ~ année–<em>engin_cat</em></h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">engins &lt;-<span class="st"> </span><span class="kw">levels</span>(engins_obs<span class="op">$</span>engin_groupe); engins</a>
<a class="sourceLine" id="cb42-2" title="2"><span class="co">## [1] &quot;Shrimp trawl&quot; &quot;Other trawls&quot; &quot;Seines&quot;       &quot;Gillnets&quot;     &quot;Longlines&quot;   </span></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="co">## [6] &quot;Hand gear&quot;    &quot;Traps&quot;</span></a>
<a class="sourceLine" id="cb42-4" title="4">table4 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">engin_groupe =</span> <span class="kw">c</span>(engins, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-engin à remplir</span></a>
<a class="sourceLine" id="cb42-5" title="5">ajout1 &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-6" title="6"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-7" title="7"><span class="st">          </span><span class="kw">left_join</span>(., engins_obs, <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-8" title="8"><span class="st">          </span><span class="kw">group_by</span>(annee, engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-9" title="9"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb42-10" title="10">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(n_mes, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-11" title="11"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-12" title="12"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb42-13" title="13">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-14" title="14"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-15" title="15"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-16" title="16">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-17" title="17">                    <span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-18" title="18"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb42-19" title="19">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-20" title="20"><span class="st">          </span><span class="kw">group_by</span>(engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-21" title="21"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-22" title="22">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-23" title="23">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-24" title="24"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb42-25" title="25">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-26" title="26"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-27" title="27">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb42-28" title="28">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb42-29" title="29">                    <span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-30" title="30"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb42-31" title="31">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-32" title="32"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb42-33" title="33">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb42-34" title="34">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb42-35" title="35"><span class="kw">dim</span>(table4) <span class="co"># 232 obs et 2 var</span></a>
<a class="sourceLine" id="cb42-36" title="36"><span class="co">## [1] 232   2</span></a>
<a class="sourceLine" id="cb42-37" title="37">table4 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table4, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;engin_groupe&quot;</span>))</a>
<a class="sourceLine" id="cb42-38" title="38"><span class="kw">dim</span>(table4) <span class="co"># 232 obs et 5 var</span></a>
<a class="sourceLine" id="cb42-39" title="39"><span class="co">## [1] 232   5</span></a>
<a class="sourceLine" id="cb42-40" title="40">table4 &lt;-<span class="st"> </span>table4 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;engin_groupe&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb42-41" title="41"><span class="kw">dim</span>(table4) <span class="co"># 29 obs et 9 var</span></a>
<a class="sourceLine" id="cb42-42" title="42"><span class="co">## [1] 29  9</span></a>
<a class="sourceLine" id="cb42-43" title="43">engin &lt;-<span class="st"> </span><span class="kw">names</span>(table4)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table4) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb42-44" title="44"></a>
<a class="sourceLine" id="cb42-45" title="45"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb42-46" title="46">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les fréquences de longueur dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et regroupement d&#39;engin. Les valeurs entre parenthèses sont les effectifs en morues. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb42-47" title="47">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb42-48" title="48">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb42-49" title="49">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and gear grouping. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb42-50" title="50">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb42-51" title="51">}</a>
<a class="sourceLine" id="cb42-52" title="52"></a>
<a class="sourceLine" id="cb42-53" title="53">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table4, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb42-54" title="54"></a>
<a class="sourceLine" id="cb42-55" title="55">table4 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-56" title="56"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-57" title="57"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-58" title="58"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-59" title="59"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-60" title="60"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en gras</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for length frequencies in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and gear grouping. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Shrimp trawl
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Other trawls
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Seines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Gillnets
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longlines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Hand gear
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Traps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
59 (15,557)
</td>
<td style="text-align:right;">
10 (2,451)
</td>
<td style="text-align:right;">
33 (7,188)
</td>
<td style="text-align:right;">
30 (7,021)
</td>
<td style="text-align:right;">
5 (905)
</td>
<td style="text-align:right;">
32 (8,329)
</td>
<td style="text-align:right;">
169 (41,451)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (190)
</td>
<td style="text-align:right;">
4 (947)
</td>
<td style="text-align:right;">
9 (12)
</td>
<td style="text-align:right;">
64 (1,002)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
78 (2,151)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (494)
</td>
<td style="text-align:right;">
350 (3,490)
</td>
<td style="text-align:right;">
389 (6,225)
</td>
<td style="text-align:right;">
5 (99)
</td>
<td style="text-align:right;">
30 (242)
</td>
<td style="text-align:right;">
778 (10,550)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (121)
</td>
<td style="text-align:right;">
9 (1,958)
</td>
<td style="text-align:right;">
249 (3,809)
</td>
<td style="text-align:right;">
130 (2,382)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29 (418)
</td>
<td style="text-align:right;">
418 (8,688)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (264)
</td>
<td style="text-align:right;">
150 (3,056)
</td>
<td style="text-align:right;">
103 (8,377)
</td>
<td style="text-align:right;">
111 (14,552)
</td>
<td style="text-align:right;">
17 (219)
</td>
<td style="text-align:right;">
383 (26,468)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (1,081)
</td>
<td style="text-align:right;">
7 (1,766)
</td>
<td style="text-align:right;">
9 (1,500)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (4,347)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
30 (4,937)
</td>
<td style="text-align:right;">
6 (1,544)
</td>
<td style="text-align:right;">
6 (1,544)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42 (8,025)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (3,279)
</td>
<td style="text-align:right;">
16 (4,012)
</td>
<td style="text-align:right;">
2 (586)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,877)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (286)
</td>
<td style="text-align:right;">
14 (2,605)
</td>
<td style="text-align:right;">
18 (4,361)
</td>
<td style="text-align:right;">
2 (434)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (7,686)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (165)
</td>
<td style="text-align:right;">
9 (1,659)
</td>
<td style="text-align:right;">
18 (4,308)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (6,132)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (605)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (605)
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (1,834)
</td>
<td style="text-align:right;">
13 (3,035)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (4,869)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (189)
</td>
<td style="text-align:right;">
24 (3,715)
</td>
<td style="text-align:right;">
9 (1,447)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (5,351)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29 (4,349)
</td>
<td style="text-align:right;">
12 (1,890)
</td>
<td style="text-align:right;">
1 (179)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42 (6,418)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
27 (4,104)
</td>
<td style="text-align:right;">
16 (2,423)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
43 (6,527)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (3,308)
</td>
<td style="text-align:right;">
10 (1,550)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32 (4,858)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (3,625)
</td>
<td style="text-align:right;">
11 (1,947)
</td>
<td style="text-align:right;">
1 (239)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
31 (5,811)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (2,398)
</td>
<td style="text-align:right;">
9 (1,389)
</td>
<td style="text-align:right;">
1 (189)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
28 (3,976)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
15 (2,323)
</td>
<td style="text-align:right;">
10 (1,535)
</td>
<td style="text-align:right;">
1 (153)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (4,011)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (2,129)
</td>
<td style="text-align:right;">
8 (1,075)
</td>
<td style="text-align:right;">
1 (131)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20 (3,335)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (1,921)
</td>
<td style="text-align:right;">
5 (779)
</td>
<td style="text-align:right;">
2 (310)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (3,010)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (1,443)
</td>
<td style="text-align:right;">
6 (886)
</td>
<td style="text-align:right;">
2 (308)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (2,637)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (1,535)
</td>
<td style="text-align:right;">
12 (1,854)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (3,389)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (1,565)
</td>
<td style="text-align:right;">
15 (2,683)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (4,248)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (1,699)
</td>
<td style="text-align:right;">
17 (2,766)
</td>
<td style="text-align:right;">
1 (155)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29 (4,620)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (1,987)
</td>
<td style="text-align:right;">
12 (1,885)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (3,872)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (312)
</td>
<td style="text-align:right;">
7 (1,074)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (1,386)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (610)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (610)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
</td>
<td style="text-align:right;font-weight: bold;">
61 (15,868)
</td>
<td style="text-align:right;font-weight: bold;">
33 (6,754)
</td>
<td style="text-align:right;font-weight: bold;">
1,111 (69,363)
</td>
<td style="text-align:right;font-weight: bold;">
960 (70,431)
</td>
<td style="text-align:right;font-weight: bold;">
150 (21,284)
</td>
<td style="text-align:right;font-weight: bold;">
108 (9,208)
</td>
<td style="text-align:right;font-weight: bold;">
2,423 (192,908)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="kw">rm</span>(cor, engins)</a></code></pre></div>
</div>
</div>
<div id="âge" class="section level2 tabset">
<h2><span class="header-section-number">8.2</span> Âge</h2>
<div id="table5-annéemois" class="section level3">
<h3><span class="header-section-number">8.2.1</span> <code>table5</code>: ~ année–mois</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">table5 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">mois =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-mois à remplir</span></a>
<a class="sourceLine" id="cb44-2" title="2">ajout1 &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-4" title="4"><span class="st">          </span><span class="kw">group_by</span>(annee, mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-5" title="5"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb44-6" title="6">                    <span class="dt">nb_morues =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">mois =</span> <span class="kw">as.character</span>(mois),</a>
<a class="sourceLine" id="cb44-9" title="9">                 <span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb44-10" title="10">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-11" title="11"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-12" title="12"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-13" title="13">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-14" title="14">                    <span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-15" title="15"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb44-16" title="16">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-17" title="17"><span class="st">          </span><span class="kw">group_by</span>(mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-18" title="18"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-19" title="19">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-20" title="20">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-21" title="21"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb44-22" title="22">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-23" title="23"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-24" title="24">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb44-25" title="25">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb44-26" title="26">                    <span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-27" title="27"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb44-28" title="28">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-29" title="29"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb44-30" title="30">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb44-31" title="31">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb44-32" title="32"><span class="kw">dim</span>(table5) <span class="co"># 377 obs et 2 var</span></a>
<a class="sourceLine" id="cb44-33" title="33"><span class="co">## [1] 377   2</span></a>
<a class="sourceLine" id="cb44-34" title="34">table5 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table5, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;mois&quot;</span>))</a>
<a class="sourceLine" id="cb44-35" title="35"><span class="kw">dim</span>(table5) <span class="co"># 377 obs et 5 var</span></a>
<a class="sourceLine" id="cb44-36" title="36"><span class="co">## [1] 377   5</span></a>
<a class="sourceLine" id="cb44-37" title="37">table5 &lt;-<span class="st"> </span>table5 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;mois&quot;</span>, <span class="dt">names_prefix =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb44-38" title="38"><span class="kw">dim</span>(table5) <span class="co"># 29 obs et 14 var</span></a>
<a class="sourceLine" id="cb44-39" title="39"><span class="co">## [1] 29 14</span></a>
<a class="sourceLine" id="cb44-40" title="40"></a>
<a class="sourceLine" id="cb44-41" title="41"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb44-42" title="42">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Fév.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Avr.&quot;</span>, <span class="st">&quot;Mai&quot;</span>, <span class="st">&quot;Juin&quot;</span>, <span class="st">&quot;Juil.&quot;</span>, <span class="st">&quot;Août&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Déc.&quot;</span>)</a>
<a class="sourceLine" id="cb44-43" title="43">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les lectures d&#39;âge dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et mois. Les valeurs entre parenthèses sont les effectifs en morues. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb44-44" title="44">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb44-45" title="45">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb44-46" title="46">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Feb.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Apr.&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;June&quot;</span>, <span class="st">&quot;July&quot;</span>, <span class="st">&quot;Aug.&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Dec.&quot;</span>)</a>
<a class="sourceLine" id="cb44-47" title="47">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and month. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb44-48" title="48">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb44-49" title="49">}</a>
<a class="sourceLine" id="cb44-50" title="50"></a>
<a class="sourceLine" id="cb44-51" title="51">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table5, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb44-52" title="52"></a>
<a class="sourceLine" id="cb44-53" title="53">table5 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-54" title="54"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb44-55" title="55"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-56" title="56"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-57" title="57"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-58" title="58"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and month. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Jan. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Feb. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Mar. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Apr. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
May
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
June
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
July
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Aug. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sept. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Oct. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Nov. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Dec. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (129)
</td>
<td style="text-align:right;">
4 (99)
</td>
<td style="text-align:right;">
16 (559)
</td>
<td style="text-align:right;">
22 (450)
</td>
<td style="text-align:right;">
18 (376)
</td>
<td style="text-align:right;">
8 (286)
</td>
<td style="text-align:right;">
7 (175)
</td>
<td style="text-align:right;">
16 (440)
</td>
<td style="text-align:right;">
13 (392)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
109 (2,906)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (50)
</td>
<td style="text-align:right;">
2 (74)
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
1 (21)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (26)
</td>
<td style="text-align:right;">
63 (705)
</td>
<td style="text-align:right;">
77 (911)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
33 (301)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
39 (237)
</td>
<td style="text-align:right;">
18 (269)
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
49 (170)
</td>
<td style="text-align:right;">
130 (424)
</td>
<td style="text-align:right;">
122 (528)
</td>
<td style="text-align:right;">
106 (685)
</td>
<td style="text-align:right;">
19 (200)
</td>
<td style="text-align:right;">
5 (32)
</td>
<td style="text-align:right;">
522 (2,887)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (308)
</td>
<td style="text-align:right;">
68 (433)
</td>
<td style="text-align:right;">
57 (409)
</td>
<td style="text-align:right;">
37 (164)
</td>
<td style="text-align:right;">
15 (311)
</td>
<td style="text-align:right;">
7 (98)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
197 (1,723)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (55)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (215)
</td>
<td style="text-align:right;">
11 (265)
</td>
<td style="text-align:right;">
62 (613)
</td>
<td style="text-align:right;">
52 (331)
</td>
<td style="text-align:right;">
39 (198)
</td>
<td style="text-align:right;">
21 (430)
</td>
<td style="text-align:right;">
5 (122)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
199 (2,229)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (45)
</td>
<td style="text-align:right;">
4 (101)
</td>
<td style="text-align:right;">
7 (246)
</td>
<td style="text-align:right;">
6 (164)
</td>
<td style="text-align:right;">
2 (59)
</td>
<td style="text-align:right;">
1 (44)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (659)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (44)
</td>
<td style="text-align:right;">
4 (142)
</td>
<td style="text-align:right;">
12 (349)
</td>
<td style="text-align:right;">
8 (204)
</td>
<td style="text-align:right;">
4 (88)
</td>
<td style="text-align:right;">
5 (157)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (984)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (173)
</td>
<td style="text-align:right;">
2 (63)
</td>
<td style="text-align:right;">
8 (240)
</td>
<td style="text-align:right;">
12 (348)
</td>
<td style="text-align:right;">
6 (143)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
33 (967)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (153)
</td>
<td style="text-align:right;">
5 (204)
</td>
<td style="text-align:right;">
7 (251)
</td>
<td style="text-align:right;">
7 (221)
</td>
<td style="text-align:right;">
5 (175)
</td>
<td style="text-align:right;">
4 (170)
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
33 (1,209)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (146)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (274)
</td>
<td style="text-align:right;">
9 (292)
</td>
<td style="text-align:right;">
3 (92)
</td>
<td style="text-align:right;">
2 (73)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (877)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (39)
</td>
<td style="text-align:right;">
2 (74)
</td>
<td style="text-align:right;">
13 (414)
</td>
<td style="text-align:right;">
2 (68)
</td>
<td style="text-align:right;">
5 (140)
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (768)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (38)
</td>
<td style="text-align:right;">
17 (359)
</td>
<td style="text-align:right;">
3 (86)
</td>
<td style="text-align:right;">
2 (67)
</td>
<td style="text-align:right;">
2 (60)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (610)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (32)
</td>
<td style="text-align:right;">
25 (517)
</td>
<td style="text-align:right;">
6 (141)
</td>
<td style="text-align:right;">
4 (81)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
36 (771)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
2 (70)
</td>
<td style="text-align:right;">
19 (511)
</td>
<td style="text-align:right;">
2 (53)
</td>
<td style="text-align:right;">
8 (175)
</td>
<td style="text-align:right;">
7 (276)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
39 (1,118)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (401)
</td>
<td style="text-align:right;">
6 (247)
</td>
<td style="text-align:right;">
9 (121)
</td>
<td style="text-align:right;">
3 (105)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32 (909)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (396)
</td>
<td style="text-align:right;">
3 (120)
</td>
<td style="text-align:right;">
6 (188)
</td>
<td style="text-align:right;">
4 (150)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (854)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (42)
</td>
<td style="text-align:right;">
9 (269)
</td>
<td style="text-align:right;">
6 (199)
</td>
<td style="text-align:right;">
3 (98)
</td>
<td style="text-align:right;">
2 (67)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (675)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (338)
</td>
<td style="text-align:right;">
4 (132)
</td>
<td style="text-align:right;">
4 (105)
</td>
<td style="text-align:right;">
1 (28)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (634)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (15)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (45)
</td>
<td style="text-align:right;">
9 (249)
</td>
<td style="text-align:right;">
3 (82)
</td>
<td style="text-align:right;">
1 (34)
</td>
<td style="text-align:right;">
1 (28)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
16 (453)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (337)
</td>
<td style="text-align:right;">
2 (77)
</td>
<td style="text-align:right;">
4 (136)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (585)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (281)
</td>
<td style="text-align:right;">
2 (60)
</td>
<td style="text-align:right;">
5 (183)
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (555)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
10 (256)
</td>
<td style="text-align:right;">
2 (79)
</td>
<td style="text-align:right;">
2 (78)
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
5 (193)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (672)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (449)
</td>
<td style="text-align:right;">
4 (142)
</td>
<td style="text-align:right;">
2 (79)
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
4 (152)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (863)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (43)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (104)
</td>
<td style="text-align:right;">
11 (426)
</td>
<td style="text-align:right;">
6 (200)
</td>
<td style="text-align:right;">
6 (213)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (66)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
29 (1,052)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (36)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (426)
</td>
<td style="text-align:right;">
4 (172)
</td>
<td style="text-align:right;">
2 (76)
</td>
<td style="text-align:right;">
6 (244)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (954)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (43)
</td>
<td style="text-align:right;">
1 (38)
</td>
<td style="text-align:right;">
4 (156)
</td>
<td style="text-align:right;">
1 (39)
</td>
<td style="text-align:right;">
2 (76)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (24)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (376)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (42)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (47)
</td>
<td style="text-align:right;">
2 (91)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (180)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
33 (301)
</td>
<td style="text-align:right;font-weight: bold;">
3 (55)
</td>
<td style="text-align:right;font-weight: bold;">
5 (129)
</td>
<td style="text-align:right;font-weight: bold;">
46 (430)
</td>
<td style="text-align:right;font-weight: bold;">
62 (1,870)
</td>
<td style="text-align:right;font-weight: bold;">
78 (2,166)
</td>
<td style="text-align:right;font-weight: bold;">
441 (8,772)
</td>
<td style="text-align:right;font-weight: bold;">
347 (4,644)
</td>
<td style="text-align:right;font-weight: bold;">
292 (3,563)
</td>
<td style="text-align:right;font-weight: bold;">
200 (3,406)
</td>
<td style="text-align:right;font-weight: bold;">
66 (1,308)
</td>
<td style="text-align:right;font-weight: bold;">
68 (737)
</td>
<td style="text-align:right;font-weight: bold;">
1,641 (27,381)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">rm</span>(cor)</a></code></pre></div>
</div>
<div id="table6-annéeopano" class="section level3">
<h3><span class="header-section-number">8.2.2</span> <code>table6</code>: ~ année–OPANO</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">op &lt;-<span class="st"> </span><span class="kw">sort</span>(<span class="kw">unique</span>(bio<span class="op">$</span>opano)); op</a>
<a class="sourceLine" id="cb46-2" title="2"><span class="co">##  [1] &quot;3Pn&quot; &quot;4R&quot;  &quot;4Ra&quot; &quot;4Rb&quot; &quot;4Rc&quot; &quot;4Rd&quot; &quot;4S&quot;  &quot;4Si&quot; &quot;4Ss&quot; &quot;4Sv&quot; &quot;4Sw&quot; &quot;4Sx&quot;</span></a>
<a class="sourceLine" id="cb46-3" title="3"><span class="co">## [13] &quot;4Sy&quot; &quot;4Sz&quot;</span></a>
<a class="sourceLine" id="cb46-4" title="4">table6 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">opano =</span> <span class="kw">c</span>(op, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-opano à remplir</span></a>
<a class="sourceLine" id="cb46-5" title="5">ajout1 &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-6" title="6"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-7" title="7"><span class="st">          </span><span class="kw">group_by</span>(annee, opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-8" title="8"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb46-9" title="9">                    <span class="dt">nb_morues =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-10" title="10"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-11" title="11"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb46-12" title="12">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-13" title="13"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-14" title="14"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-15" title="15">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-16" title="16">                    <span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-17" title="17"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb46-18" title="18">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-19" title="19"><span class="st">          </span><span class="kw">group_by</span>(opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-20" title="20"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-21" title="21">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-22" title="22">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-23" title="23"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb46-24" title="24">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-25" title="25"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-26" title="26">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb46-27" title="27">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb46-28" title="28">                    <span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-29" title="29"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb46-30" title="30">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-31" title="31"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb46-32" title="32">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb46-33" title="33">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb46-34" title="34"><span class="kw">dim</span>(table6) <span class="co"># 435 obs et 2 var</span></a>
<a class="sourceLine" id="cb46-35" title="35"><span class="co">## [1] 435   2</span></a>
<a class="sourceLine" id="cb46-36" title="36">table6 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table6, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;opano&quot;</span>))</a>
<a class="sourceLine" id="cb46-37" title="37"><span class="kw">dim</span>(table6) <span class="co"># 435 obs et 5 var</span></a>
<a class="sourceLine" id="cb46-38" title="38"><span class="co">## [1] 435   5</span></a>
<a class="sourceLine" id="cb46-39" title="39">table6 &lt;-<span class="st"> </span>table6 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;opano&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb46-40" title="40"><span class="kw">dim</span>(table6) <span class="co"># 29 obs et 16 var</span></a>
<a class="sourceLine" id="cb46-41" title="41"><span class="co">## [1] 29 16</span></a>
<a class="sourceLine" id="cb46-42" title="42">op &lt;-<span class="st"> </span><span class="kw">names</span>(table6)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table6) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb46-43" title="43"><span class="kw">names</span>(table6) &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">names</span>(table6), <span class="st">&quot;4R&quot;</span> =<span class="st"> &quot;4Ru&quot;</span>, <span class="st">&quot;4S&quot;</span> =<span class="st"> &quot;4Su&quot;</span>)</a>
<a class="sourceLine" id="cb46-44" title="44"></a>
<a class="sourceLine" id="cb46-45" title="45"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb46-46" title="46">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les lectures d&#39;âge de longueur dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et sous-division OPANO. Les valeurs entre parenthèses sont les effectifs en morues. Le &#39;u&#39; dnas 4Ru et 4Su signifie &#39;non-déterminé&#39;. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb46-47" title="47">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb46-48" title="48">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb46-49" title="49">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and NAFO sub-division. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb46-50" title="50">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb46-51" title="51">}</a>
<a class="sourceLine" id="cb46-52" title="52"></a>
<a class="sourceLine" id="cb46-53" title="53">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table6, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb46-54" title="54"></a>
<a class="sourceLine" id="cb46-55" title="55">table6 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-56" title="56"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-57" title="57"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-58" title="58"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-59" title="59"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-60" title="60"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and NAFO sub-division. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3Pn
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4R
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ra
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rc
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4S
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Si
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ss
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sv
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sw
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sx
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sy
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sz
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
19 (680)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
50 (1,090)
</td>
<td style="text-align:right;">
10 (285)
</td>
<td style="text-align:right;">
12 (385)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (27)
</td>
<td style="text-align:right;">
1 (44)
</td>
<td style="text-align:right;">
4 (108)
</td>
<td style="text-align:right;">
6 (113)
</td>
<td style="text-align:right;">
1 (43)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
4 (94)
</td>
<td style="text-align:right;">
109 (2,906)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
35 (537)
</td>
<td style="text-align:right;">
22 (152)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (4)
</td>
<td style="text-align:right;">
1 (50)
</td>
<td style="text-align:right;">
6 (156)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (3)
</td>
<td style="text-align:right;">
8 (9)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
77 (911)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
151 (1,206)
</td>
<td style="text-align:right;">
2 (6)
</td>
<td style="text-align:right;">
101 (440)
</td>
<td style="text-align:right;">
35 (180)
</td>
<td style="text-align:right;">
19 (88)
</td>
<td style="text-align:right;">
49 (291)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
45 (169)
</td>
<td style="text-align:right;">
119 (466)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
522 (2,887)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
21 (370)
</td>
<td style="text-align:right;">
61 (526)
</td>
<td style="text-align:right;">
12 (70)
</td>
<td style="text-align:right;">
10 (52)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
14 (354)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20 (40)
</td>
<td style="text-align:right;">
59 (311)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
197 (1,723)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
38 (1,057)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
30 (242)
</td>
<td style="text-align:right;">
22 (248)
</td>
<td style="text-align:right;">
12 (113)
</td>
<td style="text-align:right;">
16 (237)
</td>
<td style="text-align:right;">
1 (3)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (55)
</td>
<td style="text-align:right;">
20 (74)
</td>
<td style="text-align:right;">
55 (157)
</td>
<td style="text-align:right;">
1 (39)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (4)
</td>
<td style="text-align:right;">
199 (2,229)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
2 (77)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7 (199)
</td>
<td style="text-align:right;">
2 (85)
</td>
<td style="text-align:right;">
1 (43)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (46)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (209)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (659)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
16 (401)
</td>
<td style="text-align:right;">
4 (153)
</td>
<td style="text-align:right;">
2 (80)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (57)
</td>
<td style="text-align:right;">
10 (293)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (984)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
2 (63)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (482)
</td>
<td style="text-align:right;">
3 (114)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (81)
</td>
<td style="text-align:right;">
1 (38)
</td>
<td style="text-align:right;">
6 (152)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
33 (967)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
2 (78)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (433)
</td>
<td style="text-align:right;">
12 (466)
</td>
<td style="text-align:right;">
2 (72)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (49)
</td>
<td style="text-align:right;">
2 (65)
</td>
<td style="text-align:right;">
1 (46)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
33 (1,209)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
6 (214)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (302)
</td>
<td style="text-align:right;">
3 (120)
</td>
<td style="text-align:right;">
1 (50)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (118)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (73)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (877)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
2 (71)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (390)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (110)
</td>
<td style="text-align:right;">
2 (75)
</td>
<td style="text-align:right;">
2 (48)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (768)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
1 (27)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
15 (322)
</td>
<td style="text-align:right;">
1 (38)
</td>
<td style="text-align:right;">
3 (107)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (81)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (610)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
16 (245)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8 (219)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (145)
</td>
<td style="text-align:right;">
4 (96)
</td>
<td style="text-align:right;">
1 (32)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (34)
</td>
<td style="text-align:right;">
36 (771)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (492)
</td>
<td style="text-align:right;">
7 (238)
</td>
<td style="text-align:right;">
3 (109)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (70)
</td>
<td style="text-align:right;">
6 (127)
</td>
<td style="text-align:right;">
4 (82)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
39 (1,118)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (15)
</td>
<td style="text-align:right;">
15 (363)
</td>
<td style="text-align:right;">
3 (124)
</td>
<td style="text-align:right;">
4 (147)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
7 (223)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32 (909)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (34)
</td>
<td style="text-align:right;">
16 (549)
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (85)
</td>
<td style="text-align:right;">
5 (118)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (854)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
1 (28)
</td>
<td style="text-align:right;">
8 (261)
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (173)
</td>
<td style="text-align:right;">
3 (66)
</td>
<td style="text-align:right;">
2 (83)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
21 (675)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
2 (49)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (29)
</td>
<td style="text-align:right;">
6 (210)
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (101)
</td>
<td style="text-align:right;">
5 (99)
</td>
<td style="text-align:right;">
4 (115)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (634)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
1 (15)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (103)
</td>
<td style="text-align:right;">
1 (45)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (34)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (91)
</td>
<td style="text-align:right;">
6 (165)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
16 (453)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (203)
</td>
<td style="text-align:right;">
2 (72)
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (109)
</td>
<td style="text-align:right;">
6 (129)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19 (585)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (186)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (32)
</td>
<td style="text-align:right;">
1 (31)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
6 (159)
</td>
<td style="text-align:right;">
3 (110)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (555)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
1 (51)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (107)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (142)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
3 (113)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6 (141)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (48)
</td>
<td style="text-align:right;">
21 (672)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7 (269)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (152)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
4 (114)
</td>
<td style="text-align:right;">
7 (253)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (34)
</td>
<td style="text-align:right;">
24 (863)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
4 (144)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (158)
</td>
<td style="text-align:right;">
4 (138)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (1)
</td>
<td style="text-align:right;">
2 (69)
</td>
<td style="text-align:right;">
1 (33)
</td>
<td style="text-align:right;">
1 (43)
</td>
<td style="text-align:right;">
5 (182)
</td>
<td style="text-align:right;">
4 (170)
</td>
<td style="text-align:right;">
1 (42)
</td>
<td style="text-align:right;">
2 (72)
</td>
<td style="text-align:right;">
29 (1,052)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (40)
</td>
<td style="text-align:right;">
10 (407)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (36)
</td>
<td style="text-align:right;">
1 (32)
</td>
<td style="text-align:right;">
2 (84)
</td>
<td style="text-align:right;">
5 (147)
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (167)
</td>
<td style="text-align:right;">
25 (954)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (40)
</td>
<td style="text-align:right;">
1 (41)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (24)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (122)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (39)
</td>
<td style="text-align:right;">
2 (75)
</td>
<td style="text-align:right;">
1 (35)
</td>
<td style="text-align:right;">
10 (376)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (42)
</td>
<td style="text-align:right;">
1 (54)
</td>
<td style="text-align:right;">
1 (37)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (47)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (180)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
287 (4,639)
</td>
<td style="text-align:right;font-weight: bold;">
86 (715)
</td>
<td style="text-align:right;font-weight: bold;">
155 (1,131)
</td>
<td style="text-align:right;font-weight: bold;">
329 (7,677)
</td>
<td style="text-align:right;font-weight: bold;">
84 (2,123)
</td>
<td style="text-align:right;font-weight: bold;">
132 (2,640)
</td>
<td style="text-align:right;font-weight: bold;">
3 (41)
</td>
<td style="text-align:right;font-weight: bold;">
10 (361)
</td>
<td style="text-align:right;font-weight: bold;">
22 (862)
</td>
<td style="text-align:right;font-weight: bold;">
129 (1,632)
</td>
<td style="text-align:right;font-weight: bold;">
346 (3,624)
</td>
<td style="text-align:right;font-weight: bold;">
35 (1,247)
</td>
<td style="text-align:right;font-weight: bold;">
5 (201)
</td>
<td style="text-align:right;font-weight: bold;">
18 (488)
</td>
<td style="text-align:right;font-weight: bold;">
1,641 (27,381)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"></a>
<a class="sourceLine" id="cb47-2" title="2"><span class="kw">rm</span>(op)</a></code></pre></div>
</div>
<div id="table7-annéeengin_cat" class="section level3">
<h3><span class="header-section-number">8.2.3</span> <code>table7</code>: ~ année–<em>engin_cat</em></h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1">engins &lt;-<span class="st"> </span><span class="kw">levels</span>(engins_obs<span class="op">$</span>engin_groupe)</a>
<a class="sourceLine" id="cb48-2" title="2">engins &lt;-<span class="st"> </span>engins[<span class="op">-</span><span class="dv">1</span>] <span class="co"># on enlève les shrimp trawl = aucune morue âgée pour cet engin</span></a>
<a class="sourceLine" id="cb48-3" title="3">table7 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">engin_groupe =</span> <span class="kw">c</span>(engins, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-engin à remplir</span></a>
<a class="sourceLine" id="cb48-4" title="4">ajout1 &lt;-<span class="st"> </span>bio <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-5" title="5"><span class="st">          </span><span class="kw">left_join</span>(., engins_obs, <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>, source <span class="op">==</span><span class="st"> &quot;quai&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-6" title="6"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-7" title="7"><span class="st">          </span><span class="kw">group_by</span>(annee, engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-8" title="8"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">n_distinct</span>(ech_id),</a>
<a class="sourceLine" id="cb48-9" title="9">                    <span class="dt">nb_morues =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-10" title="10"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-11" title="11"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb48-12" title="12">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-13" title="13"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-14" title="14"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-15" title="15">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-16" title="16">                    <span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-17" title="17"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb48-18" title="18">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-19" title="19"><span class="st">          </span><span class="kw">group_by</span>(engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-20" title="20"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-21" title="21">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-22" title="22">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-23" title="23"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb48-24" title="24">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-25" title="25"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">nb_ech =</span> <span class="kw">sum</span>(nb_ech, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-26" title="26">                    <span class="dt">nb_morues =</span> <span class="kw">sum</span>(nb_morues, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb48-27" title="27">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>,</a>
<a class="sourceLine" id="cb48-28" title="28">                    <span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-29" title="29"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb48-30" title="30">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-31" title="31"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">nb_ech =</span> <span class="kw">format</span>(nb_ech, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb48-32" title="32">                <span class="dt">nb_morues =</span> <span class="kw">format</span>(nb_morues, <span class="dt">big.mark =</span> bm, <span class="dt">trim =</span> T),</a>
<a class="sourceLine" id="cb48-33" title="33">                <span class="dt">label =</span> <span class="kw">ifelse</span>(nb_ech <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, <span class="kw">paste0</span>(nb_ech, <span class="st">&quot; (&quot;</span>, nb_morues, <span class="st">&quot;)&quot;</span>)))</a>
<a class="sourceLine" id="cb48-34" title="34"><span class="kw">dim</span>(table7) <span class="co"># 203 obs et 2 var</span></a>
<a class="sourceLine" id="cb48-35" title="35"><span class="co">## [1] 203   2</span></a>
<a class="sourceLine" id="cb48-36" title="36">table7 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table7, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;engin_groupe&quot;</span>))</a>
<a class="sourceLine" id="cb48-37" title="37"><span class="kw">dim</span>(table7) <span class="co"># 203 obs et 5 var</span></a>
<a class="sourceLine" id="cb48-38" title="38"><span class="co">## [1] 232   5</span></a>
<a class="sourceLine" id="cb48-39" title="39">table7 &lt;-<span class="st"> </span>table7 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;engin_groupe&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;label&quot;</span>)</a>
<a class="sourceLine" id="cb48-40" title="40"><span class="kw">dim</span>(table7) <span class="co"># 29 obs et 8 var</span></a>
<a class="sourceLine" id="cb48-41" title="41"><span class="co">## [1] 29  9</span></a>
<a class="sourceLine" id="cb48-42" title="42"></a>
<a class="sourceLine" id="cb48-43" title="43">engin &lt;-<span class="st"> </span><span class="kw">names</span>(table7)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table7) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb48-44" title="44"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb48-45" title="45">  cap &lt;-<span class="st"> &quot;Effectif en échantillons de morues franches collectés pour les fréquences de longueur dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et regroupement d&#39;engins. Les valeurs entre parenthèses sont les effectifs en morues. Source: données du programme d&#39;échantillonnage commercial du MPO.&quot;</span></a>
<a class="sourceLine" id="cb48-46" title="46">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb48-47" title="47">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb48-48" title="48">  cap &lt;-<span class="st"> &quot;Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and gear grouping. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.&quot;</span></a>
<a class="sourceLine" id="cb48-49" title="49">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb48-50" title="50">}</a>
<a class="sourceLine" id="cb48-51" title="51"></a>
<a class="sourceLine" id="cb48-52" title="52">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table7, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb48-53" title="53"></a>
<a class="sourceLine" id="cb48-54" title="54">table7 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-55" title="55"><span class="st">  </span><span class="kw">mutate_all</span>(<span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, x)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-56" title="56"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-57" title="57"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-58" title="58"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-59" title="59"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en gras</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Atlantic cod samples collected for age readings in the commercial fishery of NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and gear grouping. Values in brackets are the number of cods. Source: DFO dockside monitoring program data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Other trawls
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Seines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Gillnets
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longlines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Hand gear
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Traps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
46 (914)
</td>
<td style="text-align:right;">
8 (240)
</td>
<td style="text-align:right;">
19 (619)
</td>
<td style="text-align:right;">
22 (902)
</td>
<td style="text-align:right;">
1 (24)
</td>
<td style="text-align:right;">
13 (207)
</td>
<td style="text-align:right;">
110 (3,301)
</td>
<td style="text-align:right;">
1 (395)
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (130)
</td>
<td style="text-align:right;">
9 (12)
</td>
<td style="text-align:right;">
64 (769)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
78 (1,593)
</td>
<td style="text-align:right;">
1 (682)
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (76)
</td>
<td style="text-align:right;">
219 (798)
</td>
<td style="text-align:right;">
296 (1,994)
</td>
<td style="text-align:right;">
3 (19)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
523 (3,139)
</td>
<td style="text-align:right;">
1 (252)
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (298)
</td>
<td style="text-align:right;">
76 (332)
</td>
<td style="text-align:right;">
86 (761)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (332)
</td>
<td style="text-align:right;">
198 (2,284)
</td>
<td style="text-align:right;">
1 (561)
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
113 (412)
</td>
<td style="text-align:right;">
86 (1,817)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
200 (2,894)
</td>
<td style="text-align:right;">
1 (665)
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (162)
</td>
<td style="text-align:right;">
7 (281)
</td>
<td style="text-align:right;">
9 (216)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (1,352)
</td>
<td style="text-align:right;">
1 (693)
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
23 (590)
</td>
<td style="text-align:right;">
6 (233)
</td>
<td style="text-align:right;">
5 (161)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
35 (1,824)
</td>
<td style="text-align:right;">
1 (840)
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (433)
</td>
<td style="text-align:right;">
13 (479)
</td>
<td style="text-align:right;">
2 (55)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (1,597)
</td>
<td style="text-align:right;">
1 (630)
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2 (72)
</td>
<td style="text-align:right;">
14 (465)
</td>
<td style="text-align:right;">
17 (672)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
34 (1,776)
</td>
<td style="text-align:right;">
1 (567)
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (50)
</td>
<td style="text-align:right;">
9 (255)
</td>
<td style="text-align:right;">
16 (572)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
27 (1,228)
</td>
<td style="text-align:right;">
1 (351)
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1 (742)
</td>
<td style="text-align:right;">
1 (742)
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (291)
</td>
<td style="text-align:right;">
13 (477)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (1,829)
</td>
<td style="text-align:right;">
1 (1,061)
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (376)
</td>
<td style="text-align:right;">
7 (234)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (1,471)
</td>
<td style="text-align:right;">
1 (861)
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
24 (424)
</td>
<td style="text-align:right;">
12 (347)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
37 (1,607)
</td>
<td style="text-align:right;">
1 (836)
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
23 (608)
</td>
<td style="text-align:right;">
16 (510)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
40 (1,959)
</td>
<td style="text-align:right;">
1 (841)
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (520)
</td>
<td style="text-align:right;">
10 (389)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
33 (1,669)
</td>
<td style="text-align:right;">
1 (760)
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
15 (457)
</td>
<td style="text-align:right;">
11 (397)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
27 (1,563)
</td>
<td style="text-align:right;">
1 (709)
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (363)
</td>
<td style="text-align:right;">
9 (312)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (1,092)
</td>
<td style="text-align:right;">
1 (417)
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (338)
</td>
<td style="text-align:right;">
10 (296)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
23 (1,229)
</td>
<td style="text-align:right;">
1 (595)
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7 (214)
</td>
<td style="text-align:right;">
8 (214)
</td>
<td style="text-align:right;">
1 (25)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
17 (1,342)
</td>
<td style="text-align:right;">
1 (889)
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12 (343)
</td>
<td style="text-align:right;">
5 (181)
</td>
<td style="text-align:right;">
2 (61)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20 (1,395)
</td>
<td style="text-align:right;">
1 (810)
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9 (288)
</td>
<td style="text-align:right;">
6 (210)
</td>
<td style="text-align:right;">
2 (57)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18 (1,408)
</td>
<td style="text-align:right;">
1 (853)
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (256)
</td>
<td style="text-align:right;">
11 (416)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
22 (1,536)
</td>
<td style="text-align:right;">
1 (864)
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10 (338)
</td>
<td style="text-align:right;">
14 (525)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
25 (1,772)
</td>
<td style="text-align:right;">
1 (909)
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (405)
</td>
<td style="text-align:right;">
17 (617)
</td>
<td style="text-align:right;">
1 (30)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
30 (1,876)
</td>
<td style="text-align:right;">
1 (824)
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
13 (494)
</td>
<td style="text-align:right;">
12 (460)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
26 (1,713)
</td>
<td style="text-align:right;">
1 (759)
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3 (120)
</td>
<td style="text-align:right;">
7 (256)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
11 (1,127)
</td>
<td style="text-align:right;">
1 (751)
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4 (180)
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5 (976)
</td>
<td style="text-align:right;">
1 (796)
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
46 (914)
</td>
<td style="text-align:right;font-weight: bold;">
28 (866)
</td>
<td style="text-align:right;font-weight: bold;">
717 (9,913)
</td>
<td style="text-align:right;font-weight: bold;">
785 (14,501)
</td>
<td style="text-align:right;font-weight: bold;">
26 (648)
</td>
<td style="text-align:right;font-weight: bold;">
39 (539)
</td>
<td style="text-align:right;font-weight: bold;">
1,669 (47,294)
</td>
<td style="text-align:right;font-weight: bold;">
28 (19,913)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="kw">rm</span>(cor, engins)</a></code></pre></div>
</div>
</div>
<div id="débarquements-1" class="section level2 tabset">
<h2><span class="header-section-number">8.3</span> Débarquements</h2>
<div id="table8-annéemois" class="section level3">
<h3><span class="header-section-number">8.3.1</span> <code>table8</code>: ~ année–mois</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1">table8 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">mois =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-mois à remplir</span></a>
<a class="sourceLine" id="cb50-2" title="2">ajout1 &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-4" title="4"><span class="st">          </span><span class="kw">group_by</span>(annee, mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T) <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-7" title="7"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">mois =</span> <span class="kw">as.character</span>(mois),</a>
<a class="sourceLine" id="cb50-8" title="8">                 <span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb50-9" title="9">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-10" title="10"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-11" title="11"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb50-12" title="12"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-13" title="13"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb50-14" title="14">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-15" title="15"><span class="st">          </span><span class="kw">group_by</span>(mois) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-16" title="16"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb50-17" title="17"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-18" title="18"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb50-19" title="19">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-20" title="20"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb50-21" title="21">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>, </a>
<a class="sourceLine" id="cb50-22" title="22">                    <span class="dt">mois =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-23" title="23"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb50-24" title="24">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4)</a>
<a class="sourceLine" id="cb50-25" title="25"><span class="kw">dim</span>(table8) <span class="co"># 377 obs et 2 var</span></a>
<a class="sourceLine" id="cb50-26" title="26"><span class="co">## [1] 377   2</span></a>
<a class="sourceLine" id="cb50-27" title="27">table8 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table8, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;mois&quot;</span>))</a>
<a class="sourceLine" id="cb50-28" title="28"><span class="kw">dim</span>(table8) <span class="co"># 377 obs et 3 var</span></a>
<a class="sourceLine" id="cb50-29" title="29"><span class="co">## [1] 377   3</span></a>
<a class="sourceLine" id="cb50-30" title="30">table8 &lt;-<span class="st"> </span>table8 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;mois&quot;</span>, <span class="dt">names_prefix =</span> <span class="st">&quot;M&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;catch&quot;</span>)</a>
<a class="sourceLine" id="cb50-31" title="31"><span class="kw">dim</span>(table8) <span class="co"># 29 obs et 14 var</span></a>
<a class="sourceLine" id="cb50-32" title="32"><span class="co">## [1] 29 14</span></a>
<a class="sourceLine" id="cb50-33" title="33"><span class="kw">rm</span>(ajout1, ajout2, ajout3, ajout4, ajout)</a>
<a class="sourceLine" id="cb50-34" title="34"></a>
<a class="sourceLine" id="cb50-35" title="35"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb50-36" title="36">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Fév.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Avr.&quot;</span>, <span class="st">&quot;Mai&quot;</span>, <span class="st">&quot;Juin&quot;</span>, <span class="st">&quot;Juil.&quot;</span>, <span class="st">&quot;Août&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Déc.&quot;</span>)</a>
<a class="sourceLine" id="cb50-37" title="37">  cap &lt;-<span class="st"> &quot;Débarquements reportés (t) de morue franche dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et mois. Source: données ZIFF.&quot;</span></a>
<a class="sourceLine" id="cb50-38" title="38">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb50-39" title="39">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb50-40" title="40">  mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Jan.&quot;</span>, <span class="st">&quot;Feb.&quot;</span>, <span class="st">&quot;Mar.&quot;</span>, <span class="st">&quot;Apr.&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;June&quot;</span>, <span class="st">&quot;July&quot;</span>, <span class="st">&quot;Aug.&quot;</span>, <span class="st">&quot;Sept.&quot;</span>, <span class="st">&quot;Oct.&quot;</span>, <span class="st">&quot;Nov.&quot;</span>, <span class="st">&quot;Dec.&quot;</span>)</a>
<a class="sourceLine" id="cb50-41" title="41">  cap &lt;-<span class="st"> &quot;Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and month. Source: ZIFF data.&quot;</span></a>
<a class="sourceLine" id="cb50-42" title="42">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, mois, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb50-43" title="43">}</a>
<a class="sourceLine" id="cb50-44" title="44"></a>
<a class="sourceLine" id="cb50-45" title="45">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table8, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb50-46" title="46"></a>
<a class="sourceLine" id="cb50-47" title="47">table8 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-48" title="48"><span class="st">  </span><span class="kw">mutate_if</span>(<span class="dt">.predicate =</span> is.numeric, <span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, <span class="kw">format</span>(<span class="kw">round</span>(x, <span class="dv">0</span>), <span class="dt">nsmall =</span> <span class="dv">0</span>, <span class="dt">big.mark =</span> bm))) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb50-49" title="49"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-50" title="50"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-51" title="51"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-52" title="52"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and month. Source: ZIFF data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Jan. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Feb. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Mar. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Apr. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
May
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
June
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
July
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Aug. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Sept. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Oct. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Nov. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Dec. 
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
1,255
</td>
<td style="text-align:right;">
1,244
</td>
<td style="text-align:right;">
1,489
</td>
<td style="text-align:right;">
4,350
</td>
<td style="text-align:right;">
3,811
</td>
<td style="text-align:right;">
2,234
</td>
<td style="text-align:right;">
1,119
</td>
<td style="text-align:right;">
1,088
</td>
<td style="text-align:right;">
1,173
</td>
<td style="text-align:right;">
629
</td>
<td style="text-align:right;">
18,452
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
206
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
537
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
185
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
150
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
317
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
357
</td>
<td style="text-align:right;">
255
</td>
<td style="text-align:right;">
1,189
</td>
<td style="text-align:right;">
962
</td>
<td style="text-align:right;">
815
</td>
<td style="text-align:right;">
1,038
</td>
<td style="text-align:right;">
145
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
4,792
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
246
</td>
<td style="text-align:right;">
908
</td>
<td style="text-align:right;">
1,051
</td>
<td style="text-align:right;">
418
</td>
<td style="text-align:right;">
552
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3,229
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
870
</td>
<td style="text-align:right;">
1,985
</td>
<td style="text-align:right;">
1,458
</td>
<td style="text-align:right;">
1,031
</td>
<td style="text-align:right;">
1,014
</td>
<td style="text-align:right;">
395
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
6,890
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
132
</td>
<td style="text-align:right;">
102
</td>
<td style="text-align:right;">
538
</td>
<td style="text-align:right;">
907
</td>
<td style="text-align:right;">
1,251
</td>
<td style="text-align:right;">
1,533
</td>
<td style="text-align:right;">
1,087
</td>
<td style="text-align:right;">
775
</td>
<td style="text-align:right;">
398
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
6,857
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
455
</td>
<td style="text-align:right;">
518
</td>
<td style="text-align:right;">
1,847
</td>
<td style="text-align:right;">
1,269
</td>
<td style="text-align:right;">
1,339
</td>
<td style="text-align:right;">
865
</td>
<td style="text-align:right;">
293
</td>
<td style="text-align:right;">
125
</td>
<td style="text-align:right;">
6,950
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
173
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
2,519
</td>
<td style="text-align:right;">
1,484
</td>
<td style="text-align:right;">
843
</td>
<td style="text-align:right;">
869
</td>
<td style="text-align:right;">
393
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
6,529
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
118
</td>
<td style="text-align:right;">
131
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
389
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
1,887
</td>
<td style="text-align:right;">
205
</td>
<td style="text-align:right;">
537
</td>
<td style="text-align:right;">
356
</td>
<td style="text-align:right;">
207
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
3,274
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
2,434
</td>
<td style="text-align:right;">
628
</td>
<td style="text-align:right;">
774
</td>
<td style="text-align:right;">
473
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4,461
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
3,285
</td>
<td style="text-align:right;">
591
</td>
<td style="text-align:right;">
645
</td>
<td style="text-align:right;">
298
</td>
<td style="text-align:right;">
669
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
5,652
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
132
</td>
<td style="text-align:right;">
3,711
</td>
<td style="text-align:right;">
447
</td>
<td style="text-align:right;">
1,126
</td>
<td style="text-align:right;">
578
</td>
<td style="text-align:right;">
447
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6,483
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
117
</td>
<td style="text-align:right;">
2,973
</td>
<td style="text-align:right;">
924
</td>
<td style="text-align:right;">
1,240
</td>
<td style="text-align:right;">
551
</td>
<td style="text-align:right;">
301
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6,158
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
176
</td>
<td style="text-align:right;">
1,691
</td>
<td style="text-align:right;">
693
</td>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
696
</td>
<td style="text-align:right;">
687
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
4,700
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
1,362
</td>
<td style="text-align:right;">
882
</td>
<td style="text-align:right;">
556
</td>
<td style="text-align:right;">
499
</td>
<td style="text-align:right;">
185
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3,552
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
1,006
</td>
<td style="text-align:right;">
163
</td>
<td style="text-align:right;">
315
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1,775
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
671
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
296
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
131
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1,303
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
699
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
220
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
147
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1,222
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
644
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
344
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
1,262
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
731
</td>
<td style="text-align:right;">
138
</td>
<td style="text-align:right;">
187
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
137
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1,267
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
840
</td>
<td style="text-align:right;">
140
</td>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
154
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1,373
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
903
</td>
<td style="text-align:right;">
706
</td>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
206
</td>
<td style="text-align:right;">
129
</td>
<td style="text-align:right;">
2,671
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
861
</td>
<td style="text-align:right;">
774
</td>
<td style="text-align:right;">
323
</td>
<td style="text-align:right;">
221
</td>
<td style="text-align:right;">
268
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
2,578
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
304
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
168
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
775
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
382
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
123
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
662
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
227
</td>
<td style="text-align:right;font-weight: bold;">
283
</td>
<td style="text-align:right;font-weight: bold;">
1,494
</td>
<td style="text-align:right;font-weight: bold;">
1,601
</td>
<td style="text-align:right;font-weight: bold;">
3,496
</td>
<td style="text-align:right;font-weight: bold;">
8,195
</td>
<td style="text-align:right;font-weight: bold;">
38,200
</td>
<td style="text-align:right;font-weight: bold;">
17,096
</td>
<td style="text-align:right;font-weight: bold;">
15,245
</td>
<td style="text-align:right;font-weight: bold;">
10,277
</td>
<td style="text-align:right;font-weight: bold;">
6,853
</td>
<td style="text-align:right;font-weight: bold;">
1,328
</td>
<td style="text-align:right;font-weight: bold;">
104,294
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">rm</span>(cor)</a></code></pre></div>
</div>
<div id="table9-annéeopano" class="section level3">
<h3><span class="header-section-number">8.3.2</span> <code>table9</code>: ~ année–OPANO</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">op &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(opano) <span class="op">%&gt;%</span><span class="st"> </span>unique <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sort</span>()</a>
<a class="sourceLine" id="cb52-2" title="2">table9 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">opano =</span> <span class="kw">c</span>(op, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-opano à remplir</span></a>
<a class="sourceLine" id="cb52-3" title="3">ajout1 &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-4" title="4"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="st">          </span><span class="kw">group_by</span>(annee, opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-6" title="6"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T) <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb52-7" title="7"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-8" title="8"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb52-9" title="9">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-10" title="10"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-11" title="11"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb52-12" title="12"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-13" title="13"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb52-14" title="14">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb52-15" title="15"><span class="st">          </span><span class="kw">group_by</span>(opano) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-16" title="16"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb52-17" title="17"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-18" title="18"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb52-19" title="19">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-20" title="20"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb52-21" title="21">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>, </a>
<a class="sourceLine" id="cb52-22" title="22">                    <span class="dt">opano =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-23" title="23"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb52-24" title="24">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4)</a>
<a class="sourceLine" id="cb52-25" title="25"><span class="kw">dim</span>(table9) <span class="co"># 435 obs et 2 var</span></a>
<a class="sourceLine" id="cb52-26" title="26"><span class="co">## [1] 435   2</span></a>
<a class="sourceLine" id="cb52-27" title="27">table9 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table9, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;opano&quot;</span>))</a>
<a class="sourceLine" id="cb52-28" title="28"><span class="kw">dim</span>(table9) <span class="co"># 435 obs et 3 var</span></a>
<a class="sourceLine" id="cb52-29" title="29"><span class="co">## [1] 435   3</span></a>
<a class="sourceLine" id="cb52-30" title="30">table9 &lt;-<span class="st"> </span>table9 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;opano&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;catch&quot;</span>)</a>
<a class="sourceLine" id="cb52-31" title="31"><span class="kw">dim</span>(table9) <span class="co"># 29 obs et 16 var</span></a>
<a class="sourceLine" id="cb52-32" title="32"><span class="co">## [1] 29 16</span></a>
<a class="sourceLine" id="cb52-33" title="33"><span class="kw">rm</span>(ajout1, ajout2, ajout3, ajout4, ajout)</a>
<a class="sourceLine" id="cb52-34" title="34">op &lt;-<span class="st"> </span><span class="kw">names</span>(table9)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table9)<span class="op">-</span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb52-35" title="35"></a>
<a class="sourceLine" id="cb52-36" title="36"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb52-37" title="37">  cap &lt;-<span class="st"> &quot;Débarquements reportés (t) de morue franche dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et zone unitaire de l&#39;OPANO. Source: données ZIFF.&quot;</span></a>
<a class="sourceLine" id="cb52-38" title="38">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb52-39" title="39">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb52-40" title="40">  cap &lt;-<span class="st"> &quot;Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and NAFO sub-division. Source: ZIFF data.&quot;</span></a>
<a class="sourceLine" id="cb52-41" title="41">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, op, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb52-42" title="42">}</a>
<a class="sourceLine" id="cb52-43" title="43"></a>
<a class="sourceLine" id="cb52-44" title="44">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table9, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb52-45" title="45"></a>
<a class="sourceLine" id="cb52-46" title="46">table9 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-47" title="47"><span class="st">  </span><span class="kw">mutate_if</span>(<span class="dt">.predicate =</span> is.numeric, <span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, <span class="kw">format</span>(<span class="kw">round</span>(x, <span class="dv">0</span>), <span class="dt">nsmall =</span> <span class="dv">0</span>, <span class="dt">big.mark =</span> bm))) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb52-48" title="48"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-49" title="49"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-50" title="50"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-51" title="51"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en foncé</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and NAFO sub-division. Source: ZIFF data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
3Pn
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ra
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rb
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rc
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Rd
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ru
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Si
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Ss
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Su
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sv
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sw
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sx
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sy
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
4Sz
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
3,194
</td>
<td style="text-align:right;">
4,071
</td>
<td style="text-align:right;">
5,679
</td>
<td style="text-align:right;">
2,021
</td>
<td style="text-align:right;">
1,723
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
340
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
654
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
18,452
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
196
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
114
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
537
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
185
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
123
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
317
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
2,006
</td>
<td style="text-align:right;">
806
</td>
<td style="text-align:right;">
600
</td>
<td style="text-align:right;">
593
</td>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
327
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4,792
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
877
</td>
<td style="text-align:right;">
387
</td>
<td style="text-align:right;">
367
</td>
<td style="text-align:right;">
316
</td>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
526
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3,229
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
1,165
</td>
<td style="text-align:right;">
1,551
</td>
<td style="text-align:right;">
1,478
</td>
<td style="text-align:right;">
908
</td>
<td style="text-align:right;">
944
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
632
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6,890
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
1,478
</td>
<td style="text-align:right;">
1,215
</td>
<td style="text-align:right;">
1,469
</td>
<td style="text-align:right;">
772
</td>
<td style="text-align:right;">
865
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
714
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6,857
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
1,740
</td>
<td style="text-align:right;">
1,311
</td>
<td style="text-align:right;">
1,267
</td>
<td style="text-align:right;">
992
</td>
<td style="text-align:right;">
722
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
252
</td>
<td style="text-align:right;">
570
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6,950
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
1,713
</td>
<td style="text-align:right;">
1,172
</td>
<td style="text-align:right;">
1,377
</td>
<td style="text-align:right;">
795
</td>
<td style="text-align:right;">
591
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
123
</td>
<td style="text-align:right;">
686
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6,529
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
389
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
783
</td>
<td style="text-align:right;">
595
</td>
<td style="text-align:right;">
642
</td>
<td style="text-align:right;">
297
</td>
<td style="text-align:right;">
350
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
442
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3,274
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
976
</td>
<td style="text-align:right;">
701
</td>
<td style="text-align:right;">
437
</td>
<td style="text-align:right;">
770
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
278
</td>
<td style="text-align:right;">
293
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4,461
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
1,208
</td>
<td style="text-align:right;">
1,196
</td>
<td style="text-align:right;">
680
</td>
<td style="text-align:right;">
434
</td>
<td style="text-align:right;">
1,168
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
297
</td>
<td style="text-align:right;">
427
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5,652
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
1,081
</td>
<td style="text-align:right;">
1,575
</td>
<td style="text-align:right;">
939
</td>
<td style="text-align:right;">
748
</td>
<td style="text-align:right;">
914
</td>
<td style="text-align:right;">
369
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
146
</td>
<td style="text-align:right;">
668
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6,483
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
1,131
</td>
<td style="text-align:right;">
1,704
</td>
<td style="text-align:right;">
973
</td>
<td style="text-align:right;">
665
</td>
<td style="text-align:right;">
829
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
194
</td>
<td style="text-align:right;">
610
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6,158
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
1,357
</td>
<td style="text-align:right;">
922
</td>
<td style="text-align:right;">
799
</td>
<td style="text-align:right;">
424
</td>
<td style="text-align:right;">
593
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
183
</td>
<td style="text-align:right;">
380
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4,700
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
705
</td>
<td style="text-align:right;">
1,135
</td>
<td style="text-align:right;">
546
</td>
<td style="text-align:right;">
270
</td>
<td style="text-align:right;">
224
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
276
</td>
<td style="text-align:right;">
346
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3,552
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
316
</td>
<td style="text-align:right;">
510
</td>
<td style="text-align:right;">
188
</td>
<td style="text-align:right;">
143
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
131
</td>
<td style="text-align:right;">
239
</td>
<td style="text-align:right;">
123
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1,775
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
187
</td>
<td style="text-align:right;">
372
</td>
<td style="text-align:right;">
188
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
181
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1,303
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
185
</td>
<td style="text-align:right;">
366
</td>
<td style="text-align:right;">
145
</td>
<td style="text-align:right;">
151
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
163
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1,222
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
153
</td>
<td style="text-align:right;">
492
</td>
<td style="text-align:right;">
138
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
167
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1,262
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
155
</td>
<td style="text-align:right;">
422
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
122
</td>
<td style="text-align:right;">
197
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
1,267
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
174
</td>
<td style="text-align:right;">
510
</td>
<td style="text-align:right;">
130
</td>
<td style="text-align:right;">
79
</td>
<td style="text-align:right;">
81
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
115
</td>
<td style="text-align:right;">
150
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
1,373
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
345
</td>
<td style="text-align:right;">
1,202
</td>
<td style="text-align:right;">
298
</td>
<td style="text-align:right;">
230
</td>
<td style="text-align:right;">
135
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
194
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
2,671
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
439
</td>
<td style="text-align:right;">
1,239
</td>
<td style="text-align:right;">
206
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
91
</td>
<td style="text-align:right;">
247
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
2,578
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
154
</td>
<td style="text-align:right;">
249
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
775
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
183
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
91
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
662
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
21,910
</td>
<td style="text-align:right;font-weight: bold;">
24,281
</td>
<td style="text-align:right;font-weight: bold;">
19,274
</td>
<td style="text-align:right;font-weight: bold;">
10,843
</td>
<td style="text-align:right;font-weight: bold;">
11,611
</td>
<td style="text-align:right;font-weight: bold;">
654
</td>
<td style="text-align:right;font-weight: bold;">
298
</td>
<td style="text-align:right;font-weight: bold;">
699
</td>
<td style="text-align:right;font-weight: bold;">
90
</td>
<td style="text-align:right;font-weight: bold;">
3,632
</td>
<td style="text-align:right;font-weight: bold;">
9,250
</td>
<td style="text-align:right;font-weight: bold;">
932
</td>
<td style="text-align:right;font-weight: bold;">
267
</td>
<td style="text-align:right;font-weight: bold;">
552
</td>
<td style="text-align:right;font-weight: bold;">
104,294
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1"><span class="kw">rm</span>(cor)</a></code></pre></div>
</div>
<div id="table10-annéeengin_cat" class="section level3">
<h3><span class="header-section-number">8.3.3</span> <code>table10</code>: ~ année–<em>engin_cat</em></h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">dim</span>(catch) <span class="co"># 593461 obs et 13 var</span></a>
<a class="sourceLine" id="cb54-2" title="2"><span class="co">## [1] 593461     13</span></a>
<a class="sourceLine" id="cb54-3" title="3">catch &lt;-<span class="st"> </span><span class="kw">left_join</span>(catch, engins_deb <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(engin, engin_groupe), <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>)</a>
<a class="sourceLine" id="cb54-4" title="4"><span class="kw">dim</span>(catch) <span class="co"># 593461 obs et 14 var</span></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="co">## [1] 593461     14</span></a>
<a class="sourceLine" id="cb54-6" title="6">engins &lt;-<span class="st"> </span><span class="kw">levels</span>(catch<span class="op">$</span>engin_groupe)</a>
<a class="sourceLine" id="cb54-7" title="7">table10 &lt;-<span class="st"> </span><span class="kw">expand_grid</span>(<span class="dt">annee =</span> <span class="kw">c</span>(my_year, <span class="st">&quot;Total&quot;</span>), <span class="dt">engin_groupe =</span> <span class="kw">c</span>(engins, <span class="st">&quot;Total&quot;</span>)) <span class="co"># cellules année-engins à remplir</span></a>
<a class="sourceLine" id="cb54-8" title="8">ajout1 &lt;-<span class="st"> </span>catch <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-9" title="9"><span class="st">          </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-10" title="10"><span class="st">          </span><span class="kw">group_by</span>(annee, engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-11" title="11"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T) <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb54-12" title="12"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-13" title="13"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="kw">as.character</span>(annee))</a>
<a class="sourceLine" id="cb54-14" title="14">ajout2 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb54-15" title="15"><span class="st">          </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-16" title="16"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb54-17" title="17"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-18" title="18"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb54-19" title="19">ajout3 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb54-20" title="20"><span class="st">          </span><span class="kw">group_by</span>(engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-21" title="21"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># en tonnes</span></a>
<a class="sourceLine" id="cb54-22" title="22"><span class="st">          </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-23" title="23"><span class="st">          </span><span class="kw">mutate</span>(<span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb54-24" title="24">ajout4 &lt;-<span class="st"> </span>ajout1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-25" title="25"><span class="st">          </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(catch, <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb54-26" title="26">                    <span class="dt">annee =</span> <span class="st">&quot;Total&quot;</span>, </a>
<a class="sourceLine" id="cb54-27" title="27">                    <span class="dt">engin_groupe =</span> <span class="st">&quot;Total&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-28" title="28"><span class="st">          </span>ungroup</a>
<a class="sourceLine" id="cb54-29" title="29">ajout &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(ajout1, ajout2, ajout3, ajout4)</a>
<a class="sourceLine" id="cb54-30" title="30"><span class="kw">dim</span>(table10) <span class="co"># 261 obs et 2 var</span></a>
<a class="sourceLine" id="cb54-31" title="31"><span class="co">## [1] 261   2</span></a>
<a class="sourceLine" id="cb54-32" title="32">table10 &lt;-<span class="st"> </span><span class="kw">full_join</span>(table10, ajout, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;annee&quot;</span>, <span class="st">&quot;engin_groupe&quot;</span>))</a>
<a class="sourceLine" id="cb54-33" title="33"><span class="kw">dim</span>(table10) <span class="co"># 261 obs et 3 var</span></a>
<a class="sourceLine" id="cb54-34" title="34"><span class="co">## [1] 261   3</span></a>
<a class="sourceLine" id="cb54-35" title="35">table10 &lt;-<span class="st"> </span>table10 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> <span class="st">&quot;annee&quot;</span>, <span class="dt">names_from =</span> <span class="st">&quot;engin_groupe&quot;</span>, <span class="dt">values_from =</span> <span class="st">&quot;catch&quot;</span>)</a>
<a class="sourceLine" id="cb54-36" title="36"><span class="kw">dim</span>(table10) <span class="co"># 29 obs et 10 var</span></a>
<a class="sourceLine" id="cb54-37" title="37"><span class="co">## [1] 29 10</span></a>
<a class="sourceLine" id="cb54-38" title="38"><span class="kw">rm</span>(ajout1, ajout2, ajout3, ajout4, ajout)</a>
<a class="sourceLine" id="cb54-39" title="39">engin &lt;-<span class="st"> </span><span class="kw">names</span>(table10)[<span class="dv">2</span><span class="op">:</span>(<span class="kw">ncol</span>(table10) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb54-40" title="40"></a>
<a class="sourceLine" id="cb54-41" title="41"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb54-42" title="42">  cap &lt;-<span class="st"> &quot;Débarquements reportés (t) de morue franche dans la pêche commerciale des Divisions OPANO 3Pn--4RS pour la période 1993--2020, ventilé par année et regroupement d&#39;engins. Source: données ZIFF.&quot;</span></a>
<a class="sourceLine" id="cb54-43" title="43">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Année&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb54-44" title="44">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb54-45" title="45">  cap &lt;-<span class="st"> &quot;Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn--4RS for the period 1993--2020, by year and gear grouping. Source: ZIFF data.&quot;</span></a>
<a class="sourceLine" id="cb54-46" title="46">  col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Year&quot;</span>, engin, <span class="st">&quot;Total&quot;</span>)</a>
<a class="sourceLine" id="cb54-47" title="47">}</a>
<a class="sourceLine" id="cb54-48" title="48"></a>
<a class="sourceLine" id="cb54-49" title="49">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(table10, annee <span class="op">==</span><span class="st"> &quot;Total&quot;</span>))</a>
<a class="sourceLine" id="cb54-50" title="50"></a>
<a class="sourceLine" id="cb54-51" title="51">table10 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-52" title="52"><span class="st">  </span><span class="kw">mutate_if</span>(<span class="dt">.predicate =</span> is.numeric, <span class="dt">.funs =</span> <span class="cf">function</span>(x) <span class="kw">ifelse</span>(<span class="kw">is.na</span>(x), <span class="st">&quot;&quot;</span>, <span class="kw">format</span>(<span class="kw">round</span>(x, <span class="dv">0</span>), <span class="dt">nsmall =</span> <span class="dv">0</span>, <span class="dt">big.mark =</span> bm))) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb54-53" title="53"><span class="st">  </span><span class="kw">kable</span>(<span class="dt">caption =</span> cap, <span class="dt">col.names =</span> col_names, <span class="dt">longtable =</span> F, <span class="dt">align =</span> <span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="kw">rep</span>(<span class="st">&quot;r&quot;</span>, <span class="kw">ncol</span>(.)<span class="op">-</span><span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-54" title="54"><span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="kw">c</span>(<span class="st">&quot;hover&quot;</span>, <span class="st">&quot;striped&quot;</span>, <span class="st">&quot;condensed&quot;</span>), <span class="dt">full_width =</span> F, <span class="dt">fixed_thead =</span> T) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-55" title="55"><span class="st">  </span><span class="kw">landscape</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-56" title="56"><span class="st">  </span><span class="kw">row_spec</span>(<span class="dt">row =</span> cor, <span class="dt">bold =</span> T) <span class="co"># ligne total en gras</span></a></code></pre></div>
<table class="table table-hover table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Reported landings (t) of Atlantic cod in the commercial fishery of the NAFO Divisions 3Pn–4RS for the period 1993–2020, by year and gear grouping. Source: ZIFF data.
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
Year
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Shrimp trawl
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Other trawls
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Seines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Gillnets
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Longlines
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Hand gear
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Traps
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Others / unknown
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1993
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:right;">
10,054
</td>
<td style="text-align:right;">
190
</td>
<td style="text-align:right;">
2,501
</td>
<td style="text-align:right;">
2,124
</td>
<td style="text-align:right;">
1,041
</td>
<td style="text-align:right;">
2,458
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
18,452
</td>
</tr>
<tr>
<td style="text-align:left;">
1994
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
154
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
229
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
537
</td>
</tr>
<tr>
<td style="text-align:left;">
1995
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
185
</td>
</tr>
<tr>
<td style="text-align:left;">
1996
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
317
</td>
</tr>
<tr>
<td style="text-align:left;">
1997
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
538
</td>
<td style="text-align:right;">
3,857
</td>
<td style="text-align:right;">
265
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4,792
</td>
</tr>
<tr>
<td style="text-align:left;">
1998
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
629
</td>
<td style="text-align:right;">
2,302
</td>
<td style="text-align:right;">
261
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3,229
</td>
</tr>
<tr>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
3,401
</td>
<td style="text-align:right;">
2,475
</td>
<td style="text-align:right;">
968
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6,890
</td>
</tr>
<tr>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
3,046
</td>
<td style="text-align:right;">
3,167
</td>
<td style="text-align:right;">
557
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6,857
</td>
</tr>
<tr>
<td style="text-align:left;">
2001
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
2,020
</td>
<td style="text-align:right;">
3,963
</td>
<td style="text-align:right;">
864
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6,950
</td>
</tr>
<tr>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
2,672
</td>
<td style="text-align:right;">
3,155
</td>
<td style="text-align:right;">
634
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6,529
</td>
</tr>
<tr>
<td style="text-align:left;">
2003
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
161
</td>
<td style="text-align:right;">
191
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
389
</td>
</tr>
<tr>
<td style="text-align:left;">
2004
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
1,482
</td>
<td style="text-align:right;">
1,408
</td>
<td style="text-align:right;">
310
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3,274
</td>
</tr>
<tr>
<td style="text-align:left;">
2005
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
2,285
</td>
<td style="text-align:right;">
1,855
</td>
<td style="text-align:right;">
229
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4,461
</td>
</tr>
<tr>
<td style="text-align:left;">
2006
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
2,685
</td>
<td style="text-align:right;">
2,655
</td>
<td style="text-align:right;">
189
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
5,652
</td>
</tr>
<tr>
<td style="text-align:left;">
2007
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
3,430
</td>
<td style="text-align:right;">
2,868
</td>
<td style="text-align:right;">
154
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6,483
</td>
</tr>
<tr>
<td style="text-align:left;">
2008
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
3,027
</td>
<td style="text-align:right;">
2,889
</td>
<td style="text-align:right;">
215
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
6,158
</td>
</tr>
<tr>
<td style="text-align:left;">
2009
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
1,852
</td>
<td style="text-align:right;">
2,615
</td>
<td style="text-align:right;">
207
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
4,700
</td>
</tr>
<tr>
<td style="text-align:left;">
2010
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1,710
</td>
<td style="text-align:right;">
1,563
</td>
<td style="text-align:right;">
263
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
3,552
</td>
</tr>
<tr>
<td style="text-align:left;">
2011
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
1,004
</td>
<td style="text-align:right;">
671
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,775
</td>
</tr>
<tr>
<td style="text-align:left;">
2012
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
820
</td>
<td style="text-align:right;">
403
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,303
</td>
</tr>
<tr>
<td style="text-align:left;">
2013
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
670
</td>
<td style="text-align:right;">
415
</td>
<td style="text-align:right;">
131
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,222
</td>
</tr>
<tr>
<td style="text-align:left;">
2014
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
785
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
129
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,262
</td>
</tr>
<tr>
<td style="text-align:left;">
2015
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
872
</td>
<td style="text-align:right;">
342
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,267
</td>
</tr>
<tr>
<td style="text-align:left;">
2016
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
866
</td>
<td style="text-align:right;">
433
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
1,373
</td>
</tr>
<tr>
<td style="text-align:left;">
2017
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1,747
</td>
<td style="text-align:right;">
744
</td>
<td style="text-align:right;">
171
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2,671
</td>
</tr>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1,793
</td>
<td style="text-align:right;">
711
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
2,578
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
442
</td>
<td style="text-align:right;">
283
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
775
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
422
</td>
<td style="text-align:right;">
207
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
</td>
<td style="text-align:right;">
662
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Total
</td>
<td style="text-align:right;font-weight: bold;">
95
</td>
<td style="text-align:right;font-weight: bold;">
10,576
</td>
<td style="text-align:right;font-weight: bold;">
713
</td>
<td style="text-align:right;font-weight: bold;">
41,124
</td>
<td style="text-align:right;font-weight: bold;">
41,876
</td>
<td style="text-align:right;font-weight: bold;">
7,211
</td>
<td style="text-align:right;font-weight: bold;">
2,578
</td>
<td style="text-align:right;font-weight: bold;">
120
</td>
<td style="text-align:right;font-weight: bold;">
104,294
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="kw">rm</span>(cor, engins)</a></code></pre></div>
</div>
</div>
</div>
<div id="figures" class="section level1">
<h1><span class="header-section-number">9</span> Figures</h1>
<div id="graph2-fl---regroupements-dengins" class="section level2">
<h2><span class="header-section-number">9.1</span> <code>graph2</code>: FL - regroupements d’engins</h2>
<p>Pour chaque regroupement d’engins, je veux montrer les FL.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb56-2" title="2">  combi &lt;-<span class="st"> &quot;Combiné&quot;</span></a>
<a class="sourceLine" id="cb56-3" title="3">  lab1 &lt;-<span class="st"> &quot;Longueur (cm)&quot;</span></a>
<a class="sourceLine" id="cb56-4" title="4">  lab2 &lt;-<span class="st"> &quot;Proportion&quot;</span></a>
<a class="sourceLine" id="cb56-5" title="5">  text1 &lt;-<span class="st"> &quot; É = &quot;</span></a>
<a class="sourceLine" id="cb56-6" title="6">  text2 &lt;-<span class="st"> &quot; P)&quot;</span></a>
<a class="sourceLine" id="cb56-7" title="7">} <span class="cf">else</span> <span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;en&quot;</span>){</a>
<a class="sourceLine" id="cb56-8" title="8">  combi &lt;-<span class="st"> &quot;Combined&quot;</span></a>
<a class="sourceLine" id="cb56-9" title="9">  lab1 &lt;-<span class="st"> &quot;Length (cm)&quot;</span></a>
<a class="sourceLine" id="cb56-10" title="10">  lab2 &lt;-<span class="st"> &quot;Proportion&quot;</span></a>
<a class="sourceLine" id="cb56-11" title="11">  text1 &lt;-<span class="st"> &quot; S = &quot;</span></a>
<a class="sourceLine" id="cb56-12" title="12">  text2 &lt;-<span class="st"> &quot; F)&quot;</span></a>
<a class="sourceLine" id="cb56-13" title="13">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb56-14" title="14">  <span class="co"># à définir</span></a>
<a class="sourceLine" id="cb56-15" title="15">}</a>
<a class="sourceLine" id="cb56-16" title="16"></a>
<a class="sourceLine" id="cb56-17" title="17">g &lt;-<span class="st"> </span><span class="kw">left_join</span>(lf, engins_obs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(engin, engin_groupe), <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-18" title="18"><span class="st">     </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-19" title="19"><span class="st">     </span><span class="kw">pull</span>(engin_groupe) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.character</span>(.) <span class="op">%&gt;%</span><span class="st"> </span>unique    </a>
<a class="sourceLine" id="cb56-20" title="20"></a>
<a class="sourceLine" id="cb56-21" title="21">n_id &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-22" title="22"><span class="st">        </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-23" title="23"><span class="st">        </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-24" title="24"><span class="st">        </span><span class="kw">summarise</span>(<span class="dt">nb_id =</span> <span class="kw">n_distinct</span>(ech_id)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-25" title="25"><span class="st">        </span>ungroup</a>
<a class="sourceLine" id="cb56-26" title="26">       </a>
<a class="sourceLine" id="cb56-27" title="27">dat &lt;-<span class="st"> </span>lf <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-28" title="28"><span class="st">       </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year, outlier <span class="op">==</span><span class="st"> </span>F) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-29" title="29"><span class="st">       </span><span class="kw">group_by</span>(engin, longueur) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-30" title="30"><span class="st">       </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">sum</span>(n_mes, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-31" title="31"><span class="st">       </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-32" title="32"><span class="st">       </span><span class="kw">left_join</span>(., engins_obs <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(engin, engin_groupe), <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-33" title="33"><span class="st">       </span><span class="kw">left_join</span>(., n_id, <span class="dt">by =</span> <span class="st">&quot;engin&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-34" title="34"><span class="st">       </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-35" title="35"><span class="st">       </span><span class="kw">mutate</span>(<span class="dt">engin =</span> <span class="kw">paste0</span>(engin, <span class="st">&quot; (&quot;</span>, <span class="kw">unique</span>(nb_id), text1, <span class="kw">format</span>(<span class="kw">sum</span>(n), <span class="dt">big.mark =</span> bm), text2)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-36" title="36"><span class="st">       </span>ungroup</a>
<a class="sourceLine" id="cb56-37" title="37"></a>
<a class="sourceLine" id="cb56-38" title="38"><span class="kw">dim</span>(dat) <span class="co"># 875 obs et 5 var</span></a>
<a class="sourceLine" id="cb56-39" title="39"><span class="co">## [1] 875   5</span></a>
<a class="sourceLine" id="cb56-40" title="40"></a>
<a class="sourceLine" id="cb56-41" title="41">g &lt;-<span class="st"> </span><span class="kw">intersect</span>(<span class="kw">levels</span>(engins_deb<span class="op">$</span>engin_groupe), g); g <span class="co"># je veux une figure pour chacun de ces regroupements</span></a>
<a class="sourceLine" id="cb56-42" title="42"><span class="co">## [1] &quot;Shrimp trawl&quot; &quot;Other trawls&quot; &quot;Seines&quot;       &quot;Gillnets&quot;     &quot;Longlines&quot;   </span></a>
<a class="sourceLine" id="cb56-43" title="43"><span class="co">## [6] &quot;Hand gear&quot;    &quot;Traps&quot;</span></a>
<a class="sourceLine" id="cb56-44" title="44"></a>
<a class="sourceLine" id="cb56-45" title="45"><span class="kw">range</span>(dat<span class="op">$</span>longueur)</a>
<a class="sourceLine" id="cb56-46" title="46"><span class="co">## [1]   4 148</span></a>
<a class="sourceLine" id="cb56-47" title="47">brks_x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">150</span>, <span class="dt">by =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb56-48" title="48">labs_x &lt;-<span class="st"> </span>brks_x</a>
<a class="sourceLine" id="cb56-49" title="49">labs_x[labs_x <span class="op">%%</span><span class="st"> </span><span class="dv">10</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb56-50" title="50"></a>
<a class="sourceLine" id="cb56-51" title="51"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(g)){</a>
<a class="sourceLine" id="cb56-52" title="52">  dat_graph &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-53" title="53"><span class="st">               </span><span class="kw">filter</span>(engin_groupe <span class="op">==</span><span class="st"> </span>g[i]) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-54" title="54"><span class="st">               </span><span class="kw">group_by</span>(engin) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-55" title="55"><span class="st">               </span><span class="kw">mutate</span>(<span class="dt">prop =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-56" title="56"><span class="st">               </span>ungroup</a>
<a class="sourceLine" id="cb56-57" title="57">               </a>
<a class="sourceLine" id="cb56-58" title="58">  graph &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat_graph, <span class="kw">aes</span>(<span class="dt">x =</span> longueur, <span class="dt">y =</span> prop, <span class="dt">color =</span> engin)) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-59" title="59"><span class="st">           </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="fl">0.75</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-60" title="60"><span class="st">           </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>engin_groupe) <span class="op">+</span><span class="st"> </span><span class="co"># juste pour avoir un titre à chaque panneau</span></a>
<a class="sourceLine" id="cb56-61" title="61"><span class="st">           </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;black&quot;</span>, <span class="st">&quot;grey50&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;green&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-62" title="62"><span class="st">           </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb56-63" title="63">                 <span class="dt">legend.justification =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),</a>
<a class="sourceLine" id="cb56-64" title="64">                 <span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.5</span>,<span class="fl">0.25</span>,<span class="dv">0</span>), <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-65" title="65"><span class="st">           </span><span class="kw">labs</span>(<span class="dt">x =</span> lab1, <span class="dt">y =</span> lab2, <span class="dt">color =</span> <span class="ot">NULL</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb56-66" title="66"><span class="st">           </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="kw">min</span>(brks_x), <span class="kw">max</span>(brks_x)), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">breaks =</span> brks_x, <span class="dt">labels =</span> labs_x)</a>
<a class="sourceLine" id="cb56-67" title="67">  </a>
<a class="sourceLine" id="cb56-68" title="68">  <span class="kw">assign</span>(<span class="dt">x =</span> <span class="kw">paste0</span>(<span class="st">&quot;graph_&quot;</span>, letters[i]), <span class="dt">value =</span> graph)</a>
<a class="sourceLine" id="cb56-69" title="69">  <span class="kw">rm</span>(dat_graph, graph)</a>
<a class="sourceLine" id="cb56-70" title="70">}</a>
<a class="sourceLine" id="cb56-71" title="71"></a>
<a class="sourceLine" id="cb56-72" title="72"><span class="co"># Combinaison des figures</span></a>
<a class="sourceLine" id="cb56-73" title="73">combi &lt;-<span class="st"> </span><span class="kw">plot_grid</span>(graph_a <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-74" title="74">                   graph_b <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-75" title="75">                   graph_c <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-76" title="76">                   graph_d <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-77" title="77">                   graph_e <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-78" title="78">                   graph_f <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-79" title="79">                   graph_g <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="ot">NULL</span>), </a>
<a class="sourceLine" id="cb56-80" title="80">                   <span class="dt">ncol =</span>  <span class="dv">2</span>, <span class="dt">byrow =</span> T, <span class="dt">labels =</span> <span class="st">&quot;AUTO&quot;</span>)</a>
<a class="sourceLine" id="cb56-81" title="81">x_title &lt;-<span class="st"> </span><span class="kw">ggdraw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">draw_label</span>(<span class="dt">label =</span> lab1, <span class="dt">size =</span> <span class="dv">11</span>)</a>
<a class="sourceLine" id="cb56-82" title="82">y_title &lt;-<span class="st"> </span><span class="kw">ggdraw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">draw_label</span>(<span class="dt">label =</span> lab2, <span class="dt">size =</span> <span class="dv">11</span>, <span class="dt">angle =</span> <span class="dv">90</span>)</a>
<a class="sourceLine" id="cb56-83" title="83"></a>
<a class="sourceLine" id="cb56-84" title="84"><span class="co"># https://stackoverflow.com/questions/37052059/how-to-add-a-title-for-a-grid-layout-figure-in-ggplot2</span></a>
<a class="sourceLine" id="cb56-85" title="85">graph2 &lt;-<span class="st"> </span><span class="kw">plot_grid</span>(y_title, combi, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">rel_widths =</span> <span class="kw">c</span>(<span class="fl">0.05</span>, <span class="dv">1</span>)) <span class="co"># rel_heights values control title margins</span></a>
<a class="sourceLine" id="cb56-86" title="86">graph2 &lt;-<span class="st"> </span><span class="kw">plot_grid</span>(graph2, x_title, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">rel_heights =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">0.05</span>))</a>
<a class="sourceLine" id="cb56-87" title="87">graph2</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-40-1.png" width="864" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"></a>
<a class="sourceLine" id="cb57-2" title="2"><span class="kw">rm</span>(graph_a, graph_b, graph_c, graph_d, graph_e, graph_f, graph_g, x_title, y_title)</a></code></pre></div>
</div>
<div id="graph3-espèces-visées" class="section level2">
<h2><span class="header-section-number">9.2</span> <code>graph3</code>: espèces visées</h2>
<p>L’espèce visée n’est pas une information fournie dans <code>lf</code> ni dans <code>bio</code>. Je vais tenter de l’extraire depuis <code>ziff</code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">cle &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;nbpc&quot;</span>, <span class="st">&quot;date_deb&quot;</span>)</a>
<a class="sourceLine" id="cb58-2" title="2"></a>
<a class="sourceLine" id="cb58-3" title="3">ziff <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct_at</span>(cle) <span class="op">%&gt;%</span><span class="st"> </span>nrow <span class="co"># 341413</span></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="co">## [1] 341413</span></a>
<a class="sourceLine" id="cb58-5" title="5">tmp &lt;-<span class="st"> </span>ziff <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-6" title="6"><span class="st">       </span><span class="kw">group_by_at</span>(cle) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-7" title="7"><span class="st">       </span><span class="kw">summarise</span>(<span class="dt">esp_vis =</span> <span class="kw">unique</span>(prespvis)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-8" title="8"><span class="st">       </span>ungroup</a>
<a class="sourceLine" id="cb58-9" title="9"><span class="kw">dim</span>(tmp) <span class="co"># 343222 = plus de lignes = des débarquements avaient &gt; 1 espèce visée?</span></a>
<a class="sourceLine" id="cb58-10" title="10"><span class="co">## [1] 343222      3</span></a>
<a class="sourceLine" id="cb58-11" title="11"></a>
<a class="sourceLine" id="cb58-12" title="12">tmp <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-13" title="13"><span class="st">  </span><span class="kw">group_by_at</span>(cle) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-14" title="14"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">esp_vis =</span> <span class="kw">paste</span>(<span class="kw">as.character</span>(<span class="kw">unique</span>(esp_vis)), <span class="dt">collapse =</span> <span class="st">&quot;,&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-15" title="15"><span class="st">  </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-16" title="16"><span class="st">  </span><span class="kw">filter</span>(n <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb58-17" title="17"><span class="co">## # A tibble: 1,768 x 4</span></a>
<a class="sourceLine" id="cb58-18" title="18"><span class="co">##    nbpc   date_deb       n esp_vis</span></a>
<a class="sourceLine" id="cb58-19" title="19"><span class="co">##    &lt;chr&gt;  &lt;date&gt;     &lt;int&gt; &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb58-20" title="20"><span class="co">##  1 000000 1985-07-01     2 NA,100 </span></a>
<a class="sourceLine" id="cb58-21" title="21"><span class="co">##  2 000000 1988-07-21     2 NA,100 </span></a>
<a class="sourceLine" id="cb58-22" title="22"><span class="co">##  3 000000 1988-07-22     2 NA,100 </span></a>
<a class="sourceLine" id="cb58-23" title="23"><span class="co">##  4 000264 1985-09-04     2 702,100</span></a>
<a class="sourceLine" id="cb58-24" title="24"><span class="co">##  5 000361 2001-06-19     2 100,142</span></a>
<a class="sourceLine" id="cb58-25" title="25"><span class="co">##  6 000361 2001-07-12     2 100,142</span></a>
<a class="sourceLine" id="cb58-26" title="26"><span class="co">##  7 000361 2003-09-20     2 142,100</span></a>
<a class="sourceLine" id="cb58-27" title="27"><span class="co">##  8 000446 1985-10-18     2 100,702</span></a>
<a class="sourceLine" id="cb58-28" title="28"><span class="co">##  9 000567 1986-05-27     2 199,100</span></a>
<a class="sourceLine" id="cb58-29" title="29"><span class="co">## 10 000601 1985-08-02     2 702,NA </span></a>
<a class="sourceLine" id="cb58-30" title="30"><span class="co">## # ... with 1,758 more rows</span></a>
<a class="sourceLine" id="cb58-31" title="31"><span class="co"># Effectivement...</span></a>
<a class="sourceLine" id="cb58-32" title="32"></a>
<a class="sourceLine" id="cb58-33" title="33"><span class="kw">rm</span>(cle, tmp)</a></code></pre></div>
<p>Je ne suis pas capable d’apparier les données <code>ziff</code> à celles <code>lf</code> pour savoir qu’elle était l’espèce visée pour chaque capture d’où des échantillons ont été prélevés.</p>
<p>Je vais par contre regarder les données <code>ziff</code> pour résumer la période 1993–2020.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1">dat_graph &lt;-<span class="st"> </span>ziff <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year)</a>
<a class="sourceLine" id="cb59-2" title="2">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(dat_graph, <span class="kw">is.na</span>(prespvis))); <span class="kw">length</span>(cor) <span class="co"># 43059 lignes</span></a>
<a class="sourceLine" id="cb59-3" title="3"><span class="co">## [1] 43059</span></a>
<a class="sourceLine" id="cb59-4" title="4"></a>
<a class="sourceLine" id="cb59-5" title="5">dat_graph[cor, ] <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(prov) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-7" title="7"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">nblignes =</span> <span class="kw">n</span>(), <span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T))</a>
<a class="sourceLine" id="cb59-8" title="8"><span class="co">## # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb59-9" title="9"><span class="co">##   prov  nblignes  catch</span></a>
<a class="sourceLine" id="cb59-10" title="10"><span class="co">##   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb59-11" title="11"><span class="co">## 1 N-B         26   17.2</span></a>
<a class="sourceLine" id="cb59-12" title="12"><span class="co">## 2 QC       20103 5080. </span></a>
<a class="sourceLine" id="cb59-13" title="13"><span class="co">## 3 T-N      22930 4243.</span></a>
<a class="sourceLine" id="cb59-14" title="14"><span class="co"># La problématique ne semble pas juste être TN</span></a>
<a class="sourceLine" id="cb59-15" title="15"></a>
<a class="sourceLine" id="cb59-16" title="16">tmp &lt;-<span class="st"> </span>dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-17" title="17"><span class="st">       </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-18" title="18"><span class="st">       </span><span class="kw">summarise</span>(<span class="dt">deb_avec =</span> <span class="kw">sum</span>(pds_vift[<span class="op">!</span><span class="kw">is.na</span>(prespvis)], <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb59-19" title="19">                 <span class="dt">deb_sans =</span> <span class="kw">sum</span>(pds_vift[<span class="kw">is.na</span>(prespvis)], <span class="dt">na.rm =</span> T),</a>
<a class="sourceLine" id="cb59-20" title="20">                 <span class="dt">deb_tot =</span> deb_avec <span class="op">+</span><span class="st"> </span>deb_sans,</a>
<a class="sourceLine" id="cb59-21" title="21">                 <span class="dt">perc =</span> deb_sans <span class="op">/</span><span class="st"> </span>deb_tot <span class="op">*</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-22" title="22"><span class="st">       </span>ungroup</a>
<a class="sourceLine" id="cb59-23" title="23">tmp</a>
<a class="sourceLine" id="cb59-24" title="24"><span class="co">## # A tibble: 28 x 5</span></a>
<a class="sourceLine" id="cb59-25" title="25"><span class="co">##    annee deb_avec deb_sans deb_tot  perc</span></a>
<a class="sourceLine" id="cb59-26" title="26"><span class="co">##    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb59-27" title="27"><span class="co">##  1  1993  17893.      559.  18452.  3.03</span></a>
<a class="sourceLine" id="cb59-28" title="28"><span class="co">##  2  1994    261.      276.    537. 51.3 </span></a>
<a class="sourceLine" id="cb59-29" title="29"><span class="co">##  3  1995     20.0     165.    185. 89.2 </span></a>
<a class="sourceLine" id="cb59-30" title="30"><span class="co">##  4  1996     29.4     287.    317. 90.7 </span></a>
<a class="sourceLine" id="cb59-31" title="31"><span class="co">##  5  1997    470.     4322.   4792. 90.2 </span></a>
<a class="sourceLine" id="cb59-32" title="32"><span class="co">##  6  1998   2635.      594.   3229. 18.4 </span></a>
<a class="sourceLine" id="cb59-33" title="33"><span class="co">##  7  1999   6472.      418.   6890.  6.07</span></a>
<a class="sourceLine" id="cb59-34" title="34"><span class="co">##  8  2000   6573.      283.   6857.  4.13</span></a>
<a class="sourceLine" id="cb59-35" title="35"><span class="co">##  9  2001   6773.      178.   6950.  2.56</span></a>
<a class="sourceLine" id="cb59-36" title="36"><span class="co">## 10  2002   6254.      275.   6529.  4.22</span></a>
<a class="sourceLine" id="cb59-37" title="37"><span class="co">## # ... with 18 more rows</span></a>
<a class="sourceLine" id="cb59-38" title="38"></a>
<a class="sourceLine" id="cb59-39" title="39">tmp <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(annee <span class="op">!=</span><span class="st"> </span><span class="dv">1997</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(deb_sans) <span class="op">%&gt;%</span><span class="st"> </span>mean <span class="co"># en excluant 1997, 186 t par année en moyenne débarquées sans esp_vis</span></a>
<a class="sourceLine" id="cb59-40" title="40"><span class="co">## [1] 185.8846</span></a>
<a class="sourceLine" id="cb59-41" title="41"></a>
<a class="sourceLine" id="cb59-42" title="42"><span class="co"># 1997 n&#39;est pas une année de moratoire. Pourquoi les espèces visées prennent autant d&#39;importance?</span></a>
<a class="sourceLine" id="cb59-43" title="43">dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-44" title="44"><span class="st">  </span><span class="kw">filter</span>(annee <span class="op">==</span><span class="st"> </span><span class="dv">1997</span>, <span class="kw">is.na</span>(prespvis)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-45" title="45"><span class="st">  </span><span class="kw">group_by</span>(prov) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-46" title="46"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T))</a>
<a class="sourceLine" id="cb59-47" title="47"><span class="co">## # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb59-48" title="48"><span class="co">##   prov  catch</span></a>
<a class="sourceLine" id="cb59-49" title="49"><span class="co">##   &lt;chr&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb59-50" title="50"><span class="co">## 1 QC     519.</span></a>
<a class="sourceLine" id="cb59-51" title="51"><span class="co">## 2 T-N   3803.</span></a>
<a class="sourceLine" id="cb59-52" title="52"><span class="co"># en 1997, la vaste majorité du problème des espèces visées est dû à TN</span></a>
<a class="sourceLine" id="cb59-53" title="53">dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-54" title="54"><span class="st">  </span><span class="kw">filter</span>(annee <span class="op">==</span><span class="st"> </span><span class="dv">1997</span>, <span class="kw">is.na</span>(prespvis), prov <span class="op">==</span><span class="st"> &quot;T-N&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-55" title="55"><span class="st">  </span><span class="kw">group_by</span>(prespcap) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-56" title="56"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T))</a>
<a class="sourceLine" id="cb59-57" title="57"><span class="co">## # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb59-58" title="58"><span class="co">##   prespcap catch</span></a>
<a class="sourceLine" id="cb59-59" title="59"><span class="co">##      &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb59-60" title="60"><span class="co">## 1       NA 3803.</span></a>
<a class="sourceLine" id="cb59-61" title="61"><span class="co"># Même l&#39;espèce principale capturée n&#39;est pas fournie</span></a>
<a class="sourceLine" id="cb59-62" title="62">dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-63" title="63"><span class="st">  </span><span class="kw">filter</span>(annee <span class="op">==</span><span class="st"> </span><span class="dv">1997</span>, <span class="kw">is.na</span>(prespvis), prov <span class="op">==</span><span class="st"> &quot;T-N&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-64" title="64"><span class="st">  </span><span class="kw">group_by</span>(engin_fr) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-65" title="65"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T))</a>
<a class="sourceLine" id="cb59-66" title="66"><span class="co">## # A tibble: 7 x 2</span></a>
<a class="sourceLine" id="cb59-67" title="67"><span class="co">##   engin_fr                               catch</span></a>
<a class="sourceLine" id="cb59-68" title="68"><span class="co">##   &lt;fct&gt;                                  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb59-69" title="69"><span class="co">## 1 Chalut de fond à panneaux (arrière)   19.4  </span></a>
<a class="sourceLine" id="cb59-70" title="70"><span class="co">## 2 Chalut mésopélagique (arrière)         0.3  </span></a>
<a class="sourceLine" id="cb59-71" title="71"><span class="co">## 3 Filet maillant (fixe)                160.   </span></a>
<a class="sourceLine" id="cb59-72" title="72"><span class="co">## 4 Ligne à main (appâtée)               265.   </span></a>
<a class="sourceLine" id="cb59-73" title="73"><span class="co">## 5 Palangre                            3301.   </span></a>
<a class="sourceLine" id="cb59-74" title="74"><span class="co">## 6 Seine danoise                          0.699</span></a>
<a class="sourceLine" id="cb59-75" title="75"><span class="co">## 7 Trappe                                56.9</span></a>
<a class="sourceLine" id="cb59-76" title="76"><span class="co"># À partir de l&#39;engin, on pourrait peut-être statué que ça visait principalement la morue?</span></a>
<a class="sourceLine" id="cb59-77" title="77"></a>
<a class="sourceLine" id="cb59-78" title="78"><span class="co"># Espèces à ne pas prioriser (en dehors du top 6)</span></a>
<a class="sourceLine" id="cb59-79" title="79">dat_graph[<span class="kw">is.na</span>(dat_graph<span class="op">$</span>prespvis), <span class="st">&quot;prespvis&quot;</span>] &lt;-<span class="st"> </span><span class="dv">999</span> <span class="co"># pour ne pas avoir des 999 et des NA</span></a>
<a class="sourceLine" id="cb59-80" title="80"></a>
<a class="sourceLine" id="cb59-81" title="81">sp &lt;-<span class="st"> </span>dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-82" title="82"><span class="st">      </span><span class="kw">filter</span>(annee <span class="op">%in%</span><span class="st"> </span>my_year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-83" title="83"><span class="st">      </span><span class="kw">group_by</span>(prespvis) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-84" title="84"><span class="st">      </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-85" title="85"><span class="st">      </span>ungroup <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-86" title="86"><span class="st">      </span><span class="kw">arrange</span>(<span class="kw">desc</span>(catch)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-87" title="87"><span class="st">      </span><span class="kw">pull</span>(prespvis) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-88" title="88"><span class="st">      </span>.[<span class="dv">7</span><span class="op">:</span><span class="kw">length</span>(.)]</a>
<a class="sourceLine" id="cb59-89" title="89">sp</a>
<a class="sourceLine" id="cb59-90" title="90"><span class="co">##  [1] 140 200 360 171 702 143 199 250 928 176 160 174 705 170 101 149 362 110 701</span></a>
<a class="sourceLine" id="cb59-91" title="91"><span class="co">## [20] 197 354 141 700 351 352 615   1 617 161 356 359 173 175</span></a>
<a class="sourceLine" id="cb59-92" title="92"></a>
<a class="sourceLine" id="cb59-93" title="93">cor &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">with</span>(dat_graph, prespvis <span class="op">%in%</span><span class="st"> </span>sp)); <span class="kw">length</span>(cor) <span class="co"># 9085 lignes</span></a>
<a class="sourceLine" id="cb59-94" title="94"><span class="co">## [1] 9085</span></a>
<a class="sourceLine" id="cb59-95" title="95">dat_graph<span class="op">$</span>prespvis[cor] &lt;-<span class="st"> </span><span class="dv">9999</span> <span class="co"># code bidon</span></a>
<a class="sourceLine" id="cb59-96" title="96"></a>
<a class="sourceLine" id="cb59-97" title="97">dat_graph &lt;-<span class="st"> </span>dat_graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-98" title="98"><span class="st">             </span><span class="kw">group_by</span>(annee, prespvis) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb59-99" title="99"><span class="st">             </span><span class="kw">summarise</span>(<span class="dt">catch =</span> <span class="kw">sum</span>(pds_vift, <span class="dt">na.rm =</span> T)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-100" title="100"><span class="st">             </span><span class="kw">group_by</span>(annee) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-101" title="101"><span class="st">             </span><span class="kw">mutate</span>(<span class="dt">perc =</span> (catch <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(catch)) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>,</a>
<a class="sourceLine" id="cb59-102" title="102">                    <span class="dt">perc_lab =</span> <span class="kw">ifelse</span>(perc <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>, <span class="st">&quot;&quot;</span>, <span class="kw">format</span>(<span class="kw">round</span>(perc, <span class="dv">1</span>), <span class="dt">nsmall =</span> <span class="dv">1</span>, <span class="dt">decimal.mark =</span> dm))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-103" title="103"><span class="st">             </span>ungroup</a>
<a class="sourceLine" id="cb59-104" title="104">dat_graph<span class="op">$</span>prespvis &lt;-<span class="st"> </span><span class="kw">factor</span>(dat_graph<span class="op">$</span>prespvis, <span class="dt">levels =</span> <span class="kw">sort</span>(<span class="kw">unique</span>(dat_graph<span class="op">$</span>prespvis), <span class="dt">decreasing =</span> T), <span class="dt">ordered =</span> T)</a>
<a class="sourceLine" id="cb59-105" title="105"></a>
<a class="sourceLine" id="cb59-106" title="106">ajout &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">prespvis =</span> <span class="kw">levels</span>(dat_graph<span class="op">$</span>prespvis),</a>
<a class="sourceLine" id="cb59-107" title="107">                <span class="dt">sp_vis_fr =</span> <span class="kw">c</span>(<span class="st">&quot;Autres&quot;</span>, <span class="st">&quot;Inconnu&quot;</span>, <span class="st">&quot;Flétan du Groenland&quot;</span>, <span class="st">&quot;Plie grise&quot;</span>, <span class="st">&quot;Flétan atlantique&quot;</span>, <span class="st">&quot;Sébastes&quot;</span>, </a>
<a class="sourceLine" id="cb59-108" title="108">                            <span class="st">&quot;Morue franche&quot;</span>),</a>
<a class="sourceLine" id="cb59-109" title="109">                <span class="dt">sp_vis_en =</span> <span class="kw">c</span>(<span class="st">&quot;Others&quot;</span>, <span class="st">&quot;Unknown&quot;</span>, <span class="st">&quot;Greenland halibut&quot;</span>, <span class="st">&quot;Witch flounder&quot;</span>, <span class="st">&quot;Atlantic halibut&quot;</span>, <span class="st">&quot;Redfish&quot;</span>, </a>
<a class="sourceLine" id="cb59-110" title="110">                            <span class="st">&quot;Atlantic cod&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-111" title="111"><span class="st">         </span><span class="kw">mutate</span>(<span class="dt">sp_vis_fr =</span> <span class="kw">factor</span>(sp_vis_fr, <span class="dt">levels =</span> sp_vis_fr),</a>
<a class="sourceLine" id="cb59-112" title="112">                <span class="dt">sp_vis_en =</span> <span class="kw">factor</span>(sp_vis_en, <span class="dt">levels =</span> sp_vis_en))</a>
<a class="sourceLine" id="cb59-113" title="113"></a>
<a class="sourceLine" id="cb59-114" title="114"><span class="kw">dim</span>(dat_graph) <span class="co"># 193 obs et 5 var</span></a>
<a class="sourceLine" id="cb59-115" title="115"><span class="co">## [1] 193   5</span></a>
<a class="sourceLine" id="cb59-116" title="116">dat_graph &lt;-<span class="st"> </span><span class="kw">left_join</span>(dat_graph, ajout, <span class="dt">by =</span> <span class="st">&quot;prespvis&quot;</span>)</a>
<a class="sourceLine" id="cb59-117" title="117"><span class="kw">dim</span>(dat_graph) <span class="co"># 193 obs et 7 var</span></a>
<a class="sourceLine" id="cb59-118" title="118"><span class="co">## [1] 193   7</span></a>
<a class="sourceLine" id="cb59-119" title="119"></a>
<a class="sourceLine" id="cb59-120" title="120">brks_x &lt;-<span class="st"> </span>my_year</a>
<a class="sourceLine" id="cb59-121" title="121">labs_x &lt;-<span class="st"> </span>brks_x</a>
<a class="sourceLine" id="cb59-122" title="122">labs_x[labs_x <span class="op">%%</span><span class="st"> </span><span class="dv">5</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb59-123" title="123"></a>
<a class="sourceLine" id="cb59-124" title="124">brks_y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">100</span>, <span class="dt">by =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb59-125" title="125">labs_y &lt;-<span class="st"> </span>brks_y</a>
<a class="sourceLine" id="cb59-126" title="126">labs_y[labs_y <span class="op">%%</span><span class="st"> </span><span class="dv">20</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> &quot;&quot;</span></a>
<a class="sourceLine" id="cb59-127" title="127"></a>
<a class="sourceLine" id="cb59-128" title="128"><span class="cf">if</span> (langue <span class="op">==</span><span class="st"> &quot;fr&quot;</span>){</a>
<a class="sourceLine" id="cb59-129" title="129">  lab1 &lt;-<span class="st"> &quot;Année&quot;</span></a>
<a class="sourceLine" id="cb59-130" title="130">  lab2 &lt;-<span class="st"> &quot;% des débarquements annuels&quot;</span></a>
<a class="sourceLine" id="cb59-131" title="131">  lab3 &lt;-<span class="st"> &quot;Espèce visée&quot;</span></a>
<a class="sourceLine" id="cb59-132" title="132">  dat_graph<span class="op">$</span>esp_vis &lt;-<span class="st"> </span>dat_graph<span class="op">$</span>sp_vis_fr</a>
<a class="sourceLine" id="cb59-133" title="133">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb59-134" title="134">  lab1 &lt;-<span class="st"> &quot;Year&quot;</span></a>
<a class="sourceLine" id="cb59-135" title="135">  lab2 &lt;-<span class="st"> &quot;% of annual landings&quot;</span></a>
<a class="sourceLine" id="cb59-136" title="136">  lab3 &lt;-<span class="st"> &quot;Targeted species&quot;</span></a>
<a class="sourceLine" id="cb59-137" title="137">  dat_graph<span class="op">$</span>esp_vis &lt;-<span class="st"> </span>dat_graph<span class="op">$</span>sp_vis_en</a>
<a class="sourceLine" id="cb59-138" title="138">}</a>
<a class="sourceLine" id="cb59-139" title="139"></a>
<a class="sourceLine" id="cb59-140" title="140">graph3 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat_graph, <span class="kw">aes</span>(<span class="dt">x =</span> annee, <span class="dt">y =</span> perc, <span class="dt">fill =</span> esp_vis)) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-141" title="141"><span class="st">          </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-142" title="142"><span class="st">          </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">breaks =</span> brks_x, <span class="dt">labels =</span> labs_x) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-143" title="143"><span class="st">          </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">breaks =</span> brks_y, <span class="dt">labels =</span> labs_y) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-144" title="144"><span class="st">          </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Paired&quot;</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-145" title="145"><span class="st">          </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> perc_lab), <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="fl">0.5</span>), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-146" title="146"><span class="st">          </span><span class="kw">labs</span>(<span class="dt">x =</span> lab1, <span class="dt">y =</span> lab2, <span class="dt">fill =</span> lab3) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-147" title="147"><span class="st">          </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>,</a>
<a class="sourceLine" id="cb59-148" title="148">                <span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb59-149" title="149"><span class="st">          </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="kw">guide_legend</span>(<span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">reverse =</span> T))</a>
<a class="sourceLine" id="cb59-150" title="150">graph3</a></code></pre></div>
<p><img src="02_preparation_data_files/figure-html/unnamed-chunk-42-1.png" width="864" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="sauvegarde" class="section level1">
<h1><span class="header-section-number">10</span> Sauvegarde</h1>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="kw">save</span>(lf, <span class="dt">file =</span> dat_LF)</a>
<a class="sourceLine" id="cb60-2" title="2"><span class="kw">save</span>(bio, <span class="dt">file =</span> dat_bio)</a>
<a class="sourceLine" id="cb60-3" title="3"><span class="kw">save</span>(<span class="dt">list =</span> <span class="kw">ls</span>(<span class="dt">pattern =</span> <span class="st">&quot;^graph[0-9]+&quot;</span>), <span class="dt">file =</span> <span class="kw">paste0</span>(result, <span class="st">&quot;02_graphs_&quot;</span>, langue,<span class="st">&quot;.Rda&quot;</span>))</a>
<a class="sourceLine" id="cb60-4" title="4"><span class="kw">save</span>(<span class="dt">list =</span> <span class="kw">ls</span>(<span class="dt">pattern =</span> <span class="st">&quot;^table[0-9]+&quot;</span>), <span class="dt">file =</span> <span class="kw">paste0</span>(result, <span class="st">&quot;02_tables_&quot;</span>, langue,<span class="st">&quot;.Rda&quot;</span>))</a></code></pre></div>
<div id="refs" class="references">
<div id="ref-Frechet1986a">
<p>Fréchet, A., et Gascon, D. 1986. Une nouvelle matrice de capture a l’âge pour Ie stock de morue des divisions 4R, 4S et 3Pn. CSCPCA Doc. de Rech. 86/104: 34 p.</p>
</div>
<div id="ref-Savard2013_fr">
<p>Savard, L., Gauthier, J., Bourdages, H., et Desgagnés, M. 2013. Prises accessoires de la pêche à la crevette nordique dans l’estuaire et le golfe du Saint-Laurent. Secr. can. de consult. sci. du MPO. Doc. de rech. 2012/151: ii + 56 p.</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
